var SLDP=function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=223)}([function(e,t,i){var r=i(2),n=i(82).f,s=i(15),a=i(16),o=i(102),u=i(120),c=i(191);e.exports=function(e,t){var i,l,h,f,d,p=e.target,v=e.global,m=e.stat;if(i=v?r:m?r[p]||o(p,{}):(r[p]||{}).prototype)for(l in t){if(f=t[l],h=e.noTargetGet?(d=n(i,l))&&d.value:i[l],!c(v?l:p+(m?".":"#")+l,e.forced)&&void 0!==h){if(typeof f==typeof h)continue;u(f,h)}(e.sham||h&&h.sham)&&s(f,"sham",!0),a(i,l,f,e)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){(function(t){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||Function("return this")()}).call(t,i(222))},function(e,t,i){"use strict";var r,n=i(93),s=i(5),a=i(2),o=i(8),u=i(7),c=i(62),l=i(15),h=i(16),f=i(9).f,d=i(67),p=i(54),v=i(4),m=i(85),g=a.Int8Array,y=g&&g.prototype,b=a.Uint8ClampedArray,_=b&&b.prototype,A=g&&d(g),w=y&&d(y),S=Object.prototype,k=S.isPrototypeOf,T=v("toStringTag"),C=m("TYPED_ARRAY_TAG"),x=n&&!!p&&"Opera"!==c(a.opera),E=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B=function(e){return o(e)&&u(P,c(e))};for(r in P)a[r]||(x=!1);if((!x||"function"!=typeof A||A===Function.prototype)&&(A=function(){throw TypeError("Incorrect invocation")},x))for(r in P)a[r]&&p(a[r],A);if((!x||!w||w===S)&&(w=A.prototype,x))for(r in P)a[r]&&p(a[r].prototype,w);if(x&&d(_)!==w&&p(_,w),s&&!u(w,T))for(r in E=!0,f(w,T,{get:function(){return o(this)?this[C]:void 0}}),P)a[r]&&l(a[r],C,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:x,TYPED_ARRAY_TAG:E&&C,aTypedArray:function(e){if(B(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(k.call(A,e))return e}else for(var t in P)if(u(P,r)){var i=a[t];if(i&&(e===i||k.call(i,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i){if(s){if(i)for(var r in P){var n=a[r];n&&u(n.prototype,e)&&delete n.prototype[e]}w[e]&&!i||h(w,e,i?t:x&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,i){var r,n;if(s){if(p){if(i)for(r in P)(n=a[r])&&u(n,e)&&delete n[e];if(A[e]&&!i)return;try{return h(A,e,i?t:x&&g[e]||t)}catch(e){}}for(r in P)!(n=a[r])||n[e]&&!i||h(n,e,t)}},isView:function(e){var t=c(e);return"DataView"===t||u(P,t)},isTypedArray:B,TypedArray:A,TypedArrayPrototype:w}},function(e,t,i){var r=i(2),n=i(103),s=i(7),a=i(85),o=i(97),u=i(146),c=n("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||a;e.exports=function(e){return s(c,e)||(o&&s(l,e)?c[e]=l[e]:c[e]=h("Symbol."+e)),c[e]}},function(e,t,i){var r=i(1);e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,i){var r=i(19),n=Math.min;e.exports=function(e){return e>0?n(r(e),9007199254740991):0}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){var r=i(5),n=i(130),s=i(11),a=i(68),o=Object.defineProperty;t.f=r?o:function(e,t,i){if(s(e),t=a(t,!0),s(i),n)try{return o(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var r=i(0),n=i(5);r({target:"Object",stat:!0,forced:!n,sham:!n},{defineProperty:i(9).f})},function(e,t,i){var r=i(8);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(59),i(148),i(211),i(69),i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s,a,o=(n="warn",s=[],a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.div=!1,this.id=t,this.prefix=i,this.lf="log"}var t,i;return t=e,(i=[{key:"setDiv",value:function(e){"string"==typeof e&&(this.div=document.getElementById(e))}},{key:"setPrefix",value:function(e){this.prefix=e}},{key:"error",value:function(){this.lf="error",this._log.apply(this,arguments)}},{key:"warn",value:function(){"warn"!=n&&"debug"!=n||(this.lf="warn",this._log.apply(this,arguments))}},{key:"debug",value:function(){"debug"==n&&(this.lf="log",this._log.apply(this,arguments))}},{key:"_log",value:function(){var e=Date.now(),t=e%1e3;t<10?t="00"+t:t<100&&(t="0"+t);var i=(e=Math.floor(e/1e3))%86400,r=Math.floor(i/3600);r<10&&(r="0"+r),i-=3600*r;var n=Math.floor(i/60);n<10&&(n="0"+n),(i-=60*n)<10&&(i="0"+i),arguments[0]="["+r+":"+n+":"+i+"."+t+"]["+this.id+"]["+this.prefix+"]: "+arguments[0],console[this.lf].apply(console,arguments);var a=this.div?this.div:s[this.id];if(a){var o=Array.prototype.slice.call(arguments),u=document.createElement("div"),c=document.createTextNode(o.join(" "));u.appendChild(c),a.appendChild(u),30<a.children.length&&a.removeChild(a.children[0]),a.scrollTop=a.scrollHeight}}}])&&r(t.prototype,i),e}(),{create:function(e,t){return new a(e,t)},setLevel:function(e){n=e},setDiv:function(e,t){"string"==typeof t&&(s[e]=document.getElementById(t))}});t.default=o},function(e,t,i){var r=i(55);e.exports=function(e){return Object(r(e))}},function(e,t,i){"use strict";var r=i(20),n=i(180),s=i(65),a=i(21),o=i(123),u=a.set,c=a.getterFor("Array Iterator");e.exports=o(Array,"Array",function(e,t){u(this,{type:"Array Iterator",target:r(e),index:0,kind:t})},function(){var e=c(this),t=e.target,i=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:r,done:!1}:"values"==i?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(e,t,i){var r=i(5),n=i(9),s=i(47);e.exports=r?function(e,t,i){return n.f(e,t,s(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var r=i(2),n=i(15),s=i(7),a=i(102),o=i(131),u=i(21),c=u.get,l=u.enforce,h=String(String).split("String");(e.exports=function(e,t,i,o){var u=!!o&&!!o.unsafe,c=!!o&&!!o.enumerable,f=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof t||s(i,"name")||n(i,"name",t),l(i).source=h.join("string"==typeof t?t:"")),e!==r?(u?!f&&e[t]&&(c=!0):delete e[t],c?e[t]=i:n(e,t,i)):c?e[t]=i:a(t,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||o(this)})},function(e,t,i){var r=i(105),n=i(16),s=i(197);r||n(Object.prototype,"toString",s,{unsafe:!0})},function(e,t,i){var r=i(78),n=i(63),s=i(13),a=i(6),o=i(95),u=[].push,c=function(e){var t=1==e,i=2==e,c=3==e,l=4==e,h=6==e,f=5==e||h;return function(d,p,v,m){for(var g,y,b=s(d),_=n(b),A=r(p,v,3),w=a(_.length),S=0,k=m||o,T=t?k(d,w):i?k(d,0):void 0;w>S;S++)if((f||S in _)&&(y=A(g=_[S],S,b),e))if(t)T[S]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:u.call(T,g)}else if(l)return!1;return h?-1:c||l?l:T}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(e,t){var i=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:i)(e)}},function(e,t,i){var r=i(63),n=i(55);e.exports=function(e){return r(n(e))}},function(e,t,i){var r,n,s,a=i(193),o=i(2),u=i(8),c=i(15),l=i(7),h=i(84),f=i(80),d=o.WeakMap;if(a){var p=new d,v=p.get,m=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},n=function(e){return v.call(p,e)||{}},s=function(e){return m.call(p,e)}}else{var y=h("state");f[y]=!0,r=function(e,t){return c(e,y,t),t},n=function(e){return l(e,y)?e[y]:{}},s=function(e){return l(e,y)}}e.exports={set:r,get:n,has:s,enforce:function(e){return s(e)?n(e):r(e,{})},getterFor:function(e){return function(t){var i;if(!u(t)||(i=n(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}}},function(e,t,i){"use strict";var r=i(0),n=i(1),s=i(75),a=i(11),o=i(50),u=i(6),c=i(57),l=s.ArrayBuffer,h=s.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:n(function(){return!new l(2).slice(1,void 0).byteLength})},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(a(this),e);for(var i=a(this).byteLength,r=o(e,i),n=o(void 0===t?i:t,i),s=new(c(this,l))(u(n-r)),d=new h(this),p=new h(s),v=0;r<n;)p.setUint8(v++,d.getUint8(r++));return s}})},function(e,t,i){"use strict";var r=i(3),n=i(182),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",function(e,t){return n.call(s(this),e,t,arguments.length>2?arguments[2]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=i(18).every,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=i(116),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",function(e){return n.apply(s(this),arguments)})},function(e,t,i){"use strict";var r=i(3),n=i(18).filter,s=i(57),a=r.aTypedArray,o=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",function(e){for(var t=n(a(this),e,arguments.length>1?arguments[1]:void 0),i=s(this,this.constructor),r=0,u=t.length,c=new(o(i))(u);u>r;)c[r]=t[r++];return c})},function(e,t,i){"use strict";var r=i(3),n=i(18).findIndex,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=i(18).find,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=i(18).forEach,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",function(e){n(s(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=i(76).includes,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=i(76).indexOf,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(2),n=i(3),s=i(14),a=i(4)("iterator"),o=r.Uint8Array,u=s.values,c=s.keys,l=s.entries,h=n.aTypedArray,f=n.exportTypedArrayMethod,d=o&&o.prototype[a],p=!!d&&("values"==d.name||void 0==d.name),v=function(){return u.call(h(this))};f("entries",function(){return l.call(h(this))}),f("keys",function(){return c.call(h(this))}),f("values",v,!p),f(a,v,!p)},function(e,t,i){"use strict";var r=i(3),n=r.aTypedArray,s=[].join;(0,r.exportTypedArrayMethod)("join",function(e){return s.apply(n(this),arguments)})},function(e,t,i){"use strict";var r=i(3),n=i(118),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",function(e){return n.apply(s(this),arguments)})},function(e,t,i){"use strict";var r=i(3),n=i(18).map,s=i(57),a=r.aTypedArray,o=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",function(e){return n(a(this),e,arguments.length>1?arguments[1]:void 0,function(e,t){return new(o(s(e,e.constructor)))(t)})})},function(e,t,i){"use strict";var r=i(3),n=i(119).right,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",function(e){return n(s(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=i(119).left,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",function(e){return n(s(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=r.aTypedArray,s=r.exportTypedArrayMethod,a=Math.floor;s("reverse",function(){for(var e,t=n(this).length,i=a(t/2),r=0;r<i;)e=this[r],this[r++]=this[--t],this[t]=e;return this})},function(e,t,i){"use strict";var r=i(3),n=i(6),s=i(145),a=i(13),o=i(1),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",function(e){u(this);var t=s(arguments.length>1?arguments[1]:void 0,1),i=this.length,r=a(e),o=n(r.length),c=0;if(o+t>i)throw RangeError("Wrong length");for(;c<o;)this[t+c]=r[c++]},o(function(){new Int8Array(1).set({})}))},function(e,t,i){"use strict";var r=i(3),n=i(57),s=i(1),a=r.aTypedArray,o=r.aTypedArrayConstructor,u=[].slice;(0,r.exportTypedArrayMethod)("slice",function(e,t){for(var i=u.call(a(this),e,t),r=n(this,this.constructor),s=0,c=i.length,l=new(o(r))(c);c>s;)l[s]=i[s++];return l},s(function(){new Int8Array(1).slice()}))},function(e,t,i){"use strict";var r=i(3),n=i(18).some,s=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)})},function(e,t,i){"use strict";var r=i(3),n=r.aTypedArray,s=[].sort;(0,r.exportTypedArrayMethod)("sort",function(e){return s.call(n(this),e)})},function(e,t,i){"use strict";var r=i(3),n=i(6),s=i(50),a=i(57),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",function(e,t){var i=o(this),r=i.length,u=s(e,r);return new(a(i,i.constructor))(i.buffer,i.byteOffset+u*i.BYTES_PER_ELEMENT,n((void 0===t?r:s(t,r))-u))})},function(e,t,i){"use strict";var r=i(2),n=i(3),s=i(1),a=r.Int8Array,o=n.aTypedArray,u=n.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,h=!!a&&s(function(){c.call(new a(1))});u("toLocaleString",function(){return c.apply(h?l.call(o(this)):o(this),arguments)},s(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!s(function(){a.prototype.toLocaleString.call([1,2])}))},function(e,t,i){"use strict";var r=i(3).exportTypedArrayMethod,n=i(1),s=i(2).Uint8Array,a=s&&s.prototype||{},o=[].toString,u=[].join;n(function(){o.call({})})&&(o=function(){return u.call(this)}),r("toString",o,a.toString!=o)},function(e,t,i){i(204)("Uint8",function(e){return function(t,i,r){return e(this,t,i,r)}})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var r=i(138),n=i(2),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(r[e])||s(n[e]):r[e]&&r[e][t]||n[e]&&n[e][t]}},function(e,t,i){var r,n=i(11),s=i(136),a=i(96),o=i(80),u=i(188),c=i(125),l=i(84)("IE_PROTO"),h=function(){},f=function(e){return"<script>"+e+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;d=r?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var i=a.length;i--;)delete d.prototype[a[i]];return d()};o[l]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(h.prototype=n(e),i=new h,h.prototype=null,i[l]=e):i=d(),void 0===t?i:s(i,t)}},function(e,t,i){var r=i(19),n=Math.max,s=Math.min;e.exports=function(e,t){var i=r(e);return i<0?n(i+t,0):s(i,t)}},function(e,t,i){var r=i(0),n=i(2),s=i(127),a=[].slice,o=function(e){return function(t,i){var r=arguments.length>2,n=r?a.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,n)}:t,i)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(s)},{setTimeout:o(n.setTimeout),setInterval:o(n.setInterval)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var r=i(11),n=i(179);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),t=i instanceof Array}catch(e){}return function(i,s){return r(i),n(s),t?e.call(i,s):i.__proto__=s,i}}():void 0)},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,i){var r=i(9).f,n=i(7),s=i(4)("toStringTag");e.exports=function(e,t,i){e&&!n(e=i?e:e.prototype,s)&&r(e,s,{configurable:!0,value:t})}},function(e,t,i){var r=i(11),n=i(52),s=i(4)("species");e.exports=function(e,t){var i,a=r(e).constructor;return void 0===a||void 0==(i=r(a)[s])?t:n(i)}},function(e,t,i){"use strict";var r=i(0),n=i(1),s=i(81),a=i(8),o=i(13),u=i(6),c=i(77),l=i(95),h=i(94),f=i(4),d=i(128),p=f("isConcatSpreadable"),v=d>=51||!n(function(){var e=[];return e[p]=!1,e.concat()[0]!==e}),m=h("concat"),g=function(e){if(!a(e))return!1;var t=e[p];return void 0!==t?!!t:s(e)};r({target:"Array",proto:!0,forced:!v||!m},{concat:function(e){var t,i,r,n,s,a=o(this),h=l(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(s=-1===t?a:arguments[t],g(s)){if(f+(n=u(s.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<n;i++,f++)i in s&&c(h,f,s[i])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(h,f++,s)}return h.length=f,h}})},function(e,t,i){"use strict";var r=i(0),n=i(63),s=i(20),a=i(60),o=[].join,u=n!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(e){return o.call(s(this),void 0===e?",":e)}})},function(e,t,i){"use strict";var r=i(1);e.exports=function(e,t){var i=[][e];return!!i&&r(function(){i.call(null,t||function(){throw 1},1)})}},function(e,t,i){var r=i(5),n=i(1),s=i(7),a=Object.defineProperty,o={},u=function(e){throw e};e.exports=function(e,t){if(s(o,e))return o[e];t||(t={});var i=[][e],c=!!s(t,"ACCESSORS")&&t.ACCESSORS,l=s(t,0)?t[0]:u,h=s(t,1)?t[1]:void 0;return o[e]=!!i&&!n(function(){if(c&&!r)return!0;var e={length:-1};c?a(e,1,{enumerable:!0,get:u}):e[1]=1,i.call(e,l,h)})}},function(e,t,i){var r=i(105),n=i(53),s=i(4)("toStringTag"),a="Arguments"==n(function(){return arguments}());e.exports=r?n:function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?i:a?n(t):"Object"==(r=n(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,i){var r=i(1),n=i(53),s="".split;e.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==n(e)?s.call(e,""):Object(e)}:Object},function(e,t){e.exports=!1},function(e,t){e.exports={}},function(e,t,i){var r=i(137),n=i(96).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},function(e,t,i){var r=i(7),n=i(13),s=i(84),a=i(121),o=s("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=n(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,i){var r=i(8);e.exports=function(e,t){if(!r(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!r(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t,i){var r=i(16),n=Date.prototype,s=n.toString,a=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(n,"toString",function(){var e=a.call(this);return e==e?s.call(this):"Invalid Date"})},function(e,t,i){var r=i(5),n=i(9).f,s=Function.prototype,a=s.toString,o=/^\s*function ([^ (]*)/;!r||"name"in s||n(s,"name",{configurable:!0,get:function(){try{return a.call(this).match(o)[1]}catch(e){return""}}})},function(e,t,i){"use strict";var r=i(104).charAt,n=i(21),s=i(123),a=n.set,o=n.getterFor("String Iterator");s(String,"String",function(e){a(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=o(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=r(i,n),t.index+=e.length,{value:e,done:!1})})},function(e,t,i){var r=i(2),n=i(126),s=i(14),a=i(15),o=i(4),u=o("iterator"),c=o("toStringTag"),l=s.values;for(var h in n){var f=r[h],d=f&&f.prototype;if(d){if(d[u]!==l)try{a(d,u,l)}catch(e){d[u]=l}if(d[c]||a(d,c,h),n[h])for(var p in s)if(d[p]!==s[p])try{a(d,p,s[p])}catch(e){d[p]=s[p]}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){this.offset=void 0===e?0:e};t.default=r},function(e,t){e.exports=function(e,t,i){if(!(e instanceof t))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return e}},function(e,t,i){"use strict";var r=i(2),n=i(5),s=i(93),a=i(15),o=i(139),u=i(1),c=i(74),l=i(19),h=i(6),f=i(144),d=i(189),p=i(67),v=i(54),m=i(66).f,g=i(9).f,y=i(116),b=i(56),_=i(21),A=_.get,w=_.set,S=r.ArrayBuffer,k=S,T=r.DataView,C=T&&T.prototype,x=Object.prototype,E=r.RangeError,P=d.pack,B=d.unpack,M=function(e){return[255&e]},I=function(e){return[255&e,e>>8&255]},L=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},F=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},R=function(e){return P(e,23,4)},D=function(e){return P(e,52,8)},O=function(e,t){g(e.prototype,t,{get:function(){return A(this)[t]}})},U=function(e,t,i,r){var n=f(i),s=A(e);if(n+t>s.byteLength)throw E("Wrong index");var a=A(s.buffer).bytes,o=n+s.byteOffset,u=a.slice(o,o+t);return r?u:u.reverse()},V=function(e,t,i,r,n,s){var a=f(i),o=A(e);if(a+t>o.byteLength)throw E("Wrong index");for(var u=A(o.buffer).bytes,c=a+o.byteOffset,l=r(+n),h=0;h<t;h++)u[c+h]=l[s?h:t-h-1]};if(s){if(!u(function(){S(1)})||!u(function(){new S(-1)})||u(function(){return new S,new S(1.5),new S(NaN),"ArrayBuffer"!=S.name})){for(var N,j=(k=function(e){return c(this,k),new S(f(e))}).prototype=S.prototype,H=m(S),z=0;H.length>z;)(N=H[z++])in k||a(k,N,S[N]);j.constructor=k}v&&p(C)!==x&&v(C,x);var W=new T(new k(2)),Y=C.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||o(C,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},{unsafe:!0})}else k=function(e){c(this,k,"ArrayBuffer");var t=f(e);w(this,{bytes:y.call(new Array(t),0),byteLength:t}),n||(this.byteLength=t)},T=function(e,t,i){c(this,T,"DataView"),c(e,k,"DataView");var r=A(e).byteLength,s=l(t);if(s<0||s>r)throw E("Wrong offset");if(s+(i=void 0===i?r-s:h(i))>r)throw E("Wrong length");w(this,{buffer:e,byteLength:i,byteOffset:s}),n||(this.buffer=e,this.byteLength=i,this.byteOffset=s)},n&&(O(k,"byteLength"),O(T,"buffer"),O(T,"byteLength"),O(T,"byteOffset")),o(T.prototype,{getInt8:function(e){return U(this,1,e)[0]<<24>>24},getUint8:function(e){return U(this,1,e)[0]},getInt16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return F(U(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return F(U(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return B(U(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return B(U(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,M,t)},setUint8:function(e,t){V(this,1,e,M,t)},setInt16:function(e,t){V(this,2,e,I,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,I,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,D,t,arguments.length>2?arguments[2]:void 0)}});b(k,"ArrayBuffer"),b(T,"DataView"),e.exports={ArrayBuffer:k,DataView:T}},function(e,t,i){var r=i(20),n=i(6),s=i(50),a=function(e){return function(t,i,a){var o,u=r(t),c=n(u.length),l=s(a,c);if(e&&i!=i){for(;c>l;)if((o=u[l++])!=o)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===i)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,i){"use strict";var r=i(68),n=i(9),s=i(47);e.exports=function(e,t,i){var a=r(t);a in e?n.f(e,a,s(0,i)):e[a]=i}},function(e,t,i){var r=i(52);e.exports=function(e,t,i){if(r(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,r){return e.call(t,i,r)};case 3:return function(i,r,n){return e.call(t,i,r,n)}}return function(){return e.apply(t,arguments)}}},function(e,t,i){var r=i(62),n=i(65),s=i(4)("iterator");e.exports=function(e){if(void 0!=e)return e[s]||e["@@iterator"]||n[r(e)]}},function(e,t){e.exports={}},function(e,t,i){var r=i(53);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,i){var r=i(5),n=i(100),s=i(47),a=i(20),o=i(68),u=i(7),c=i(130),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=o(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return s(!n.f.call(e,t),e[t])}},function(e,t,i){"use strict";var r,n,s=i(101),a=i(140),o=RegExp.prototype.exec,u=String.prototype.replace,c=o,l=(r=/a/,n=/b*/g,o.call(r,"a"),o.call(n,"a"),0!==r.lastIndex||0!==n.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(l||f||h)&&(c=function(e){var t,i,r,n,a=this,c=h&&a.sticky,d=s.call(a),p=a.source,v=0,m=e;return c&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),m=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,v++),i=new RegExp("^(?:"+p+")",d)),f&&(i=new RegExp("^"+p+"$(?!\\s)",d)),l&&(t=a.lastIndex),r=o.call(c?i:a,m),c?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:l&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),f&&r&&r.length>1&&u.call(r[0],i,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)}),r}),e.exports=c},function(e,t,i){var r=i(103),n=i(85),s=r("keys");e.exports=function(e){return s[e]||(s[e]=n(e))}},function(e,t){var i=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++i+r).toString(36)}},function(e,t,i){"use strict";var r=i(0),n=i(76).indexOf,s=i(60),a=i(61),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(e){return u?o.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,i){"use strict";var r=i(0),n=i(50),s=i(19),a=i(6),o=i(13),u=i(95),c=i(77),l=i(94),h=i(61),f=l("splice"),d=h("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min;r({target:"Array",proto:!0,forced:!f||!d},{splice:function(e,t){var i,r,l,h,f,d,m=o(this),g=a(m.length),y=n(e,g),b=arguments.length;if(0===b?i=r=0:1===b?(i=0,r=g-y):(i=b-2,r=v(p(s(t),0),g-y)),g+i-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=u(m,r),h=0;h<r;h++)(f=y+h)in m&&c(l,h,m[f]);if(l.length=r,i<r){for(h=y;h<g-r;h++)d=h+i,(f=h+r)in m?m[d]=m[f]:delete m[d];for(h=g;h>g-r+i;h--)delete m[h-1]}else if(i>r)for(h=g-r;h>y;h--)d=h+i-1,(f=h+r-1)in m?m[d]=m[f]:delete m[d];for(h=0;h<i;h++)m[h+y]=arguments[h+2];return m.length=g-r+i,l}})},function(e,t,i){var r=i(0),n=i(75);r({global:!0,forced:!i(93)},{DataView:n.DataView})},function(e,t,i){i(0)({target:"Function",proto:!0},{bind:i(129)})},function(e,t,i){var r=i(0),n=i(195);r({global:!0,forced:parseInt!=n},{parseInt:n})},function(e,t,i){"use strict";var r=i(16),n=i(11),s=i(1),a=i(101),o=RegExp.prototype,u=o.toString,c=s(function(){return"/a/b"!=u.call({source:"a",flags:"b"})}),l="toString"!=u.name;(c||l)&&r(RegExp.prototype,"toString",function(){var e=n(this),t=String(e.source),i=e.flags;return"/"+t+"/"+String(void 0===i&&e instanceof RegExp&&!("flags"in o)?a.call(e):i)},{unsafe:!0})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=new function(){var e={};this.init=function(t,i){if(i)for(var r in e[t]={},i){var n=document.getElementById(i[r]);n&&(e[t][r]=n)}},this.display=function(t,i,r){if(e[t]){var n=e[t][i];n&&(n.innerHTML=r)}}};t.default=r},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,i){var r=i(1),n=i(4),s=i(128),a=n("species");e.exports=function(e){return s>=51||!r(function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(e,t,i){var r=i(8),n=i(81),s=i(4)("species");e.exports=function(e,t){var i;return n(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!n(i.prototype)?r(i)&&null===(i=i[s])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===t?0:t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,i){var r=i(1);e.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var r=i(137),n=i(96);e.exports=Object.keys||function(e){return r(e,n)}},function(e,t,i){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!r.call({1:2},1);t.f=s?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},function(e,t,i){"use strict";var r=i(11);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,i){var r=i(2),n=i(15);e.exports=function(e,t){try{n(r,e,t)}catch(i){r[e]=t}return t}},function(e,t,i){var r=i(64),n=i(142);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,i){var r=i(19),n=i(55),s=function(e){return function(t,i){var s,a,o=String(n(t)),u=r(i),c=o.length;return u<0||u>=c?e?"":void 0:(s=o.charCodeAt(u))<55296||s>56319||u+1===c||(a=o.charCodeAt(u+1))<56320||a>57343?e?o.charAt(u):s:e?o.slice(u,u+2):a-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},function(e,t,i){var r={};r[i(4)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,i){var r=i(5),n=i(9),s=i(101),a=i(140).UNSUPPORTED_Y;r&&("g"!=/./g.flags||a)&&n.f(RegExp.prototype,"flags",{configurable:!0,get:s})},function(e,t,i){"use strict";var r=i(0),n=i(5),s=i(2),a=i(7),o=i(8),u=i(9).f,c=i(120),l=s.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(h[t]=!0),t};c(f,l);var d=f.prototype=l.prototype;d.constructor=f;var p=d.toString,v="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=p.call(e);if(a(h,e))return"";var i=v?t.slice(7,-1):t.replace(m,"$1");return""===i?void 0:i}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,i){i(124)("iterator")},function(e,t,i){"use strict";var r=i(0),n=i(2),s=i(48),a=i(64),o=i(5),u=i(97),c=i(146),l=i(1),h=i(7),f=i(81),d=i(8),p=i(11),v=i(13),m=i(20),g=i(68),y=i(47),b=i(49),_=i(99),A=i(66),w=i(196),S=i(98),k=i(82),T=i(9),C=i(100),x=i(15),E=i(16),P=i(103),B=i(84),M=i(80),I=i(85),L=i(4),F=i(147),R=i(124),D=i(56),O=i(21),U=i(18).forEach,V=B("hidden"),N=L("toPrimitive"),j=O.set,H=O.getterFor("Symbol"),z=Object.prototype,W=n.Symbol,Y=s("JSON","stringify"),Q=k.f,q=T.f,G=w.f,J=C.f,K=P("symbols"),X=P("op-symbols"),Z=P("string-to-symbol-registry"),$=P("symbol-to-string-registry"),ee=P("wks"),te=n.QObject,ie=!te||!te.prototype||!te.prototype.findChild,re=o&&l(function(){return 7!=b(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a})?function(e,t,i){var r=Q(z,t);r&&delete z[t],q(e,t,i),r&&e!==z&&q(z,t,r)}:q,ne=function(e,t){var i=K[e]=b(W.prototype);return j(i,{type:"Symbol",tag:e,description:t}),o||(i.description=t),i},se=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},ae=function(e,t,i){e===z&&ae(X,t,i),p(e);var r=g(t,!0);return p(i),h(K,r)?(i.enumerable?(h(e,V)&&e[V][r]&&(e[V][r]=!1),i=b(i,{enumerable:y(0,!1)})):(h(e,V)||q(e,V,y(1,{})),e[V][r]=!0),re(e,r,i)):q(e,r,i)},oe=function(e,t){p(e);var i=m(t),r=_(i).concat(he(i));return U(r,function(t){o&&!ue.call(i,t)||ae(e,t,i[t])}),e},ue=function(e){var t=g(e,!0),i=J.call(this,t);return!(this===z&&h(K,t)&&!h(X,t))&&(!(i||!h(this,t)||!h(K,t)||h(this,V)&&this[V][t])||i)},ce=function(e,t){var i=m(e),r=g(t,!0);if(i!==z||!h(K,r)||h(X,r)){var n=Q(i,r);return!n||!h(K,r)||h(i,V)&&i[V][r]||(n.enumerable=!0),n}},le=function(e){var t=G(m(e)),i=[];return U(t,function(e){h(K,e)||h(M,e)||i.push(e)}),i},he=function(e){var t=e===z,i=G(t?X:m(e)),r=[];return U(i,function(e){!h(K,e)||t&&!h(z,e)||r.push(K[e])}),r};u||(E((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=I(e),i=function(e){this===z&&i.call(X,e),h(this,V)&&h(this[V],t)&&(this[V][t]=!1),re(this,t,y(1,e))};return o&&ie&&re(z,t,{configurable:!0,set:i}),ne(t,e)}).prototype,"toString",function(){return H(this).tag}),E(W,"withoutSetter",function(e){return ne(I(e),e)}),C.f=ue,T.f=ae,k.f=ce,A.f=w.f=le,S.f=he,F.f=function(e){return ne(L(e),e)},o&&(q(W.prototype,"description",{configurable:!0,get:function(){return H(this).description}}),a||E(z,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:W}),U(_(ee),function(e){R(e)}),r({target:"Symbol",stat:!0,forced:!u},{for:function(e){var t=String(e);if(h(Z,t))return Z[t];var i=W(t);return Z[t]=i,$[i]=t,i},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(h($,e))return $[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!o},{create:function(e,t){return void 0===t?b(e):oe(b(e),t)},defineProperty:ae,defineProperties:oe,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:le,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:l(function(){S.f(1)})},{getOwnPropertySymbols:function(e){return S.f(v(e))}}),Y&&r({target:"JSON",stat:!0,forced:!u||l(function(){var e=W();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))})},{stringify:function(e,t,i){for(var r,n=[e],s=1;arguments.length>s;)n.push(arguments[s++]);if(r=t,(d(t)||void 0!==e)&&!se(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),n[1]=t,Y.apply(null,n)}}),W.prototype[N]||x(W.prototype,N,W.prototype.valueOf),D(W,"Symbol"),M[V]=!0},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}i(58),i(14),i(22),i(70),i(17),i(107),i(46),i(23),i(24),i(25),i(26),i(28),i(27),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(37),i(36),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),i(72),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(171)),s=r(i(12)),a=function(e){function t(){function t(e,t){switch(e.codecData=t.codecData,e.type){case"video":!function(e,t){var i=t.codec.substring(0,4);switch(i){case"AVC1":case"AVC2":case"HVC1":case"HEV1":e.codec=i;break;default:g.error("Unknown video codec "+t.codec+". Trying to substitute with AVC1"),e.codec="AVC1"}}(e,t);break;case"audio":!function(e,t){switch(t.codec){case"MP4A.40.34":e.codec="MP3",function(e){if(e.codecData){var t=e.codecData;if(255==(255&t[0])&&224==(224&t[1])){var i=t[1]>>3&3;1==i&&(i=0);var r=t[1]>>1&3;if(0!=r){e.sampleDuration=[[0,576,1152,384],[0,0,0,0],[0,576,1152,384],[0,1152,1152,384]][i][r];var n=t[2]>>4&21;e.bitrate=[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,8192,8192,32768],[0,0,0,0],[0,8192,8192,32768],[0,32768,32768,32768]],[[0,16384,16384,49152],[0,0,0,0],[0,16384,16384,49152],[0,40960,49152,65536]],[[0,24576,24576,57344],[0,0,0,0],[0,24576,24576,57344],[0,49152,57344,98304]],[[0,32768,32768,65536],[0,0,0,0],[0,32768,32768,65536],[0,57344,65536,131072]],[[0,40960,40960,81920],[0,0,0,0],[0,40960,40960,81920],[0,65536,81920,163840]],[[0,49152,49152,98304],[0,0,0,0],[0,49152,49152,98304],[0,81920,98304,196608]],[[0,57344,57344,114688],[0,0,0,0],[0,57344,57344,114688],[0,98304,114688,229376]],[[0,65536,65536,131072],[0,0,0,0],[0,65536,65536,131072],[0,114688,131072,262144]],[[0,81920,81920,147456],[0,0,0,0],[0,81920,81920,147456],[0,131072,163840,294912]],[[0,98304,98304,163840],[0,0,0,0],[0,98304,98304,163840],[0,163840,196608,327680]],[[0,114688,114688,180224],[0,0,0,0],[0,114688,114688,180224],[0,196608,229376,360448]],[[0,131072,131072,196608],[0,0,0,0],[0,131072,131072,196608],[0,229376,262144,393216]],[[0,147456,147456,229376],[0,0,0,0],[0,147456,147456,229376],[0,262144,327680,425984]],[[0,163840,163840,262144],[0,0,0,0],[0,163840,163840,262144],[0,327680,393216,458752]],[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]][n][i][r];var s=t[2]>>2&3;e.samplingRate=[[11025,0,22050,44100],[12e3,0,24e3,48e3],[8e3,0,16e3,32e3],[0,0,0,0]][s][i];var a=t[3]>>6&3;e.audioChannels=3==a?1:2;var o=void 0,u=void 0;switch(e.silence=void 0,e.audioChannels){case 2:switch(u=(o=[255,251,null,100,null,143,240,0,0,105,0,0,0,8,0,0,13,32,0,0,1,0,0,1,164,0,0,0,32,0,0,52,128,0,0,4]).length,e.samplingRate){case 48e3:o[2]=148,o[4]=81,u+=348;break;case 44100:o[2]=146,o[4]=64,u+=382;break;case 32e3:o[2]=120,o[4]=57,u+=396;break;default:return void g.error("sampling rate "+e.samplingRate+" is not supported")}break;case 1:switch(u=(o=[255,251,null,196,null,null,192,0,1,164,0,0,0,32,0,0,52,128,0,0,4]).length,e.samplingRate){case 48e3:o[2]=84,o[4]=170,o[5]=3,u+=171;break;case 44100:o[2]=82,o[4]=161,o[5]=131,u+=188;break;case 32e3:o[2]=56,o[4]=158,o[5]=3,u+=195;break;default:return void g.error("sampling rate "+e.samplingRate+" is not supported")}}if(u){e.silence=new Uint8Array(u);var c=0;for(c=0;c<o.length;c++)e.silence[c]=o[c];for(c=o.length;c<u;c++)e.silence[c]=85;g.debug("MP3 track codec data",e.samplingRate,e.sampleDuration,e.audioChannels)}}}}}(e);break;default:e.codec="AAC",function(e){if(e.codecData){var t=[1024,960],i=e.codecData,r=i[0]>>3,n=0;switch(n=31==r?i[1]>>1&15:(7&i[0])<<1|i[1]>>7,e.bitrate=0,15==n?31==r?(e.samplingRate=((1&i[1])<<7|i[2]>>1)<<16|((1&i[2])<<7|i[3]>>1)<<8|(1&i[3])<<7|i[4]>>1,e.audioChannels=(1&i[4])<<3|i[5]>>5,e.sampleDuration=t[(16&i[5])>>4]):(e.samplingRate=((127&i[1])<<1|i[2]>>7)<<16|((127&i[2])<<1|i[3]>>7)<<8|(127&i[3])<<1|i[4]>>7,e.audioChannels=(120&i[4])>>3,e.sampleDuration=t[(4&i[4])>>2]):(e.samplingRate=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][n],31==r?(e.audioChannels=(1&i[1])<<3|i[2]>>5,e.sampleDuration=t[(16&i[2])>>4]):(e.audioChannels=(120&i[1])>>3,e.sampleDuration=t[(4&i[1])>>2])),e.audioChannels){case 8:e.silence=new Uint8Array([1,24,32,1,8,128,35,4,96,35,16,4,96,140,4,162,0,140,17,129,132,96,0,28]);break;case 6:e.silence=new Uint8Array([1,24,32,1,8,128,35,4,96,35,16,4,96,140,12,35,0,0,224]);break;case 5:e.silence=new Uint8Array([1,24,32,1,8,128,35,4,96,35,16,4,96,140,28]);break;case 4:e.silence=new Uint8Array([1,24,32,1,8,128,35,4,96,3,24,32,7]);break;case 3:e.silence=new Uint8Array([1,24,32,1,8,128,35,4,96,224]);break;case 2:e.silence=new Uint8Array([33,16,4,96,140,28]);break;default:e.silence=new Uint8Array([1,24,32,7])}g.debug("AAC track codec data, AOT: "+r+" sRate: "+e.samplingRate+" sPerFrame: "+e.sampleDuration+" chCount: "+e.audioChannels)}}(e)}e.tsSampleDuration=e.sampleDuration/e.samplingRate*e.timescale}(e,t)}}function i(e,t,i){var r=i.prevAltTs+t.sampleDuration,n=i.nextAltTs-r;if(n>=2*t.sampleDuration){for(var s=Math.floor(n/t.sampleDuration)-1,a=1;a<=s;a++){var o={data:i.data,ts:i.prevTs+Math.floor(a*t.tsSampleDuration),altTs:r,altDur:t.sampleDuration,offset:0,sap:!0};e.push(o),r+=t.sampleDuration}g.warn("adding dummy frames",e.length,i.nextAltTs)}return r}function r(e,t,r,n,s){var a=[],o=e.lastSample,u=n,c=!1,l=n-o.rawts;if(l<0||l>10*e.timescale?(g.debug("Incorrect DTS difference (".concat(l,") between previous (ts: ").concat(o.rawts,", offset: ").concat(o.offset,", sap: ").concat(o.sap,") and current frame (ts: ").concat(n,", offset: ").concat(s,", sap: ").concat(t,")")),l=e.lastSampleDuration):0==l&&(e.isAudio||o.offset!=s||(g.debug("Keep zero duration sample"),c=!0)),n=o.ts+l,e.isAudio&&null!==r&&e.lastSilenceSampleTs&&n<=e.lastSilenceSampleTs)return g.debug("Ignore real frames after mute",n,e.lastSilenceSampleTs),[];l>0&&(e.lastSampleDuration=l),o.duration=l,e.isAudio&&e.alignBase&&(e.prevSample&&(i(a,e,{prevTs:e.prevSample.ts,prevAltTs:e.prevSample.altTs,nextAltTs:o.altTs,data:e.silence?e.silence:o.data}),e.prevSample=void 0),e.alignBase=void 0),a.push(o);var h=0;e.isAudio&&(h=i(a,e,{prevTs:o.ts,prevAltTs:o.altTs,nextAltTs:Math.round(e.samplingRate/e.timescale*n),data:e.silence?e.silence:o.data}),o.altDur=e.sampleDuration);var f=r;if(null===f&&e.isAudio&&(f=e.silence,e.lastSilenceSampleTs=n),e.lastSample={data:f,ts:n,rawts:u,altTs:h,offset:s,sap:t},c||_.length>0){for(var d=0;d<a.length;d++)_.push(a[d]);c?a=[]:(a=_,_=[])}return a}function a(e){for(var t=void 0,i=0;i<y.length;i++)if(y[i].id==e){t=y[i];break}return void 0===t&&g.error("track ID "+e+" is not found!"),t}function o(e,t){var i=n.default.createFullBox("tkhd",t);switch(i.flags=7,i.creation_time=0,i.modification_time=0,i.track_ID=e.id,i.reserved1=0,i.duration=0,i.reserved2=[0,0],i.layer=0,i.alternate_group=0,i.reserved3=0,i.matrix=[1,0,0,0,1,0,0,0,16384],e.type){case"video":i.volume=0,i.width=e.width,i.height=e.height,i.flags|=8;break;case"audio":i.volume=1,i.width=0,i.height=0}return i}function u(e){return e.isAudio?e.samplingRate:e.timescale}function c(e,t){var i=n.default.createFullBox("mdhd",t);return i.creation_time=0,i.modification_time=0,i.duration=0,i.language="und",i.pre_defined=0,i.timescale=u(e),i}function l(e,t){var i=n.default.createFullBox("hdlr",t);switch(i.pre_defined=0,e.type){case"video":i.handler_type="vide",i.name="VideoHandler";break;case"audio":i.handler_type="soun",i.name="AudioHandler"}return i.reserved=[0,0,0],i}function h(e){var t=n.default.createFullBox("vmhd",e);return t.flags=1,t.graphicsmode=0,t.opcolor=[0,0,0],t}function f(e){var t=n.default.createFullBox("smhd",e);return t.balance=0,t.reserved=0,t}function d(e){var t=n.default.createFullBox("dref",e);t.entry_count=1,t.entries=[];var i=n.default.createFullBox("url ",t,-1);return i.location="",i.flags=1,t.entries.push(i),t}function p(e,t){var i=n.default.createFullBox("trex",t);return i.track_ID=e.id,i.default_sample_description_index=1,i.default_sample_duration=0,i.default_sample_size=0,i.default_sample_flags=e.isAudio?0:65536,i}function v(e,t){var i=n.default.createFullBox("stsd",t);return i.entry_count=1,i.entries=[],i.entries.push(function(e,t){switch(e.codec){case"AVC1":case"AVC2":return e.seBox=e.codec.toLowerCase(),e.configName="avcC",e.compressorname="AVC Coding",m(e,t);case"HVC1":case"HEV1":return e.seBox=e.codec.toLowerCase(),e.configName="hvcC",e.compressorname="SHVC Coding",m(e,t);case"AAC":return function(e,t){var i=n.default.createBox("mp4a",t,-1);return i.reserved1=[0,0,0,0,0,0],i.data_reference_index=1,i.reserved2=[0,0],i.channelcount=e.audioChannels,i.samplesize=16,i.pre_defined=0,i.reserved_3=0,i.samplerate=e.samplingRate<<16,i.esds="AAC"==e.codec?function(e){var t=37+e.codecData.byteLength,i=new Uint8Array(t),r=0;return i[r++]=(4278190080&t)>>24,i[r++]=(16711680&t)>>16,i[r++]=(65280&t)>>8,i[r++]=255&t,i.set([101,115,100,115],r),r+=4,i.set([0,0,0,0],r),r+=4,i[r++]=3,i[r++]=23+e.codecData.byteLength,i[r++]=(65280&e.id)>>8,i[r++]=255&e.id,i[r++]=0,i[r++]=4,i[r++]=15+e.codecData.byteLength,i[r++]=64,i[r]=20,i[r]|=0,i[r++]|=1,i[r++]=255,i[r++]=255,i[r++]=255,i.set([0,0,0,0,0,0,0,0],r),r+=8,i[r++]=5,i[r++]=e.codecData.byteLength,i.set(e.codecData,r),r+=e.codecData.byteLength,i[r++]=6,i[r++]=1,i[r]=2,i}(e):function(e){var t=new Uint8Array(35),i=0;return t[i++]=0,t[i++]=0,t[i++]=0,t[i++]=35,t.set([101,115,100,115],i),i+=4,t.set([0,0,0,0],i),i+=4,t[i++]=3,t[i++]=21,t[i++]=(65280&e.id)>>8,t[i++]=255&e.id,t[i++]=0,t[i++]=4,t[i++]=13,t[i++]=107,t[i]=20,t[i]|=0,t[i++]|=1,t[i++]=255,t[i++]=255,t[i++]=255,t[i++]=(4278190080&e.bitrate)>>24,t[i++]=(16711680&e.bitrate)>>16,t[i++]=(65280&e.bitrate)>>8,t[i++]=255&e.bitrate,t[i++]=(4278190080&e.bitrate)>>24,t[i++]=(16711680&e.bitrate)>>16,t[i++]=(65280&e.bitrate)>>8,t[i++]=255&e.bitrate,t[i++]=6,t[i++]=1,t[i]=2,t}(e),i}(e,t);case"MP3":return function(e,t){var i=n.default.createBox(".mp3",t,-1);i.reserved1=[0,0,0,0,0,0],i.data_reference_index=1,i.reserved2=[0,0],i.channelcount=e.audioChannels,i.samplesize=16,i.pre_defined=0,i.reserved_3=0,i.samplerate=e.samplingRate<<16,i.entry_count=1,i.entries=[];var r=n.default.createBox("btrt",i,-1);return r.bufferSizeDB=4294967295,r.maxBitrate=e.bitrate,r.avgBitrate=e.bitrate,i.entries.push(r),i}(e,t);default:g.error("Unsupported codec: ",e.codec)}}(e,i)),i}function m(e,t){var i=n.default.createBox(e.seBox,t,-1);i.reserved1=[0,0,0,0,0,0],i.data_reference_index=1,i.pre_defined1=0,i.reserved2=0,i.pre_defined2=[0,0,0],i.width=e.width,i.height=e.height,i.horizresolution=72,i.vertresolution=72,i.reserved3=0,i.frame_count=1,i.compressorname=[e.compressorname.length];for(var r=0;r<31;r++)i.compressorname[r+1]=r<e.compressorname.length?127&e.compressorname.charCodeAt(r):0;return i.depth=24,i.pre_defined3=65535,i.config=function(e){if(e.codecData){var t=e.codecData.byteLength+8,i=new Uint8Array(t),r=0;i[r++]=(4278190080&t)>>24,i[r++]=(16711680&t)>>16,i[r++]=(65280&t)>>8,i[r++]=255&t;for(var n=0;n<e.configName.length;n++)i[r++]=127&e.configName.charCodeAt(n);return i.set(e.codecData,r),i}g.error("No codec data specified!")}(e),i}var g=s.default.create(e,"BoxComposer"),y=[],b=1,_=[];this.init=function(){y=[],b=1,_=[]},this.addTrack=function(e,i){var r={id:b,type:e,isAudio:"audio"==e,curSeqNumber:0,lastSampleDuration:0,lastSilenceSampleTs:0};return g.setPrefix("BoxComposer "+e),i&&("video"==e&&(r.width="width"in i?i.width:0,r.height="height"in i?i.height:0),r.timescale="timescale"in i?i.timescale:1e3,"codec"in i&&(i.codec=i.codec.toUpperCase()),"codecData"in i&&t(r,i)),y.push(r),b++,r},this.setTrackParams=function(e,i){var r=a(e);return r&&("codec"in i&&(i.codec=i.codec.toUpperCase()),"width"in i&&(r.width=i.width),"height"in i&&(r.height=i.height),"timescale"in i&&(r.timescale=i.timescale),"codecData"in i&&(_=[],r.lastSample=void 0,t(r,i)),"sequenceNumber"in i&&(r.curSeqNumber=i.sequenceNumber),"alignBase"in i&&(r.alignBase=i.alignBase),g.debug("setTrackParams:",e,i)),r},this.getTrackSampleDuration=function(e,t){var i,r=a(e);return r&&(i=r.tsSampleDuration),i},this.getTrackChannelCount=function(e){var t,i=a(e);return i&&(t=i.audioChannels),t},this.setBaseSample=function(e,t,i,r){var n=a(e);if(n){g.debug("setBaseSample: ",i,r);var s=t;n.isAudio&&(n.lastSilenceSampleTs=0,null===s&&(s=n.silence,n.lastSilenceSampleTs=i)),n.lastSample={data:s,ts:i,rawts:i,altTs:Math.round(n.samplingRate/n.timescale*i),offset:r,sap:!0,altDur:n.sampleDuration}}else g.error("setBaseSample: track "+e+" not found!!!")},this.getRealTs=function(e,t){var i=t,r=a(e);return r?r.lastSample&&Math.abs(t-r.lastSample.ts)>10*r.timescale&&(i=t-r.lastSample.rawts+r.lastSample.ts):g.error("getRealTs: track ".concat(e," not found")),i},this.initSegment=function(){var e=n.default.createFile();return function(e){var t=n.default.createBox("ftyp",e);t.major_brand="isom",t.minor_version=1,t.compatible_brands=[],t.compatible_brands[0]="isom",t.compatible_brands[1]="avc1",t.compatible_brands[2]="dash"}(e),function(e){var t=n.default.createBox("moov",e);!function(e){var t=n.default.createFullBox("mvhd",e);t.creation_time=0,t.modification_time=0,t.timescale=1e3,t.duration=0,t.rate=1,t.volume=1,t.reserved1=0,t.reserved2=[0,0],t.matrix=[1,0,0,0,1,0,0,0,16384],t.pre_defined=[0,0,0,0,0,0],t.next_track_ID=b}(t);var i=n.default.createBox("mvex",t);!function(e){n.default.createFullBox("mehd",e).fragment_duration=0}(i);for(var r=0;r<y.length;r++){var s=y[r],a=n.default.createBox("trak",t);o(s,a);var u=n.default.createBox("mdia",a);c(s,u),l(s,u);var m=n.default.createBox("minf",u);switch(s.type){case"video":h(m);break;case"audio":f(m)}d(n.default.createBox("dinf",m));var g=n.default.createBox("stbl",m);n.default.createFullBox("stts",g)._data=[0,0,0,0,0,0,0,0];n.default.createFullBox("ctts",g)._data=[0,0,0,0,0,0,0,0];n.default.createFullBox("stsc",g)._data=[0,0,0,0,0,0,0,0];n.default.createFullBox("stco",g)._data=[0,0,0,0,0,0,0,0];n.default.createFullBox("stsz",g)._data=[0,0,0,0,0,0,0,0,0,0,0,0],v(s,g),p(s,i)}}(e),e.write()},this.mediaSegment=function(e,t,i){var s=void 0,o=n.default.createFile(),c=a(e),l=[],h=[];if(c){!function(e){var t=n.default.createBox("styp",e);t.major_brand="msdh",t.minor_version=0,t.compatible_brands=[],t.compatible_brands[0]="msdh",t.compatible_brands[1]="msix"}(o);var f=0,d=[];for(f=0;f<t.length;f++){var p=t[f];if(c.lastSample)for(var v=r(c,p.sap,p.data,p.ts,p.offset),m=0;m<v.length;m++)d.push(v[m]),l.push(v[m].ts),h.push(v[m].sap);else g.error("mediaSegment is executed while no base sample is set. Compelled setting of base sample: ",p.sap,p.ts,p.offset),p.sap&&this.setBaseSample(e,p.data,p.ts,p.offset)}if(i&&void 0!==c.lastSample){for(var y=0;y<_.length;y++)d.push(_[y]),l.push(_[y].ts),h.push(_[y].sap);_=[],c.lastSample.duration=c.lastSampleDuration,d.push(c.lastSample),g.debug("Push last sample, ts = ".concat(c.lastSample.ts,", duration = ").concat(c.lastSample.duration)),l.push(c.lastSample.ts),h.push(c.lastSample.sap),c.alignBase&&(c.prevSample={ts:c.lastSample.ts,altTs:c.lastSample.altTs}),c.lastSample=void 0}if(d.length>0){var b=function(e,t,i){var r=n.default.createBox("sidx",e);r.flags=0,r.version=1,r.reference_ID=t.id,r.timescale=u(t),r.first_offset=0,r.reserved=0,r.earliest_presentation_time=t.isAudio?i[0].altTs:i[0].ts+i[0].offset,r.reference_count=1;for(var s=!1,a=0,o=0,c=0,l=0,h=0;h<i.length;h++)a+=i[h].data.byteLength,!s&&i[h].sap&&(s=!0,l=o),o+=i[h].duration,c+=i[h].altDur;return r.references=[{reference_type:0,referenced_size:a,subsegment_duration:t.isAudio?c:o,starts_with_SAP:i[0].sap?1:0,SAP_type:s?1:0,SAP_delta_time:l}],r}(o,c,d),A=function(e,t,i){var r=n.default.createBox("moof",e);n.default.createFullBox("mfhd",r).sequence_number=t.curSeqNumber++;var s=n.default.createBox("traf",r),a=n.default.createFullBox("tfhd",s);a.track_ID=t.id,a.flags=131072;var o=n.default.createFullBox("tfdt",s,a);o.version=1,o.flags=0;var u=n.default.createFullBox("trun",s,o);if(u.sample_count=i.length,u.samples=[],t.isAudio){o.baseMediaDecodeTime=i[0].altTs,u.flags=769;for(var c=0;c<i.length;c++)u.samples.push({sample_duration:i[c].altDur,sample_size:i[c].data.byteLength})}else{o.baseMediaDecodeTime=i[0].ts,u.flags=2821,u.first_sample_flags=0;for(var l=0;l<i.length;l++)u.samples.push({sample_duration:i[l].duration,sample_size:i[l].data.byteLength,sample_composition_time_offset:i[l].offset})}return u.data_offset=r.getLength()+8,r}(o,c,d);n.default.createBox("mdat",o).data=function(e,t){var i=void 0;if(e.length>1){i=new Uint8Array(t);for(var r=0,n=0;n<e.length;n++)i.set(e[n].data,r),r+=e[n].data.length}else i=e[0].data;return i}(d,b.references[0].referenced_size),b.references[0].referenced_size+=8+A.getLength(),s={ts:l,sap:h,sn:c?c.curSeqNumber-1:void 0,data:o.write()}}}return s}}return{create:function(){return new t}}};t.default=a},function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=(n=i(12))&&n.__esModule?n:{default:n},a=function(e){var t=s.default.create(e,"RingBuffer"),i=function(){function e(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i<=0&&t.error("invalid size in constructor "+i),this.buffer=[],this.size=i,this.start=0}var i,n;return i=e,(n=[{key:"push",value:function(e){this.buffer.length==this.size?(this.buffer[this.start++]=e,this.start==this.size&&(this.start=0)):this.buffer.push(e)}},{key:"get",value:function(e){var i=void 0;if(e>=0&&e<this.buffer.length){var r=this.start+e;r>=this.buffer.length&&(r-=this.buffer.length),i=this.buffer[r]}else if(e<0&&-1*e<=this.buffer.length){var n=this.start+e;n<0&&(n+=this.buffer.length),i=this.buffer[n]}else t.error("attempt to read from invalid index "+e);return i}},{key:"join",value:function(e){var t="";this.buffer.length>0&&(t+=this.buffer[this.start]);for(var i=1;i<this.buffer.length;i++){var r=this.start+i;r>=this.buffer.length&&(r-=this.buffer.length),t+=e+this.buffer[r]}return t}},{key:"clear",value:function(){this.buffer=[],this.start=0}},{key:"drop",value:function(){this.buffer=[],this.size=0,this.start=0}},{key:"length",value:function(){return this.buffer.length}}])&&r(i.prototype,n),e}();return{create:function(e){return new i(e)}}};t.default=a},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}i(58),i(208),i(14),i(148),i(87),i(22),i(69),i(70),i(149),i(17),i(90),i(91),i(46),i(23),i(24),i(25),i(26),i(28),i(27),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(37),i(36),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),i(219),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,s,l,h,f,d,p,v){function m(e){e.data&&(ae=e.data,B.setTrackParams(E,{codec:s,codecData:e.data}),M.pushInit(B.initSegment()))}function g(e,t){var i=!1;if("mp4"==P)if(t)if(i=!0,e){var r=t.byteLength;if(r==e.byteLength){i=!1;for(var n=0;n<r;n++)if(t[n]!==e[n]){i=!0;break}}}else C.debug("isInitSegmentNew: current init segment data is empty"),i=!0;else C.error("isInitSegmentNew: received empty codecData");return i}function y(){return V+1}function b(){for(var e=0;e<O.length;e++){var t=O[e];k(t.sap,t.data,t.ts,t.offset)}O=[],U=[],H=!1}function _(e,t){C.debug("flush all",e);var i=0,r=[];for(i=0;i<$.length;i++)(void 0===e||$[i].ts<e)&&r.push($[i]);for($=[],i=0;i<O.length;i++)(void 0===e||O[i].ts<e)&&r.push(O[i]);if(O=[],U=[],j){var n=r.length;for(i=0;i<n;i++)A(r[i],e);t||A(null,e)}M.filterOut(e)}function A(e,t){var i,r,n,s=e?B.mediaSegment(E,[e]):B.mediaSegment(E,[],!0);s&&(void 0==t||s.ts[0]<t)&&(M.pushSegment(s.data,s.ts,s.sap),i=s.ts[0],r=s.sn,n=s.sap[0],Y=i,J=r,n&&(q=i))}function w(e){O.length>=2&&void 0!==ie&&void 0!==E&&(I=u.BUFFER,ie(e,O[0].ts/l),C.debug("process open state, base ts=".concat(O[0].ts)))}function S(e){var t=(e-Y)/l,i=Math.min(V/l,.0715);return[t>0&&t<=i,t,i]}function k(e,t,i,r){if(j)!function(e,t,i,r){var n=void 0;if(Z){if(T($,t,i,r,e),$[$.length-1].ts-$[0].ts>=D*l/1e3){var s=$.splice(0,1);n={data:s[0].data,ts:s[0].ts,offset:s[0].offset,sap:s[0].sap}}}else n={data:t,ts:i,offset:r,sap:e};Q=i,n&&A(n)}(e,t,i,r);else if(e){if(se&&u.CLOSED!==I){var n={codec:s};ae&&(n.codecData=ae),B.setTrackParams(E,n),M.pushInit(B.initSegment(),S(i)[0]),se=!1}!function(e,t,i){B.setBaseSample(E,e,t,i),C.debug("process first frame",Y,Q,t),Y=void 0,q=void 0,Q=t,j=!0}(t,i,r)}}function T(e,t,i,r,n){e.push({data:t,ts:i,offset:r,sap:n})}var C=a.default.create(e,"Track "+n),x=t%parseInt("F0",16),E=void 0,P="vp8"==s||"vp9"==s?"webm":"mp4",B="webm"==P?r.create():i.create(),M=void 0,I=u.OPEN,L=d.buffering,F=L*l/1e3,R=L>=1e3?.2:L/5e3,D=d.buffering,O=[],U=[],V=void 0,N=void 0,j=!1,H=!1,z=0,W=!!d.sapAlignment,Y=void 0,Q=void 0,q=void 0,G=void 0,J=void 0,K=!1,X={},Z=!1,$=[],ee=void 0,te=void 0,ie=void 0,re=void 0,ne=void 0,se=!1,ae=void 0;v.add(x,n,l),p.setLowBufferBorder(R),this.attachToMSE=function(){(M=p.createSourceBuffer(n,s,l,h)).removeAll()},this.id=function(){return x},this.timescale=function(){return l},this.getBufferedStart=function(){var e=void 0;return O.length>0&&(e=O[0].ts),e},this.getChannelCount=function(){return B.getTrackChannelCount(E)},this.inTransition=function(e){return void 0!==e&&(K=e,X={}),K},this.setTransitionParams=function(e){(X=e).container="vp8"==X.codec||"vp9"==X.codec?"webm":"mp4"},this.isTransitionSupported=function(){var e=!1;return X&&X.container==P&&(e=p.isCodecSupported(n,X.codec)),e||C.error("transition is not supported: ",s),e},this.startTransition=function(e){X.mode=void 0!==e?e:c.SMOOTH,X.initSegment=void 0,X.startupBuffer=[],X.initDataBuffer=[],X.curStreamCancelled=!1,X.newSapTimes=[],X.curSapTimes=[],Z=!0,v.add(X.id,n,l),p.transitOn(),C.debug("transit started",X.id)},this.getStreamName=function(){return f},this.getTransitionStreamName=function(){return X.name},this.transitionStreamId=function(){return X.id},this.type=function(){return n},this.latency=function(e){var t=void 0,i=v.getMetrics(x);if(i){t=performance.now()/1e3-e-i.latencySubt}return t},this.isVideo=function(){return"video"==n},this.isAudio=function(){return"audio"==n},this.isActual=function(){return u.CLOSED!=I},this.isInited=function(){return void 0!==E},this.isTransitionInited=function(){return void 0!==X.cTrackId},this.isOpen=function(){return u.OPEN==I},this.isBuffering=function(){return u.BUFFER==I},this.isBackingUp=function(){return u.BACKUP==I},this.sapOffset=function(){var e=4e3*(Q-q)/l;return isNaN(e)?0:e},this.reset=function(){var e;C.debug("reset "+f),I=u.OPEN,M.removeAll(),B.init(),E=void 0,O=[],U=[],$=[],V=void 0,j=!1,H=!1,N=void 0,K=void 0,z=0,v.remove(x),Z&&(x=X.id,d=X.streamOptions,f=X.name),v.add(x,n,l),Z=!1,X={},ee=void 0,Y=void 0,Q=void 0,q=void 0,G=void 0,e=d.buffering?d.buffering:1e3,D=L=e,se=!1,ae=void 0},this.close=function(){I=u.CLOSED,M.closed=!0,B=void 0,O=[],U=[],v.remove(x),void 0!==X.id&&v.remove(X.id)},this.backup=function(){var e=void 0;return M.closed=!0,this.isTransitionInited()?(C.debug("backup track, transition is inited"),X.curStreamCancelled||(re(this),X.curStreamCancelled=!0),ee={bufferLength:M.getBufferingLength()},this.completeTransition(),O.length>0&&(e=O[0].ts/l)):(ee=M.getSegments(),C.debug("backup track",ee.segments.length,ee.start),ee.init&&ee.segments&&ee.segments.length>ee.start&&(I=u.BACKUP,e=ee.segments[ee.start].ts/l,ie(this,e))),e},this.recover=function(){if(ee)if(I=u.ACTIVE,ee.init){C.debug("recover track");var e=0,t=0,i=ee.segments.length;for(e=ee.start;e<i;e++)if(ee.segments[e].init)ee.init=ee.segments[e].data;else{if(!(ee.segments[e].ts<=N))break;ee.segments[e].sap&&(t=e)}for(M.pushInit(ee.init),e=t;e<i;e++){var r=ee.segments[e];r.init?M.pushInit(r.data):M.pushSegment(r.data,[r.ts],[r.sap])}(i-t-1>0||O.length>0)&&(C.debug("recover sapSet = true",i,t,O.length),j=!0),_(void 0,!0)}else void 0!==ee.bufferLength&&(C.debug("recover track from transition"),p.transitOn(),M.setBufferingLength(ee.bufferLength),this.applyTransition(!0))},this.populateInitDataBuffer=function(e){U.push({idx:O.length,data:e}),C.debug("Recover populateInitDataBuffer",e.byteLength)},this.populateStartupBuffer=function(e,t,i,r){T(O,t,i,r,e),Q=i,C.debug("Recover populateStartupBuffer",e,t.byteLength,i,r)},this.isRecoverable=function(){return ee&&(void 0!==ee.init||void 0!==ee.bufferLength)},this.flush=function(){_()},this.buffer=function(){I=u.BUFFER,C.debug("buffering...")},this.setBufferDelay=function(){H=!0},this.activate=function(){u.BUFFER===I&&(b(),I=u.ACTIVE,te())},this.bufferStatus=function(t){var i={lvl:void 0,low:!1};if(u.ACTIVE==I){if(i.lvl=0,Q){var r=B.getRealTs(E,Q);i.lvl=r/l-t}p.setCurrentBufferLevel(n,i.lvl),o.default.display(e,n+"-buffer",i.lvl.toFixed(4)),se||(i.lvl<R&&(C.debug("bufferStatus low buffer ",t,Q),v.reportLowBuffer(x),i.low=!0),v.reportBufLevel(x,i.lvl),i.lvl<0&&(i.lvl=0))}return i},this.updateBufferedState=function(t,i){if(u.BUFFER==I){var r=0,s=0;if(G){var a=B.getRealTs(E,G)/l;r=a-i,s=a-t}p.setCurrentBufferLevel(n,r),o.default.display(e,n+"-buffer",r.toFixed(4)),C.debug("updateBufferedState: buf lvl "+s+", real buf lvl "+r),se||H||(s<R&&(C.debug("updateBufferedState: low buffer"),v.reportLowBuffer(x)),v.reportBufLevel(x,s))}},this.setBaseDecodeTime=function(e){N=Math.round(e*l)},this.onBaseDecodeTimeReady=function(e){ie=e},this.onSourceReady=function(e){te=e},this.onCancelStream=function(e){re=e},this.onTransitionCompleted=function(e){ne=e},this.initPresentation=function(e){var t={timescale:l};"mp4"==P&&(t.codecData=e,ae=e),t.codec=s,"video"==n&&(t.width=d.width,t.height=d.height),E=B.addTrack(n,t).id,M.pushInit(B.initSegment()),C.debug("init segment pushed, codec = ".concat(t.codec,", timescale = ").concat(t.timescale))},this.isInitSegmentNew=function(e){return"audio"==n||g(ae,e)},this.isTransitionInitNew=function(e){return"audio"==n||g(X.initSegmentData,e)},this.processInitSegment=function(e){"audio"==n&&B.setTrackParams(E,{alignBase:!0}),_(),j=!1,se=!0,ae="mp4"==P?e:void 0,C.debug("new init segment processed")},this.initTransition=function(e){var t={timescale:l};t.codec=X.codec,"webm"==X.container?X.composer=r.create():(X.composer=i.create(),X.initSegmentData=e,t.codecData=e),"video"==n&&(t.width=X.streamOptions.width,t.height=X.streamOptions.height),X.cTrackId=X.composer.addTrack(n,t).id,X.initSegment=X.composer.initSegment(),X.initDataBuffer=[],C.debug("transit stream init segment pushed")},this.processTransitionInitSegment=function(e){X.initDataBuffer.push({idx:X.startupBuffer.length,data:e})},this.processMute=function(e,t){if(void 0!==E){var i=void 0;switch(I){case u.OPEN:case u.BUFFER:i=0==O.length?void 0!==(i=t.getBufferedStart())?l/t.timescale()*i:void 0!==Q?Q:l/t.timescale()*e-F:O[O.length-1].ts;break;case u.ACTIVE:i=Q;break;default:C.error("processMute unexpected track state",I)}if(void 0!==i){var r=l/t.timescale()*e,n=r-i;if(n>=F/2){n>2*F&&(r=i+(n=2*F)),r-=F/10;var s=B.getTrackSampleDuration(E),a=i+s;for(C.debug("processMute filling gap",i,r);a<=r;)this.processFrame(!0,null,Math.floor(a),0),a+=s}}}},this.processFrame=function(e,t,i,r){var n={done:!0};if(G=i,Z){if(X.curStreamCancelled)return n;if(C.debug("processFrame transition, current frame ts=".concat(i,", offset=").concat(r,", sap=").concat(e)),e&&X.curSapTimes.push(i),X.curStreamLastBufferedTs=i,function(e,t){var i=!1,r=X.newSapTimes.length;if(c.ABRUPT==X.mode)i=!0;else if(r>0)if(W)t&&(e>=X.newSapTimes[0]||e>=X.newSapTimes[r-1])&&(i=!0);else if(e>=X.newSapTimes[0]+D*l/1e3*2)C.debug("Cancel current stream, because current timestamp is twice ahead possible buffer of new stream",e,X.newSapTimes[0]),i=!0;else for(var n=X.newSapTimes.length-1;n>=0;n--){if(Math.abs(e-X.newSapTimes[n])<y()){C.debug("Cancel current stream. Timestamp "+e+" is near new stream key frame "+X.newSapTimes[n]),i=!0;break}if(e>X.newSapTimes[n])break}return i}(i,e))return C.debug("processFrame cancel current rendition",X.curStreamLastBufferedTs,e),re(this),X.curStreamCancelled=!0,T(O,t,i,r,e),n}switch(I){case u.OPEN:(O.length>0||e)&&(T(O,t,i,r,e),w(this));break;case u.BUFFER:var s=!1;T(O,t,i,r,e);var a=O.length;if(void 0===V){if(void 0!==N&&a>3){var o=O[a-1],h=o.ts-N-F;if(h>=0){C.debug("finished buffering, have "+a+" samples"),function(){V=0;var e=0,t={};for(e=1;e<O.length;e++){var i=O[e].ts-O[e-1].ts;t[i]=t[i]>0?t[i]+1:1}for(e in t)if(t[e]>0){var r=parseInt(e);r>0&&(V=r)}C.debug("max sample duration calculated: ",V)}(),p.startLogging(M.stream_id),M.setBufferingLength(a),j=!1;for(var f=0,d=0;d<a&&O[d].ts<=N;d++)O[d].sap&&(f=d);C.debug("base decode time:",N),C.debug("1 ts last ts",O[0].ts,O[0].sap,O[a-1].ts),C.debug("buffer size: "+a+" first sap: "+f);var v=void 0,g=0;for(g=0;g<U.length&&U[g].idx<=f;g++)v=U.shift(),g--;for(v&&m(v),g=f;g<O.length;g++){U.length>0&&g==U[0].idx&&m(U.shift());var _=O[g];k(_.sap,_.data,_.ts,_.offset)}U.length>0&&m(U[0]),O=[],U=[],s=!0}else-1*h>10*F&&(C.error("sample is far away from expected",o.ts,N+F),n.done=!1,z++)}}else{var A=O[a-1].ts-O[0].ts;A>0?s=A>=F:A<0&&(s=a>=F/V+1),s&&b()}s&&u.CLOSED!==I&&(I=u.ACTIVE,te(),C.debug("playback"));break;case u.ACTIVE:k(e,t,i,r)}return n.done?z=0:n.errors=z,n},this.processTransitionFrame=function(e,t,i,r){var n={done:!0};if(e)X.newSapTimes.push(i);else if(0==X.newSapTimes.length)return C.debug("processTransition: throwing useless frame",i,r),n;C.debug("processTransition: new rendition frame ts=".concat(i,", offset=").concat(r,", sap=").concat(e));var s=X.startupBuffer.length;if(s>0){void 0==X.lastSampleDuration&&(X.lastSampleDuration=void 0!==V?V:0);var a=X.startupBuffer[s-1],o=i-a.ts;o<0?r>=-1*o?(r+=o,o=0):o=X.lastSampleDuration:o>2*l&&(o=X.lastSampleDuration),i=a.ts+o,X.lastSampleDuration=o}if(T(X.startupBuffer,t,i,r,e),function(e,t){var i=!1,r=D*l/1e3,n=X.curSapTimes.length,s=X.newSapTimes.length,a=e-X.startupBuffer[0].ts;if(W&&c.ABRUPT!=X.mode){if(n>0&&a>=r)for(var o=0,u=0;u<n;u++)if(!(X.curSapTimes[u]<X.newSapTimes[o])){for(var h=o;h<s&&(o=h,!(X.newSapTimes[h]>X.curSapTimes[u]));h++)X.newSapTimes[h]==X.curSapTimes[u]&&(C.debug("Switch to new stream because of SAP alignment"),i=!0);if(i)break}!i&&n>=1&&s>=2&&(X.newSapTimes[s-1]>X.curSapTimes[0]||X.newSapTimes[s-1]>=X.curSapTimes[n-1])&&(C.debug("Switch to new stream SAP alignment does not work!"),i=!0)}else if(a>=2*r&&e>=X.curStreamLastBufferedTs)C.debug("Switch to new stream because transition buffer is twice filled"),i=!0;else if(a>=r)if(X.curStreamCancelled&&e>=X.curStreamLastBufferedTs)C.debug("Switch to new stream because buffer is filled and current stream is cancelled"),i=!0;else{for(var f=X.newSapTimes.length-1;f>=0;f--){if(Math.abs(X.curStreamLastBufferedTs-X.newSapTimes[f])<y()){C.debug("Switch to new stream, because new key frame "+X.newSapTimes[f]+" is near to current latest timestamp "+X.curStreamLastBufferedTs),i=!0;break}if(X.curStreamLastBufferedTs>X.newSapTimes[f])break}!i&&e+2*r<X.curStreamLastBufferedTs&&a>=10*l&&(C.error("Error: new stream is "+(X.curStreamLastBufferedTs-e)/l+" seconds behind previous stream. Halting."),i=!0)}return i}(i)){X.curStreamCancelled||(C.debug("processTransitionFrame cancel current rendition"),re(this),X.curStreamCancelled=!0);var u=Q;X.curStreamLastBufferedTs&&X.curStreamLastBufferedTs>u&&(u=X.curStreamLastBufferedTs);var h=X.newSapTimes[0],f=0,d=Math.abs(X.newSapTimes[0]-u);for(f=X.newSapTimes.length-1;f>=1;f--){var p=Math.abs(X.newSapTimes[f]-u);p<d&&(d=p,h=X.newSapTimes[f])}for(_(h),f=0;f<X.startupBuffer.length&&!(X.startupBuffer[f].ts>=h);f++);if(f>0){X.startupBuffer.splice(0,f);for(var v=void 0,m=0;m<X.initDataBuffer.length;m++)X.initDataBuffer[m].idx<=f?(v=X.initDataBuffer.shift(),m--):X.initDataBuffer[m].idx-=f;v&&(X.composer.setTrackParams(X.cTrackId,{codec:X.codec,codecData:v.data}),X.initSegment=X.composer.initSegment())}var g=S(h);if(M.pushInit(X.initSegment,g[0]),Z){var b=g[1];C.debug("transit buffer length = ".concat(X.startupBuffer.length)),C.debug("===== Rendition switch GAP ===== ".concat(1e3*b," msec, allowance = ").concat(g[2])),this.completeTransition(),this.applyTransition(),(isNaN(b)||b<0&&-b>10)&&(n.done=!1,C.error("Correct rendition switch isn't possible, gap is too big (".concat(b,"s). Reloading stream.")))}}return n},this.completeTransition=function(){O=X.startupBuffer,X.startupBuffer=[],X.composer.setTrackParams(X.cTrackId,{sequenceNumber:J+1}),v.remove(x),x=X.id,d=X.streamOptions,f=X.name,B=X.composer,E=X.cTrackId,s=X.codec,P=X.container,l=X.timescale,F=L*l/1e3,j=!1,N=void 0,V=void 0,K=!1,Z=!1,z=0,ae=X.initSegmentData,U=X.initDataBuffer,X={},se=!1,Y=void 0,q=void 0,G=void 0,O.length>0&&(Q=O[O.length-1].ts)},this.applyTransition=function(e){if(C.debug("applyTransition",e),e&&ae&&m(ae),ne(this),I=u.OPEN,w(this),O.length>=2){var t=O.splice(O.length-1,1)[0];this.processFrame(t.sap,t.data,t.ts,t.offset)}p.setPositionControl(),p.transitOff()}}var i=new n.default(e),r=new s.default(e);return{create:function(e,i,r,n,s,a,o,u,c){return new t(e,i,r,n,s,a,o,u,c)}}},t.TRANSITION_MODE=void 0;var n=r(i(111)),s=r(i(169)),a=r(i(12)),o=r(i(92)),u={OPEN:0,BUFFER:1,ACTIVE:2,BACKUP:3,CLOSED:4},c={ABRUPT:0,SMOOTH:1};t.TRANSITION_MODE=c},function(e,t,i){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i(110),i(108),i(109),i(14),i(87),i(17),i(71),i(72),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={appendBox:function(e,t,i){if(t._root=e._root?e._root:e,t._parent=e,-1!==i)if(void 0!==i&&null!==i){var n,s=-1;if("number"==typeof i)s=i;else{if("string"==typeof i)n=i;else{if("object"!==r(i)||!i.type)return void e.boxes.push(t);n=i.type}for(var a=0;a<e.boxes.length;a++)if(n===e.boxes[a].type){s=a+1;break}}e.boxes.splice(s,0,t)}else e.boxes.push(t)}},s=n;t.default=s},function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=(n=i(12))&&n.__esModule?n:{default:n},a={};a.liveFrameTypes={WEB_AAC_SEQUENCE_HEADER:0,WEB_AAC_FRAME:1,WEB_AVC_SEQUENCE_HEADER:2,WEB_AVC_KEY_FRAME:3,WEB_AVC_FRAME:4,WEB_HEVC_SEQUENCE_HEADER:5,WEB_HEVC_KEY_FRAME:6,WEB_HEVC_FRAME:7,WEB_VP6_KEY_FRAME:8,WEB_VP6_FRAME:9,WEB_VP8_KEY_FRAME:10,WEB_VP8_FRAME:11,WEB_VP9_KEY_FRAME:12,WEB_VP9_FRAME:13,WEB_MP3:14},a.closeCodes={1e3:"CLOSE_NORMAL",1001:"CLOSE_GOING_AWAY",1002:"CLOSE_PROTOCOL_ERROR",1003:"CLOSE_UNSUPPORTED",1005:"CLOSE_NO_STATUS",1006:"CLOSE_ABNORMAL",1007:"Unsupported Data",1008:"Policy Violation",1009:"CLOSE_TOO_LARGE",1010:"Missing Extension",1011:"Internal Error",1012:"Service Restart",1013:"Try Again Later",1015:"TLS Handshake"};var o=function(e){var t=s.default.create(e,"WSUtils"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.closeCodes=a.closeCodes,this.liveFrameTypes=a.liveFrameTypes}var i,n;return i=e,(n=[{key:"readValue",value:function(e,i,r){var n=[0,0],s=Math.ceil(r/4)-1;if(s>2)return t.error("[WS]: Attempt to read more than 64 bits!"),null;for(var a=s;a>=0;a--)for(var o=0;o<4;o++)n[a]|=e[i+4*(s-a)+o]<<8*(3-o);return n[1]&=2097151,n[1]*Math.pow(2,32)+(n[0]>>>0)}}])&&r(i.prototype,n),e}();return{create:function(){return new i}}};t.default=o},function(e,t,i){"use strict";var r=i(13),n=i(50),s=i(6);e.exports=function(e){for(var t=r(this),i=s(t.length),a=arguments.length,o=n(a>1?arguments[1]:void 0,i),u=a>2?arguments[2]:void 0,c=void 0===u?i:n(u,i);c>o;)t[o++]=e;return t}},function(e,t,i){"use strict";var r=i(18).forEach,n=i(60),s=i(61),a=n("forEach"),o=s("forEach");e.exports=a&&o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,i){"use strict";var r=i(20),n=i(19),s=i(6),a=i(60),o=i(61),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,h=a("lastIndexOf"),f=o("indexOf",{ACCESSORS:!0,1:0}),d=l||!h||!f;e.exports=d?function(e){if(l)return c.apply(this,arguments)||0;var t=r(this),i=s(t.length),a=i-1;for(arguments.length>1&&(a=u(a,n(arguments[1]))),a<0&&(a=i+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:c},function(e,t,i){var r=i(52),n=i(13),s=i(63),a=i(6),o=function(e){return function(t,i,o,u){r(i);var c=n(t),l=s(c),h=a(c.length),f=e?h-1:0,d=e?-1:1;if(o<2)for(;;){if(f in l){u=l[f],f+=d;break}if(f+=d,e?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:h>f;f+=d)f in l&&(u=i(u,l[f],f,c));return u}};e.exports={left:o(!1),right:o(!0)}},function(e,t,i){var r=i(7),n=i(198),s=i(82),a=i(9);e.exports=function(e,t){for(var i=n(t),o=a.f,u=s.f,c=0;c<i.length;c++){var l=i[c];r(e,l)||o(e,l,u(t,l))}}},function(e,t,i){var r=i(1);e.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,i){"use strict";var r=i(133).IteratorPrototype,n=i(49),s=i(47),a=i(56),o=i(65),u=function(){return this};e.exports=function(e,t,i){var c=t+" Iterator";return e.prototype=n(r,{next:s(1,i)}),a(e,c,!1,!0),o[c]=u,e}},function(e,t,i){"use strict";var r=i(0),n=i(122),s=i(67),a=i(54),o=i(56),u=i(15),c=i(16),l=i(4),h=i(64),f=i(65),d=i(133),p=d.IteratorPrototype,v=d.BUGGY_SAFARI_ITERATORS,m=l("iterator"),g=function(){return this};e.exports=function(e,t,i,l,d,y,b){n(i,t,l);var _,A,w,S=function(e){if(e===d&&E)return E;if(!v&&e in C)return C[e];switch(e){case"keys":case"values":case"entries":return function(){return new i(this,e)}}return function(){return new i(this)}},k=t+" Iterator",T=!1,C=e.prototype,x=C[m]||C["@@iterator"]||d&&C[d],E=!v&&x||S(d),P="Array"==t&&C.entries||x;if(P&&(_=s(P.call(new e)),p!==Object.prototype&&_.next&&(h||s(_)===p||(a?a(_,p):"function"!=typeof _[m]&&u(_,m,g)),o(_,k,!0,!0),h&&(f[k]=g))),"values"==d&&x&&"values"!==x.name&&(T=!0,E=function(){return x.call(this)}),h&&!b||C[m]===E||u(C,m,E),f[t]=E,d)if(A={values:S("values"),keys:y?E:S("keys"),entries:S("entries")},b)for(w in A)!v&&!T&&w in C||c(C,w,A[w]);else r({target:t,proto:!0,forced:v||T},A);return A}},function(e,t,i){var r=i(138),n=i(7),s=i(147),a=i(9).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});n(t,e)||a(t,e,{value:s.f(e)})}},function(e,t,i){var r=i(2),n=i(8),s=r.document,a=n(s)&&n(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,i){var r=i(48);e.exports=r("navigator","userAgent")||""},function(e,t,i){var r,n,s=i(2),a=i(127),o=s.process,u=o&&o.versions,c=u&&u.v8;c?n=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(n=r[1]),e.exports=n&&+n},function(e,t,i){"use strict";var r=i(52),n=i(8),s=[].slice,a={};e.exports=Function.bind||function(e){var t=r(this),i=s.call(arguments,1),o=function(){var r=i.concat(s.call(arguments));return this instanceof o?function(e,t,i){if(!(t in a)){for(var r=[],n=0;n<t;n++)r[n]="a["+n+"]";a[t]=Function("C,a","return new C("+r.join(",")+")")}return a[t](e,i)}(t,r.length,r):t.apply(e,r)};return n(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t,i){var r=i(5),n=i(1),s=i(125);e.exports=!r&&!n(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var r=i(142),n=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return n.call(e)}),e.exports=r.inspectSource},function(e,t,i){var r=i(4),n=i(65),s=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[s]===e)}},function(e,t,i){"use strict";var r,n,s,a=i(67),o=i(15),u=i(7),c=i(4),l=i(64),h=c("iterator"),f=!1;[].keys&&("next"in(s=[].keys())?(n=a(a(s)))!==Object.prototype&&(r=n):f=!0),void 0==r&&(r={}),l||u(r,h)||o(r,h,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(e,t,i){var r=i(1),n=i(4),s=i(64),a=n("iterator");e.exports=!r(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach(function(e,r){t.delete("b"),i+=r+e}),s&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host})},function(e,t,i){"use strict";var r=i(5),n=i(1),s=i(99),a=i(98),o=i(100),u=i(13),c=i(63),l=Object.assign,h=Object.defineProperty;e.exports=!l||n(function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol();return e[i]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=l({},e)[i]||"abcdefghijklmnopqrst"!=s(l({},t)).join("")})?function(e,t){for(var i=u(e),n=arguments.length,l=1,h=a.f,f=o.f;n>l;)for(var d,p=c(arguments[l++]),v=h?s(p).concat(h(p)):s(p),m=v.length,g=0;m>g;)d=v[g++],r&&!f.call(p,d)||(i[d]=p[d]);return i}:l},function(e,t,i){var r=i(5),n=i(9),s=i(11),a=i(99);e.exports=r?Object.defineProperties:function(e,t){s(e);for(var i,r=a(t),o=r.length,u=0;o>u;)n.f(e,i=r[u++],t[i]);return e}},function(e,t,i){var r=i(7),n=i(20),s=i(76).indexOf,a=i(80);e.exports=function(e,t){var i,o=n(e),u=0,c=[];for(i in o)!r(a,i)&&r(o,i)&&c.push(i);for(;t.length>u;)r(o,i=t[u++])&&(~s(c,i)||c.push(i));return c}},function(e,t,i){var r=i(2);e.exports=r},function(e,t,i){var r=i(16);e.exports=function(e,t,i){for(var n in t)r(e,n,t[n],i);return e}},function(e,t,i){"use strict";function r(e,t){return RegExp(e,t)}var n=i(1);t.UNSUPPORTED_Y=n(function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),t.BROKEN_CARET=n(function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},function(e,t,i){"use strict";var r=i(48),n=i(9),s=i(4),a=i(5),o=s("species");e.exports=function(e){var t=r(e),i=n.f;a&&t&&!t[o]&&i(t,o,{configurable:!0,get:function(){return this}})}},function(e,t,i){var r=i(2),n=i(102),s=r["__core-js_shared__"]||n("__core-js_shared__",{});e.exports=s},function(e,t,i){var r=i(55),n="["+i(106)+"]",s=RegExp("^"+n+n+"*"),a=RegExp(n+n+"*$"),o=function(e){return function(t){var i=String(r(t));return 1&e&&(i=i.replace(s,"")),2&e&&(i=i.replace(a,"")),i}};e.exports={start:o(1),end:o(2),trim:o(3)}},function(e,t,i){var r=i(19),n=i(6);e.exports=function(e){if(void 0===e)return 0;var t=r(e),i=n(t);if(t!==i)throw RangeError("Wrong length or index");return i}},function(e,t,i){var r=i(203);e.exports=function(e,t){var i=r(e);if(i%t)throw RangeError("Wrong offset");return i}},function(e,t,i){var r=i(97);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,i){var r=i(4);t.f=r},function(e,t,i){"use strict";var r=i(0),n=i(8),s=i(81),a=i(50),o=i(6),u=i(20),c=i(77),l=i(4),h=i(94),f=i(61),d=h("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),m=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(e,t){var i,r,l,h=u(this),f=o(h.length),d=a(e,f),p=a(void 0===t?f:t,f);if(s(h)&&("function"!=typeof(i=h.constructor)||i!==Array&&!s(i.prototype)?n(i)&&null===(i=i[v])&&(i=void 0):i=void 0,i===Array||void 0===i))return m.call(h,d,p);for(r=new(void 0===i?Array:i)(g(p-d,0)),l=0;d<p;d++,l++)d in h&&c(r,l,h[d]);return r.length=l,r}})},function(e,t,i){"use strict";var r=i(0),n=i(19),s=i(202),a=i(201),o=i(1),u=1..toFixed,c=Math.floor,l=function(e,t,i){return 0===t?i:t%2==1?l(e,t-1,i*e):l(e*e,t/2,i)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o(function(){u.call({})})},{toFixed:function(e){var t,i,r,o,u=s(this),h=n(e),f=[0,0,0,0,0,0],d="",p="0",v=function(e,t){for(var i=-1,r=t;++i<6;)r+=e*f[i],f[i]=r%1e7,r=c(r/1e7)},m=function(e){for(var t=6,i=0;--t>=0;)i+=f[t],f[t]=c(i/e),i=i%e*1e7},g=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==f[e]){var i=String(f[e]);t=""===t?i:t+a.call("0",7-i.length)+i}return t};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(d="-",u=-u),u>1e-21)if(i=(t=function(e){for(var t=0,i=e;i>=4096;)t+=12,i/=4096;for(;i>=2;)t+=1,i/=2;return t}(u*l(2,69,1))-69)<0?u*l(2,-t,1):u/l(2,t,1),i*=4503599627370496,(t=52-t)>0){for(v(0,i),r=h;r>=7;)v(1e7,0),r-=7;for(v(l(10,r,1),0),r=t-1;r>=23;)m(1<<23),r-=23;m(1<<r),v(1,1),m(2),p=g()}else v(0,i),v(1<<-t,0),p=g()+a.call("0",h);return p=h>0?d+((o=p.length)<=h?"0."+a.call("0",h-o)+p:p.slice(0,o-h)+"."+p.slice(o-h)):d+p}})},function(e,t,i){var r=i(0),n=i(194);r({global:!0,forced:parseFloat!=n},{parseFloat:n})},function(e,t,i){"use strict";var r=i(0),n=i(83);r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=r(i(156));r(i(161)),e.exports={init:function(e){var t=void 0;t=e&&e.instance_name?e.instance_name:"SLDP_"+(Math.floor(1e3*Math.random())+1);var i=new n.default(t);return i.initialize(e),i},VERSION:"v2.17.1",COMMITHASH:"ef460341aeb1743d42214cb97f75cd4d1f14a6ad"}},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i(58),i(89),i(10),i(51),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(i(154)),o=r(i(113)),u=r(i(12)),c=function(e){var t=u.default.create(e,"ABR controller"),i=new a.default(e),r=function(){function e(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_watchDog",function(){if(this.abrStrategy.isRunning()){var e=this.abrStrategy.calculateCurVideoStreamMetric("latestBufLevel");e<=this.stepDownBufferLevel&&(t.debug("_watchDog",e),this.abrStrategy.finish(),this._increasePhases())}}.bind(this)),s(this,"_evalHandler",function(){if(!this.isSwitchInProgressCallback()&&!this.isSeekInProgressCallback()){var e=this.abrStrategy.calculateCurStreamMetric("latestLowBufferCount"),i=this.abrStrategy.calculateCurVideoStreamMetric("latestBufLevel");if(this.playbackStalled(i,e))t.debug("evalHandler: playback stalled! Switch to lowest rendition."),this.abrStrategy.cancel(),this._switchStream(0,o.default.ABRUPT),this._increasePhases(),this.phaseCount=0;else{if(t.debug("phase ".concat(this.phaseCount," max ").concat(this.maxPhases)),this.phaseCount>=3){var r=this.abrStrategy.calculateCurStreamMetric("latestBandwidth"),n=this.abrStrategy.calculateCurStreamMetric("latestRate");if(r+=this.abrStrategy.calculateProbeStreamMetric("latestBandwidth"),t.debug("evalHandler: current buffer ".concat(i,", step down buffer ").concat(this.stepDownBufferLevel,", current bandwidth ").concat(r,", current rate ").concat(n)),i<this.stepDownBufferLevel){if(this.abrStrategy.cancel(),n>=r){var s=this.abrStrategy.findRelevantStream(r,n);s!==this.curStream.orderedIdx&&(t.debug("evalHandler: step down to ".concat(this.streamsData.ordered[s].rendition+"p")),this._switchStream(s),this._increasePhases(),this.phaseCount=0)}}else!this._alreadyTop()&&!this.abrStrategy.isRunning()&&this.phaseCount>=this.maxPhases&&r>0&&i>this.safeRunBufferLevel&&0==e&&(this.abrStrategy.run(),this.phaseCount=0)}!this.abrStrategy.isRunning()&&this.phaseCount<this.maxPhases&&this.phaseCount++}}}.bind(this)),s(this,"_trialComplete",function(){if(t.debug("trial complete for ".concat(this.curStream?this.curStream.rendition:"unknown")),this.curStream){var e=this.trials[this.curStream.orderedIdx];e.timer=null,e.required>1&&e.required--}}.bind(this)),s(this,"_onStrategyResult",function(e){if(t.debug("_onAbrStrategyResult: success ".concat(this.streamsData.ordered[e].rendition+"p",", idx ").concat(e,", current stream ").concat(this.curStream.rendition+"p",", idx ").concat(this.curStream.orderedIdx)),this.curStream.orderedIdx!==e)this._switchStream(e);else{for(var i in this.trials)this.trials[i].runs=0;this._increasePhases()}this.phaseCount=0}.bind(this)),this.streamsData=[],this.bufferingTime=n,this.trials={},this.maxPhases=3,this.trialsActive=!1,this.stepDownBufferLevel=this.bufferingTime>1e3?this.bufferingTime/1500:this.bufferingTime/1250,this.safeRunBufferLevel=this.bufferingTime>1e3?.75*this.bufferingTime/1e3:.9*this.bufferingTime/1e3,this.abrStrategy=i.create(r,n)}var r,a;return r=e,(a=[{key:"start",value:function(){this.streamsData=this.getStreamsCallback(),this.curStream=this.getCurStreamCallback(),this.streamsData.ordered.length>1&&(t.debug("start"),this._initTrials(),this.phaseCount=0,this.trials[this.curStream.orderedIdx].timer=setTimeout(this._trialComplete,6e4),this._clearEvalTimer(),this._clearWatchTimer(),this._clearRestartTimer(),this.evalTimer=setInterval(this._evalHandler,1e3),this.watchTimer=setInterval(this._watchDog,100),this.abrStrategy.init(this.streamsData,this.curStream),this.abrStrategy.callbacks={onStartProbe:this.probeStartCallback,onCancelProbe:this.probeCancelCallback,onResult:this._onStrategyResult})}},{key:"restart",value:function(e){if(e){this._clearEvalTimer(),this._clearWatchTimer();var t=this;this.restartTimer=setTimeout(function(){t.restartTimer=void 0,t.start()},5e3)}else this.start()}},{key:"playbackStalled",value:function(e,i){return i>0&&t.debug("Low buffer count: ".concat(i,", current buffer level: ").concat(e)),i>=10||e+2<=0}},{key:"scheduleInstantEvaluation",value:function(){this._clearEvalTimer(),this._clearWatchTimer(),this._evalHandler(),this.evalTimer=setInterval(this._evalHandler,1e3),this.watchTimer=setInterval(this._watchDog,100)}},{key:"_increasePhases",value:function(){this.maxPhases<30&&(this.maxPhases++,t.debug("Increase maxPhases",this.maxPhases))}},{key:"_alreadyTop",value:function(){return this.curStream.orderedIdx===this.streamsData.ordered.length-1}},{key:"_initTrials",value:function(){var e=!1;if(this.trialsActive)for(var t=0;t<this.streamsData.ordered.length;t++){if(this.trials[t]){var i=this.trials[t].idx;i===this.streamsData.ordered[t].idx&&this.trials[t].stream===this.streamsData.streams[i].stream&&(e=!0)}if(!e)break}if(e)this._resetTrials();else{this.trials={},this.trialsActive=!0;for(var r=0;r<this.streamsData.ordered.length;r++){var n=this.streamsData.ordered[r].idx;this.trials[r]={idx:n,stream:this.streamsData.streams[n].stream,runs:0,required:1,timer:null}}}}},{key:"_switchStream",value:function(e,i){if(e!==this.curStream.orderedIdx){var r=e>this.curStream.orderedIdx;if(r)this.trials[e].runs++;else{var n=this.trials[this.curStream.orderedIdx];n.timer&&(n.required+=2,n.required>15&&(n.required=15),this._clearTrialTimer(this.curStream.orderedIdx),t.debug("Increase trial for ".concat(this.curStream.rendition+"p",", idx ").concat(n.idx," to ").concat(n.required)))}(!r||this.trials[e].runs>=this.trials[e].required)&&this.switchStreamCallback(this.streamsData.ordered[e].idx,i)}}},{key:"stop",value:function(e){t.debug("stop!"),this.streamsData=[],this.curStream=void 0,this.phaseCount=0,this._resetTrials(),e&&e.hard&&(this.trials={}),this._clearEvalTimer(),this._clearWatchTimer(),this.abrStrategy.clear()}},{key:"_clearEvalTimer",value:function(){void 0!==this.evalTimer&&(clearInterval(this.evalTimer),this.evalTimer=void 0)}},{key:"_clearWatchTimer",value:function(){void 0!==this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0)}},{key:"_clearRestartTimer",value:function(){void 0!==this.restartTimer&&(clearTimeout(this.restartTimer),this.restartTimer=void 0)}},{key:"_resetTrials",value:function(){for(var e in this.trials)this.trials[e].runs=0,this._clearTrialTimer(e)}},{key:"_clearTrialTimer",value:function(e){null!==this.trials[e].timer&&(clearTimeout(this.trials[e].timer),this.trials[e].timer=null)}},{key:"isProbing",value:function(e){var t=!1,i=this.abrStrategy.getProber();return i&&i.id()===e&&(t=i.isEnabled()),t}},{key:"onProbeInitReceived",value:function(){this.abrStrategy.getProber().receiveInit()}},{key:"onProbeDataReceived",value:function(e,t,i){this.abrStrategy.getProber().receiveFrame(e,t,i)}},{key:"callbacks",set:function(e){this.switchStreamCallback=e.switchStream,this.isSwitchInProgressCallback=e.isInProgress,this.isSeekInProgressCallback=e.isSeeking,this.getStreamsCallback=e.getStreams,this.getCurStreamCallback=e.getCurStream,this.probeStartCallback=e.probeStream,this.probeCancelCallback=e.cancelStream}}])&&n(r.prototype,a),e}();return{create:function(e,t){return new r(e,t)}}};t.default=c},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i(58),i(89),i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(i(162)),o=r(i(12)),u=3e3,c=function(e){var t=o.default.create(e,"ABR strategy"),i=new a.default(e),r=function(){function e(i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"onProbeFinished",function(){this.runsCount++,this.runCurStreamMetricMethod("stopCustom");var e=this.calculateCurStreamMetric("customRangeBandwidth");t.debug("onProbeFinished: current stream bandwidth ".concat(e));var i=this.metricsManager.getMetrics(this.prober.id()),r=Math.max(i.avgBandwidth(),i.latestBandwidth()),n=i.avgRate();e+=r,t.debug("onProbeFinished bandwidth: previous ".concat(this.curBandwidth,", current ").concat(e)),t.debug("onProbeFinished prober: bandwidth ".concat(r,", rate ").concat(n));var s=this.prober.period;this.destroyProber(),this.running=!1;var a=this.calculateCurVideoStreamMetric("latestBufLevel"),o=1e3*a>=this.enoughBufferToContinue,c=this.calculateCurStreamMetric("avgRate")/this.curStream.bandwidth;if(t.debug("prober enough buffer ".concat(o,", period ").concat(s,", level ").concat(a)),o&&s>=u){this.curBandwidth=e;for(var l=this.curStreamIdx+1;l<this.streamsData.ordered.length;l++){var h=this.streamsData.ordered[l].bandwidth*c;if(this.curBandwidth<1.2*h)break;this.curStreamIdx++}this.doRun()}else o?(e<this.curBandwidth&&(e/=c),this.curBandwidth=Math.max(e,this.curBandwidth),this.doRun()):this.onResultCallback(this.curStreamIdx)}.bind(this)),s(this,"onInitReceived",function(){this.runCurStreamMetricMethod("startCustom")}.bind(this)),this.running=!1,this.nextProberId=0,this.runsCount=0,this.metricsManager=i,this.bufferingTime=r,this.minBufferingTime=r>1e3?600:r/2,this.enoughBufferToContinue=r>1e3?1e3:r}var r,a;return r=e,(a=[{key:"init",value:function(e,t){this.streamsData=e,this.curStream=t}},{key:"clear",value:function(){t.debug("clear"),this.cancel(),this.streamsData=void 0,this.curStream=void 0}},{key:"cancel",value:function(){this.running&&(t.debug("cancel"),this.running=!1,this.prober.stop()),this.destroyProber()}},{key:"destroyProber",value:function(){this.prober&&(this.prober.destroy(),this.prober=void 0)}},{key:"run",value:function(){this.curBandwidth=this.calculateCurStreamMetric("avgBandwidth"),this.curStreamIdx=this.curStream.orderedIdx,this.runsCount=0,this.doRun()}},{key:"finish",value:function(){t.debug("finish! current stream idx ".concat(this.curStreamIdx)),this.cancel(),this.onResultCallback(this.curStreamIdx)}},{key:"doRun",value:function(){var e=this.curStream?this.curStream.rendition+"p":"";if(t.debug("run: current stream ".concat(e,", idx ").concat(this.curStreamIdx,", bandwdith ").concat(this.curBandwidth)),this.curBandwidth>0)if(this.nextStreamIdx=this.curStreamIdx+1,this.nextStreamIdx<this.streamsData.ordered.length){var r=this.calculateCurStreamMetric("avgRate");this.bwCorrector=this.curStream.bandwidth>0?r/this.curStream.bandwidth:1,t.debug("run: bandwidth ".concat(this.curBandwidth,", rate ").concat(r,", corrector ").concat(this.bwCorrector));var n=this.streamsData.ordered[this.nextStreamIdx],s=r+n.bandwidth*this.bwCorrector,a=0,o=1e3*this.calculateCurVideoStreamMetric("latestBufLevel");this.curBandwidth<s&&(a=this.curBandwidth*(o-this.minBufferingTime)/(s-this.curBandwidth),(a=Math.round(a))<100&&(a=100)),(0==a||a>u)&&(a=u),0===this.runsCount&&a>600&&(a=600);var c=this.streamsData.streams[n.idx];this.prober=i.create(this.nextProberId++,c.stream,c.stream_info.vtimescale,a,this.metricsManager),this.prober.callbacks={onStartProbe:this.startProbeCallback,onCancelProbe:this.cancelProbeCallback,onInitReceived:this.onInitReceived,onProbeFinished:this.onProbeFinished},this.running=!0,this.prober.start()}else this.onResultCallback(this.curStreamIdx)}},{key:"calculateCurVideoStreamMetric",value:function(e){return this.metricsManager.getMetrics(this.curStream.vid)[e]()}},{key:"calculateCurStreamMetric",value:function(e){var t=this.metricsManager.getMetrics(this.curStream.vid)[e]();return void 0!==this.curStream.aid&&(t+=this.metricsManager.getMetrics(this.curStream.aid)[e]()),t}},{key:"calculateProbeStreamMetric",value:function(e){var t=0;return void 0!==this.prober&&(t=this.metricsManager.getMetrics(this.prober.id())[e]()),t}},{key:"runCurStreamMetricMethod",value:function(e){this.metricsManager.getMetrics(this.curStream.vid)[e](),void 0!==this.curStream.aid&&this.metricsManager.getMetrics(this.curStream.aid)[e]()}},{key:"findRelevantStream",value:function(e,i){for(var r=0,n=this.curStream.bandwidth>0?i/this.curStream.bandwidth:1,s=this.curStream.orderedIdx-1;s>=0;s--)if(e>=1.1*this.streamsData.ordered[s].bandwidth*n){r=s;break}return t.debug("findRelevantStream: found index ".concat(this.curStream.orderedIdx)),r}},{key:"getProber",value:function(){return this.prober}},{key:"isRunning",value:function(){return this.running}},{key:"callbacks",set:function(e){this.startProbeCallback=e.onStartProbe,this.cancelProbeCallback=e.onCancelProbe,this.onResultCallback=e.onResult}}])&&n(r.prototype,a),e}();return{create:function(e,t){return new r(e,t)}}};t.default=c},function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=(n=i(157))&&n.__esModule?n:{default:n},a="\n@font-face {\n  font-family: 'glyphs';\n  src:url(data:font/opentype;base64,".concat(s.default,');\n  font-weight: normal;\n  font-style: normal;\n}\n[class^="sldp-icon-"], [class*=" sldp-icon-"] {\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: \'glyphs\' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.sldp-icon-enlarge:before {\n  content: "\\e98b";\n}\n.sldp-icon-cog:before {\n  content: "\\e994";\n}\n.sldp-icon-play-o:before {\n  content: "\\ea15";\n}\n.sldp-icon-pause-o:before {\n  content: "\\ea16";\n}\n.sldp-icon-play:before {\n  content: "\\ea1c";\n}\n.sldp-icon-pause:before {\n  content: "\\ea1d";\n}\n.sldp-icon-volume-medium:before {\n  content: "\\ea27";\n}\n.sldp-icon-volume-mute:before {\n  content: "\\ea2a";\n}\n.sldp_player_wrp {\n  background-color: #000;\n  position: relative;\n}\n.sldp_player_wrp_video {\n  display: inline-block;\n}\n.sldp_player_wrp_audio {\n  display: flex;\n  height: 42px;\n}\n.sldp_cbar {\n  display: block;\n  padding: 5px;\n  padding-left: 5px;\n  overflow: hidden;\n  z-index: 10;\n}\n.sldp_cbar_video {\n  position: absolute;\n  bottom: 0px;\n  left: 0;\n  right: 0;\n  transition: opacity 0.5s linear;\n  background-color: rgba(0,0,0,0.7);\n}\n.sldp_cbar_audio {\n  position: relative;\n  margin: auto 6px auto 12px;\n  background-color: rgba(0,0,0,0.4);\n}\n.sldp_mobile_ctrl {\n  position: absolute;\n  transition: opacity 0.5s linear;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  z-index: 5;\n  color: #008ee8;\n}\n.sldp_mobile_ctrl_icon {\n  margin: auto;\n  font-size: 5rem;\n  opacity: 0.7;\n}\n.sldp_message_wrp {\n  height: 100%;\n  color: white;\n  display: flex;\n  z-index: 1;\n}\n.sldp_message_wrp_video {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  width: 100%;\n}\n.sldp_message_wrp_audio_noctrl {\n  padding-left: 20px;\n}\n.sldp_message {\n  display: inline-block;\n  margin: auto;\n  background: #000;\n  font-family: Helvetica, Arial, sans-serif;\n  line-height: 22px;\n}\n.sldp_message_pad {\n  padding: 12px 20px;\n  align-self: center;\n}\n.ios_button {\n  text-align: center;\n  margin: 10px 0px;\n}\n.sldp_btn {\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  margin-right: 10px;\n  color: #008ee8;\n  font-size: 18px;\n\n  -o-transition:.5s;\n  -ms-transition:.5s;\n  -moz-transition:.5s;\n  -webkit-transition:.5s;\n  transition:.5s;\n}\n.sldp_btn:hover {\n  color: #ff8814;\n}\n.sldp_play_pause_btn {\n  float: left;\n}\n.sldp_expand_btn {\n  float: right;\n  font-size: 16px;\n}\n.sldp_volume_btn {\n  float: left;\n}\n.sldp_config_btn {\n  float: right;\n}\n.sldp_config_btn:hover {\n  transform: rotate(-30deg);\n}\n.sldp_cfg_dialog {\n  width: 100px;\n  background: black;\n  position: absolute;\n  right: 25px;\n  bottom: 30px;\n  padding: 0;\n  margin: 0;\n  font-family: Arial;\n  font-size: 14px;\n  color: white;\n  z-index: 10;\n}\n.sldp_cfg_dialog li {\n  list-style: none;\n  text-align: center;\n  line-height: 24px;\n  cursor: pointer;\n}\n.sldp_cfg_dialog li:hover {\n  background-color: grey;\n}\n.sldp_volume_wrp {\n  overflow: hidden;\n}\n.sldp_volume_desktop {\n  width: 150px;\n}\n.sldp_volume_mobile {\n  width: 20px;\n}\n.sldp_volume_slider_wrp {\n  float: left;\n  height: 20px;\n  cursor: pointer;\n}\n.sldp_volume_slider {\n  border-radius: 1px;\n  background: #008ee8;\n  width: 112px;\n  height: 3px;\n  margin-top: 9px;\n}\n.sldp_volume_thumb {\n  background: #008ee8;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  position: relative;\n  left: 100px;\n  top: -4px;\n  cursor: pointer;\n}\n.sldp_volume_thumb:hover {\n  background: #ff8814;\n}\n.sldp_indicator {\n  height: 4px;\n  background-color: #008ee8;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n'),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),document.getElementById("sldp_player_stylesheet")||(this.style=document.createElement("style"),this.style.setAttribute("id","sldp_player_stylesheet"),this.style.styleSheet?this.style.styleSheet.cssText=a:this.style.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(this.style))}var t,i;return t=e,(i=[{key:"destroy",value:function(){this.style&&this.style.parentNode.removeChild(this.style)}}])&&r(t.prototype,i),e}();t.default=o},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i(110),i(108),i(109),i(86),i(14),i(209),i(87),i(22),i(69),i(70),i(213),i(17),i(90),i(151),i(91),i(71),i(218),i(46),i(23),i(24),i(25),i(26),i(28),i(27),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(37),i(36),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),i(72),i(51),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(i(153)),a=r(i(177)),o=r(i(160)),u=r(i(159)),c=r(i(113)),l=r(i(163)),h=r(i(12)),f=r(i(92)),d=r(i(166)),p={NULL:0,INIT:1,STOP:2,SETUP:3,SYNC:4,PLAY:5,WAIT:6,STALL:7,ERROR:8,RESET:9},v=new Uint8Array([17,144]),m=function(e){function t(e,t,i){}function i(){ze=!0,Ye||((Ye=me.create(Ae,ye.sync_buffer>0?ye.sync_buffer-100:ye.buffering)).callbacks={switchStream:N,isInProgress:j,isSeeking:H,getStreams:W,getCurStream:z,probeStream:Q,cancelStream:Y})}function r(){Pe=void 0,Be=void 0,Me=void 0,Le=void 0,Ie=void 0,Fe=void 0}function m(){Se.callbacks({onProgress:X,onSourceOpen:T,onCrash:re,onWaitUpdate:te,onPlayStarted:E,onPlayFailed:P,onLatencyCalc:Z,onLatencySeek:$,onLowBuffer:ee})}function g(){we.callbacks={onStatusReceived:se,onInitSegmentReceived:he,onDataReceived:pe,onConnectionClosed:ne}}function y(e){Ye&&Ye.stop(e),we.close(),g();for(var t=0;t<be.length;t++)be[t].close();be=[],w(),_(),r()}function b(){ke.removePip(function(){A(),Se.clear(),m(),Se.init(ke.videoElement)})}function _(){je&&(clearTimeout(je),je=void 0),Ne=0}function A(e){Te&&Te.stop(e)}function w(){void 0!==Ue&&(clearTimeout(Ue),Ue=void 0)}function S(){k()&&(_e=p.SETUP)}function k(){var e=!1,i=Ee||ye.stream_url;return i&&i.length>0?t(0,(e=we.open(i)).streamURL):ve.error("_connectCurrentStream attempt to open empty url",Ee,ye.stream_url),e}function T(){switch(ve.debug("MSE initialized",_e),_e){case p.STOP:ke.canPlay=!0,_e=p.INIT;break;case p.INIT:ye.stream_url&&(ye.autoplay||Ve)?(S(),Ve=!1):ke.canPlay=!0;break;case p.ERROR:for(var e=!1,t=0;t<be.length;t++)be[t].isActual()&&(be[t].attachToMSE(),be[t].recover(),be[t].inTransition()&&(e=!0));_e=e?p.SYNC:p.PLAY,ke.clearVideoElement(),Se.startPlayback({recover:!0}),G()}}function C(e){switch(t(),_e){case p.INIT:S();break;case p.RESET:b(),_e=p.INIT,Ve=!0;break;case p.NULL:break;default:w(),_(),ze&&Pe&&Ye.start(),Se.handlePlay(e),Te&&Te.onPlay()}}function x(){Se.handlePlayEvent()}function E(){ke&&ke.onPlaybackStarted()}function P(){ke&&(ke.triggerPause(!0),ke.onPlaybackStarted()),Ue=setTimeout(O,2e3)}function B(){return p.SETUP!==_e&&p.SYNC!==_e}function M(e){t()}function I(){_e>=p.SYNC&&G()}function L(){ve.debug("enter PIP"),Se.handleEnterPip()}function F(){ve.debug("leave PIP"),Se.handleLeavePip()}function R(){p.SYNC<_e&&(_(),t(),Ye&&Ye.stop(),Se.handlePause(),ye.pause_timeout>=0&&(Ue=setTimeout(O,1e3*ye.pause_timeout)))}function D(){Se.handlePauseEvent()}function O(){U()}function U(){y(),Se.resetPosition(),_e=p.RESET}function V(e,i){var r=!1;if(j()||Se.isPaused())return ve.warn("Quality change is not available at the moment"),r;if(p.SYNC<_e){var n="Auto"==e;if(n||void 0!==De[e]){var s=void 0,a=void 0;n||(void 0==i&&(i=0),a=De[e][i],s=xe[a].stream),ve.debug("Switch quality to ",e,s),t(),n?(ze=!0,J(),Ye.start()):void 0!==a&&(ze=!1,Ye&&Ye.stop(),N(a)),r=!0}}return r}function N(e,t){if(e!=Me){if(Pe&&!Se.isPaused()&&p.STALL!=_e){var i=xe[e];if(p.WAIT===_e)for(var r=0;r<be.length;r++)be[r].activate();Pe.inTransition(!0);var n=i.stream_info,s={width:n.width,height:n.height,bandwidth:n.bandwidth};if(Pe.setTransitionParams({id:Oe,codec:n.vcodec,timescale:n.vtimescale,name:i.stream,streamOptions:s}),Pe.isTransitionSupported()){w(),_(),ve.debug("[Director] Change quality, send Play for "+i.stream+", sn #"+Oe);var a={stream:i.stream,sn:Oe,type:"video",offset:"0"};qe>0&&(a.steady=!0),ae([a]),Oe++,Le=e,Pe.startTransition(t),_e=p.SYNC}else ve.error("Transition isn't supported to ",i)}}else J()}function j(){return void 0!==Le||void 0!==Fe}function H(){return Se.isSeeking()}function z(){var e={};if(void 0!==Me){e={vid:Pe.id(),idx:Me,bandwidth:xe[Me].stream_info.bandwidth,rendition:xe[Me].stream_info.height};for(var t=0,i=0;i<We.length;i++)if(We[i].idx==Me){t=i;break}e.orderedIdx=t,void 0!==Ie&&(e.aid=Be.id())}return e}function W(){return{ordered:We,streams:xe}}function Y(e){var t;ve.debug("Send cancel ",e.id()),t=[e.id().toString()],we.send({command:"Cancel",streams:t})}function Q(e,t){ve.debug("probe stream "+e.streamName()+", sn: "+e.id()+", offset: "+Pe.sapOffset()+", duration: "+t),ae([{stream:e.streamName(),sn:e.id(),type:"video",offset:Pe.sapOffset().toString(),duration:t}])}function q(e){if(e.isVideo()&&void 0!==Le){Me=Le,Le=void 0;var i=J();G(),ze&&Ye.restart(!0),t(0,i.rendition,i.name),ke.refresh()}else e.isAudio()&&void 0!==Fe&&(Ie=Fe,Fe=void 0)}function G(){ke.adjustHeight()}function J(){var e=void 0;if(void 0!==Me&&xe[Me]){var t=xe[Me].stream_info.height+"p";ye.initial_resolution=t;var i=xe[Me].stream_info.renditionIdx;if(ye.initial_idx=i,We.length>1)if(Ye)if(ze){var r="Auto "+t;ke.quality_ar[0].name=r,ke.currentQuality={name:r}}else ke.quality_ar[0].name="Auto",ke.currentQuality={name:t,idx:i};else ke.currentQuality={name:t,idx:i};e={name:xe[Me].stream,rendition:t}}return e}function K(){He&&(clearTimeout(He),He=void 0)}function X(e,t){if(p.PLAY==_e){for(var i=0;i<be.length;i++)if(be[i].isActual()){var r=be[i].bufferStatus(e);if(r.low){K(),He=setTimeout(function(){Se.wait(),He=void 0},1e3*r.lvl+50),be[i].buffer(),_e=p.WAIT;break}K()}t>200&&re(!0)}}function Z(e){var t=(be.length>1?Pe:be[0]).latency(e);return t>0?t:0}function $(e,i){t()}function ee(){t()}function te(e,t){for(var i=0;i<be.length;i++)be[i].isActual()&&be[i].updateBufferedState(e,t)}function ie(){p.ERROR!==_e&&p.INIT!==_e&&re(!0)}function re(e){ve.debug("onSourceBufferCrash"),_e=p.ERROR,Ce=void 0;var t=!0;if(!e){for(var i=[],r=0;r<be.length;r++)if(i.push(be[r].backup()),!be[r].isRecoverable()){t=!1;break}t&&i.length>1&&void 0!==i[0]&&void 0!==i[1]&&Math.abs(i[0]-i[1])>100&&(t=!1)}t&&!e?(w(),_()):(y(),Ve=!0,_e=p.INIT),b()}function ne(){switch(ve.debug("onConnectionClosed, state ",_e),t(),Ye&&Ye.stop(),Se.isPaused()&&U(),_e){case p.WAIT:K(),Se.continue();case p.SYNC:!function(){for(var e=0;e<be.length;e++)be[e].flush()}();case p.PLAY:k(),Ne=1,_e=p.STALL;break;case p.STALL:Ne>=ye.reconnects||0==Ne?(U(),t(),ke.showNotPlaying()):void 0==je&&(je=setTimeout(function(){ve.debug("do reconnect"),Ne++,je=void 0,k()},Ne<5?1e3:5e3));break;case p.RESET:case p.STOP:break;case p.SETUP:t(),ke.showNotPlaying();default:_e=p.INIT}}function se(e,i,r){xe=e,Re={},De={},We=[],Ye&&Ye.stop();var n=0,s=!!ye.audio_only,a=!!ye.video_only,o=[],u=void 0,c=[];for(n=0;n<xe.length;n++){Re[xe[n].stream]=n;var l=xe[n].stream_info;l.vtimescale&&(l.vtimescale=parseInt(l.vtimescale)),l.atimescale&&(l.atimescale=parseInt(l.atimescale));var h={name:xe[n].stream,bandwidth:l.bandwidth?l.bandwidth:0};if(l.resolution&&l.vcodec){var f=l.resolution.split("x");if(l.width=parseInt(f[0]),l.height=parseInt(f[1]),h.width=l.width,h.height=l.height,h.vcodec=l.vcodec,Se.isCodecSupported("video",l.vcodec)){h.video="supported";var d=f[1]+"p";De[d]||(De[d]=[]),De[d].push(n),l.renditionIdx=De[d].length-1,d!=ye.initial_resolution||void 0!=ye.initial_idx&&ye.initial_idx!=l.renditionIdx||(u=n),l.bwStr=l.bandwidth,l.bandwidth&&(l.bandwidth=parseInt(l.bandwidth)/1024);var v=0;for(v=0;v<We.length;v++){var m=xe[We[v].idx].stream_info;if(m.height>f[1]||m.height==f[1]&&m.bandwidth>l.bandwidth)break}o.splice(v,0,{name:d,idx:l.renditionIdx}),We.splice(v,0,{idx:n,bandwidth:l.bandwidth,rendition:f[1]})}else h.video="not supported"}l.acodec&&(h.acodec=l.acodec,h.audio=Se.isCodecSupported("audio",l.acodec)?"supported":"not supported"),c.push(h)}for(Ye&&o.length>1&&o.splice(0,0,{name:"Auto"}),ve.debug("Player renditions:",o),ve.debug("Ordered streams:",We),ke.qualities=o,p.STALL==_e&&Se.resetPosition(),n=0;n<be.length;n++){var g=void 0;g=be[n].inTransition()?Re[be[n].getTransitionStreamName()]:Re[be[n].getStreamName()],be[n].isVideo()?(Me=g,Le=void 0,void 0!==g&&xe[g].stream_info.vcodec?(p.STALL==_e&&be[n].reset(),s=!0):xe.length>0&&be[n].inTransition(!0)):be[n].isAudio()?(Ie=g,Fe=void 0,void 0!==g&&xe[g].stream_info.acodec?(p.STALL==_e&&be[n].reset(),a=!0):xe.length>0&&be[n].inTransition(!0)):ve.error("Got track of type other than video or audio!")}if(void 0!==u&&(s||(s=ce(xe[u],u)),a||(a=le(xe[u],u))),!s)for(n=0;n<xe.length&&!(s=ce(xe[n],n));n++);if(!a)for(n=0;n<xe.length&&!(a=le(xe[n],n));n++);for(n=be.length-1;n>=0;n--)be[n].inTransition()&&!be[n].isTransitionSupported()&&(be[n].isVideo()?(Pe=void 0,Me=void 0):(Be=void 0,Ie=void 0),be[n].close(),be.splice(n,1),ve.debug("onStatusReceived: Media source already contains given source buffer, it can not be filled, playback is not possible"),s=a=!1);Se.listBuffers();var b=[],_=!1,w="offset"in ye?ye.offset.toString():"0";for(n=0;n<be.length;n++){var S={type:be[n].type(),offset:w};ye.sync_buffer>0&&(r&&i?S.steady=!0:_||(_=!0,ve.error("Playback synchronization is set up but target Nimble Streamer either doesn't support it, or doesn't have \"sldp_add_steady_timestamps\" config parameter set up."))),be[n].inTransition()?(S.stream=be[n].getTransitionStreamName(),S.sn=be[n].transitionStreamId()):be[n].isOpen()&&(S.stream=be[n].getStreamName(),S.sn=be[n].id()),b.push(S)}if(J(),t(),s&&!ye.audio_only||a&&!ye.video_only){if(b.length>0){Ce=void 0,a||ke.setMuted(),ye.sync_buffer>0&&r&&i?(new Date(Math.round(parseInt(r)/1e3)),Qe=performance.now(),new Date,performance.timing.navigationStart,performance.now(),qe=parseInt(i),we.acceptSteadyTimestamps(!0)):(Qe=qe=void 0,Se.setSyncParams(void 0,void 0),we.acceptSteadyTimestamps(!1)),Ge=0,ae(b),_e=p.SYNC,ve.debug("[Director] Request streams:");for(var k=0;k<b.length;k++){var T="Stream #"+k+": "+b[k].stream+", sn: "+b[k].sn+", offset: "+b[k].offset;b[k].steady&&(T+=", steady: true"),ve.debug(T)}}}else y({hard:!0}),A()}function ae(e){we.send({command:"Play",streams:e})}function oe(e){for(var t=void 0,i=0;i<be.length;i++)if(e==be[i].id()){t=be[i];break}return t}function ue(e){for(var t=void 0,i=0;i<be.length;i++)if(be[i].inTransition()&&e==be[i].transitionStreamId()){t=be[i];break}return t}function ce(e,t){var i=!1,r=e.stream,n=e.stream_info;if(n.vcodec&&n.width&&n.height){var s={width:n.width,height:n.height,bandwidth:n.bandwidth,buffering:ye.buffering};"key_frame_alignment"in ye&&(s.sapAlignment=ye.key_frame_alignment),Pe?Pe.inTransition()&&(Pe.setTransitionParams({id:Oe,codec:n.vcodec,timescale:n.vtimescale,name:r,streamOptions:s}),Pe.isTransitionSupported()&&(Oe++,Le=t,Me=void 0,Pe.startTransition(),i=!0)):Se.isCodecSupported("video",n.vcodec)?((Pe=ge.create(Oe,"video",n.vcodec,n.vtimescale,"video_stream_id",r,s,Se,Ae)).attachToMSE(),be.push(Pe),Oe++,Me=t,Le=void 0,i=!0):ve.error("Video codec is not supported: ",n.vcodec)}else{var a=n.vcodec?"resolution":"video codec";ve.warn("Error: no valid "+a+" specified")}return i}function le(e,t){var i=!1,r=e.stream,n=e.stream_info;if(n.acodec){var s={buffering:ye.buffering};Be?Be.inTransition()&&(Be.setTransitionParams({id:Oe,codec:n.acodec,timescale:n.atimescale,name:r,streamOptions:s}),Be.isTransitionSupported()&&(Oe++,Fe=t,Ie=void 0,Be.startTransition(),i=!0)):Se.isCodecSupported("audio",n.acodec)?((Be=ge.create(Oe,"audio",n.acodec,n.atimescale,"audio_stream_id",r,s,Se,Ae)).attachToMSE(),be.push(Be),Oe++,Ie=t,Fe=void 0,i=!0):ve.error("Audio codec is not supported: ",n.acodec)}return i}function he(e,t){if(ve.debug("onInitSegmentReceived",e,_e),p.SYNC==_e){var i=oe(e);i&&i.isActual()?i.isInited()?i.isInitSegmentNew(t)&&(i.processInitSegment(t),i.setBufferDelay()):(i.initPresentation(t),i.onBaseDecodeTimeReady(fe),i.onSourceReady(de)):(i=ue(e))&&i.isActual()&&(i.isTransitionInited()?i.isTransitionInitNew(t)&&i.processTransitionInitSegment(t):(i.initTransition(t),i.onCancelStream(Y),i.onTransitionCompleted(q)))}else if(Ye&&Ye.isProbing(e))Ye.onProbeInitReceived();else if(p.PLAY==_e||p.WAIT==_e||p.ERROR==_e){var r=oe(e);r&&r.isActual()&&(p.ERROR==_e?r.populateInitDataBuffer(t):r.isInitSegmentNew(t)&&(r.processInitSegment(t),r.setBufferDelay()))}}function fe(e,t){(!Ce||t>Ce)&&(Ce=t);var i=!0;if(p.ERROR!=_e)for(var r=0;r<be.length;r++)if(be[r].isOpen()||be[r].inTransition()){i=!1;break}if(i)for(var n=0;n<be.length;n++)(be[n].isBuffering()||be[n].isBackingUp())&&be[n].setBaseDecodeTime(Ce)}function de(){for(var e=!0,t=0;t<be.length;t++)if(be[t].isBuffering()||be[t].inTransition()){e=!1;break}e&&(p.SYNC==_e?(_e=p.PLAY,ke.clearVideoElement(),Se.startPlayback(),G(),ze&&Pe&&Ye.start()):p.WAIT==_e&&(_e=p.PLAY,K(),Se.continue()),function(){if(Te){var e=Be?Be.getChannelCount():void 0;Te.start(ke.videoElement,e),ke.setVUMeterHandler(Te)}}())}function pe(e,t,i,r,n,s){if(p.SYNC==_e||p.PLAY==_e||p.WAIT==_e){var a=oe(e);if(a&&a.isActual()){qe&&0==Ge&&t&&(void 0===Pe||a.isVideo())&&(Ge=(s-qe)/1e3-(r+n)/a.timescale()*1e3,Se.setSyncParams(Ge+Qe,ye.sync_buffer));var o=a.processFrame(t,i,r,n);if(o.done){if(ye.muteable&&a.isVideo()&&void 0!==Be){var u=Ae.getMetrics(Be.id());u&&0==u.latest500msecRate()&&(Be.isInited()||(ve.debug("Audio is muted on start, push synthetic init segment"),Be.initPresentation(v,!0),Be.onBaseDecodeTimeReady(fe),Be.onSourceReady(de)),Be.processMute(r,a))}}else o.errors>=10&&ie()}else Ye&&Ye.isProbing(e)?Ye.onProbeDataReceived(t,i.byteLength,r):(a=ue(e))&&a.isActual()&&(a.processTransitionFrame(t,i,r,n).done||ie())}else if(p.ERROR==_e){var c=oe(e);c&&c.populateStartupBuffer(t,i,r,n)}}var ve=h.default.create(e,"Director"),me=new s.default(e),ge=new c.default(e),ye=void 0,be=[],_e=p.NULL,Ae=new u.default(e).create(),we=new a.default(e).create(Ae),Se=new o.default(e).create(),ke=void 0,Te=void 0,Ce=void 0,xe=[],Ee=void 0,Pe=void 0,Be=void 0,Me=void 0,Ie=void 0,Le=void 0,Fe=void 0,Re={},De={},Oe=0,Ue=void 0,Ve=!1,Ne=0,je=void 0,He=void 0,ze=!1,We=[],Ye=void 0,Qe=void 0,qe=void 0,Ge=0;this.initialize=function(r){if(function(e){var t={autoplay:!0,controls:!0,buffering:1e3,reconnects:10,adaptive_bitrate:!0,muteable:!1,log_level:"error",log_div:!1,fullscreen:!1,muted:!1,ios_failback_scheme:"sldp",ios_failback_secure_scheme:"sldps",ios_failback_app_url:"https://itunes.apple.com/us/app/sldp-player/id1238237026"};if((ye=Object.assign({},t,e)).bufferingSec=ye.buffering/1e3,void 0!==ye.width)if("parent"==ye.width)ye.width="100%";else{var i=parseInt(ye.width);isNaN(i)||(ye.width=i)}if(void 0!==ye.height)if("parent"==ye.height)ye.height="100%";else{var r=parseInt(ye.height);isNaN(r)||(ye.height=r)}ye.mobile=Se.isMobile(),void 0!==ye.pause_timeout&&(ye.pause_timeout=parseInt(ye.pause_timeout),isNaN(ye.pause_timeout)&&(ye.pause_timeout=void 0)),ye.latency_tolerance>0&&ye.latency_tolerance<=ye.buffering&&(ye.latency_tolerance=ye.buffering+100),void 0!==ye.sync_buffer&&(ye.sync_buffer=parseInt(ye.sync_buffer),isNaN(ye.sync_buffer)||(ye.sync_buffer<500&&(ye.sync_buffer=500),ye.latency_tolerance&&(ve.warn('Playback synchronization is set up. "latency_tolerance" parameter doesn\'t take any effect and is omitted.'),ye.latency_tolerance=0),ye.offset&&ve.warn('Playback synchronization is set up. "offset" parameter doesn\'t have any effect and is omitted.'),ye.buffering=ye.sync_buffer-50,ye.offset=ye.sync_buffer+3e3)),"object"===n(ye.vu_meter)&&null!==ye.vu_meter&&(ye.vu_meter.db_range=parseInt(ye.vu_meter.db_range),isNaN(ye.vu_meter.db_range)&&(ye.vu_meter.db_range=void 0),void 0===ye.vu_meter.mode&&void 0!==ye.vu_meter.container&&(ye.vu_meter.mode="peak"),void 0!==ye.vu_meter.mode&&void 0===ye.vu_meter.container&&(ye.vu_meter.mode=void 0,ve.warn("VU meter container is not specified, VU meter can't be created")),void 0===ye.vu_meter.type&&(ye.vu_meter.type="output"),"input"!==ye.vu_meter.type&&"output"!==ye.vu_meter.type&&(ve.warn('VU meter type "'+ye.vu_meter.type+"\" is not recognized, VU meter can't be created"),ye.vu_meter.type=void 0))}(r),h.default.setLevel(ye.log_level),h.default.setDiv(e,ye.log_div),f.default.init(e,ye.inform_ids),ve.debug("SLDP Player v2.17.1"),ye.vu_meter&&ye.vu_meter.mode&&ye.vu_meter.type&&void 0!==(Te=new d.default(e).create(ye.vu_meter.mode,ye.vu_meter.type,ye.vu_meter.db_range))&&(ye.vu_meter.container&&Te.setUI(ye.vu_meter.container),ye.vu_meter.initialized=!0),(ke=new l.default(ye)).onPlay=C,ke.onPause=R,ke.onPlayEvent=x,ke.onPauseEvent=D,ke.onVolumeSet=M,ke.onUserAction=B,ke.onQualityChange=V,ke.onResize=I,ke.onEnterPip=L,ke.onLeavePip=F,ke.qualities=[],!Se.isMediaSourceSupported())return ve.error("MediaSource is not supported"),t(),void ke.showNotSupported(Se.isIOS());_e=p.INIT,ye.adaptive_bitrate&&i(),m(),g();var s="latency_tolerance"in ye?ye.latency_tolerance:0;Se.setLatencyTolerance(s/1e3,ye.buffering/1e3),Se.init(ke.videoElement)},this.tgAudio=function(){we.stop_audio=!we.stop_audio},this.destroy=function(e){!function(e){Ye&&Ye.stop({hard:!0}),we.close(),ke&&ke.removePip(function(){A(!0),ke.destroy(),ke=void 0,Se.clear(),e&&e()}),w(),_();for(var t=0;t<be.length;t++)be[t].close();be=[],r(),ye=void 0}(e)},this.refreshVUMeterUI=function(){if(Te){var e=Be?Be.getChannelCount():void 0;Te.refreshUI(e)}}};t.default=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="d09GRgABAAAAAAlgAAsAAAAACRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIHG2NtYXAAAAFoAAAAfAAAAHy+M762Z2FzcAAAAeQAAAAIAAAACAAAABBnbHlmAAAB7AAABQQAAAUEPcGxumhlYWQAAAbwAAAANgAAADYRqpJfaGhlYQAABygAAAAkAAAAJAfCA81obXR4AAAHTAAAADAAAAAwJgABUmxvY2EAAAd8AAAAGgAAABoGwAVebWF4cAAAB5gAAAAgAAAAIAARAGFuYW1lAAAHuAAAAYYAAAGGmUoJ+3Bvc3QAAAlAAAAAIAAAACAAAwAAAAMDxwGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6ioDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEAGAAAAAUABAAAwAEAAEAIOmL6ZTqFuod6ifqKv/9//8AAAAAACDpi+mU6hXqHOon6ir//f//AAH/4xZ5FnEV8RXsFeMV4QADAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAIAAP/ABAADwAAGAA0AAAERJwcnNycDBxchERc3BACgwGDAoKDAoP5goMADwP5goMBgwKD9YMCgAaCgwAAAAAACABL/wAPuA8AAQgBeAAABJicmNjc2NycOASMiJy4BJyY1IxQGBwYHDgEnJicHHgEXFhcWBgcGBxc+ATMyFx4BFxYVMzQ2NzY3PgEXFhc3LgEnBSInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBgOmFAUEExgXI2UVMhsoIyQ1Dw/JDQ0VHx9IJyYjZRYlDRQEBRQXFyNlFTIaKCQjNQ8QyQ0NFB8fSSYmJGQVJQ3+WismJTkQEBAQOSUmKysmJTkQEBAQOSUmAV4jJiZJHx8Urw0ODxA1JCMpGTIXIxcXEwQFFK4NJBcjJiZIIB8UrgwODxA1IyQoGTEXIxcXEwQFFK8MJBdtEBA5JSYrKyYlORAQEBA5JSYrKyYlORAQAAADAAD/wAQAA8AAGwA3ADoAAAEiBw4BBwYVFBceARcWMzI3PgE3NjU0Jy4BJyYDIicuAScmNTQ3PgE3NjMyFx4BFxYVFAcOAQcGAw0BAgBqXV6LKCgoKIteXWpqXV6LKCgoKIteXWpWTExxICEhIHFMTFZWTExxICEhIHFMTNYBgP6AA8AoKIteXWpqXV6LKCgoKIteXWpqXV6LKCj8YCEgcUxMVlZMTHEgISEgcUxMVlZMTHEgIQKA4OAAAAQAAP/ABAADwAAbADcAOwA/AAABIgcOAQcGFRQXHgEXFjMyNz4BNzY1NCcuAScmAyInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBgEzESMBMxEjAgBqXV6LKCgoKIteXWpqXV6LKCgoKIteXWpWTExxICEhIHFMTFZWTExxICEhIHFMTP7qgIABAICAA8AoKIteXWpqXV6LKCgoKIteXWpqXV6LKCj8YCEgcUxMVlZMTHEgISEgcUxMVlZMTHEgIQJg/oABgP6AAAAAAAEAwABAA0ADQAACAAATCQHAAoD9gANA/oD+gAACAIAAQAOAA0AAAwAHAAATIREhASERIYABQP7AAcABQP7AA0D9AAMA/QAAAAMAAAAAA3ADfgAlAEIAXQAAJSImJyY0NzY3NjQnJicmNDc2MhcWFx4BFxYVFAcOAQcGBw4BIzEnIiYnJjQ3Njc2NCcmJyY0NzYyFxYXFhQHBgcOAQciJi8BIyImNRE0NjsBNz4BFx4BFREUBgcOAQLQChEHDg4xGBkZGDEODg4nDh8YFyAJCAgJIBcYHwcRCasJEgcODh4QDw8QHg4ODigOLBcWFhcsBxKOBgwF9nMNExMNc/YHEwkJCwsJAwaABwgOJw4yPT6CPT4yDicODw8eIyRNKiorKyoqTSQjHggHWwcHDigOHicmUCYnHg4oDg4OLDk4dDg5LAcH2wUE9xMNAUANE/cGBAMEEAr8wAoQBAEBAAIAAAAAA8ADfgAPACoAAAEVIycHIzU3JzUzFzczFQcBIiYvASMiJjURNDY7ATc+ARceARURFAYHDgEDwFVra1Vra1Vra1Vr/ksGDAX2cw0TEw1z9gcTCQkLCwkDBgFVVWtrVWtrVWtrVWv+QAUE9xMNAUANE/cGBAMEEAr8wAoQBAEBAAEAAAAAAABpEbtHXw889QALBAAAAAAA10Ym8QAAAADXRibxAAD/wAQAA8AAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAABAAAAQAAAAAAAAAAAAAAAAAAAAwEAAAAAAAAAAAAAAACAAAABAAAAAQAABIEAAAABAAAAAQAAMAEAACABAAAAAQAAAAAAAAAAAoAFAAeAD4AzgEsAZIBoAG2AkACggAAAAEAAAAMAF8ABAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(59),i(89),i(10),i(51),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(i(112)),a=r(i(12)),o=6,u=function(e){var t=a.default.create(e,"Metrics"),i=new s.default(e),r=function(){function e(t,r,n){var s,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,a="_interval500msecHandler",u=function(){if(this.isStarted()&&(this.timerCounter++,this.rate500msec=this.curRate500msec(),this.rate500msecTs1=this.rate500msecTs2=void 0,this.bytes500msec=0,this.timerCounter%2==0)){this.bw1sec.push(this.bytes1sec/128),this.rate1sec.push(this.curRate1sec()),this.rate1secTs1=this.rate1secTs2=void 0,this.bytes1sec=0,this.lb1sec.push(this.lowBuf1sec),this.lowBuf1sec=0;var e=this.buf1secCnt>0?this.bufLvl1sec/this.buf1secCnt:0;this.bl1sec.push(e),this.bufLvl1sec=0,this.buf1secCnt=0,120==this.timerCounter&&(this.timerCounter=0)}}.bind(this),a in s?Object.defineProperty(s,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[a]=u,this.id=t,this.type=r,this.timescale=n,this.startTime=void 0,this.lastBwTime=void 0,this.pickCustom=!1,this.bytesCustom=0,this.customStart=void 0,this.customEnd=void 0,this.rateCustomTs1=void 0,this.rateCustomTs2=void 0,this.latencySubt=void 0,this.framesCount=0,this.bytesTotal=0,this.bytes1sec=0,this.bytes500msec=0,this.rate500msec=0,this.rate500msecTs1=void 0,this.rate500msecTs2=void 0,this.rate1secTs1=void 0,this.rate1secTs2=void 0,this.rateTotalTs1=void 0,this.rateTotalTs2=void 0,this.lowBufTotal=0,this.lowBuf1sec=0,this.bufLvlTotal=0,this.bufTotalCnt=0,this.bufLvl1sec=0,this.buf1secCnt=0,this.lastBufLvl=0,this.bw1sec=i.create(o),this.rate1sec=i.create(o),this.lb1sec=i.create(o),this.bl1sec=i.create(o),this.interval500msec=void 0,this.timerCounter=0}var r,s;return r=e,(s=[{key:"clearCounters",value:function(){this.bytesCustom=0,this.customStart=void 0,this.customEnd=void 0,this.rateCustomTs1=void 0,this.rateCustomTs2=void 0,this.stopTime=void 0,this.lastBwTime=void 0,this.latencySubt=void 0,this.framesCount=0,this.bytesTotal=0,this.bytes1sec=0,this.bytes500msec=0,this.rate500msec=0,this.rate500msecTs1=void 0,this.rate500msecTs2=void 0,this.rate1secTs1=void 0,this.rate1secTs2=void 0,this.rateTotalTs1=void 0,this.rateTotalTs2=void 0,this.lowBufTotal=0,this.lowBuf1sec=0,this.bufLvlTotal=0,this.bufTotalCnt=0,this.bufLvl1sec=0,this.buf1secCnt=0,this.lastBufLvl=0,this.timerCounter=0}},{key:"destroy",value:function(){this._clear500msecInterval(),this.bw1sec.clear(),this.rate1sec.clear(),this.bl1sec.clear(),this.lb1sec.clear()}},{key:"stop",value:function(){this.enabled=!1,this.stopTime=performance.now(),this._clear500msecInterval()}},{key:"start",value:function(){this.enabled||(this.enabled=!0,this.clearCounters(),this.startTime=performance.now(),this.interval500msec=setInterval(this._interval500msecHandler,500))}},{key:"isStarted",value:function(){return this.enabled}},{key:"isReady",value:function(){return void 0===this.enabled}},{key:"startCustom",value:function(){this.pickCustom=!0,this.customStart=performance.now(),this.customStop=void 0,this.bytesCustom=0,this.rateCustomTs1=void 0,this.rateCustomTs2=void 0}},{key:"stopCustom",value:function(){this.pickCustom=!1,this.customStop=performance.now()}},{key:"customRangeBandwidth",value:function(){var e=(this.customStop-this.customStart)/1e3;return isNaN(e)&&t.error("customRange error",this.customStart,this.customStop),this.bytesCustom/(128*e)}},{key:"customRangeRate",value:function(){var e=(this.rateCustomTs2-this.rateCustomTs1)/this.timescale;return 0==e||isNaN(e)?0:this.bytesCustom/(128*e)}},{key:"reportBandwidth",value:function(e,t){if(this.isStarted()){var i=performance.now();if(void 0!==t){var r=i/1e3-t/this.timescale;(void 0==this.latencySubt||r<this.latencySubt)&&(this.latencySubt=r),this.framesCount++}this.bytes500msec+=e,this.bytes1sec+=e,this.bytesTotal+=e,this.pickCustom&&(this.bytesCustom+=e,void 0===this.rateCustomTs1&&(this.rateCustomTs1=t),this.rateCustomTs2=t),this.lastBwTime=i,void 0===this.rate500msecTs1&&(this.rate500msecTs1=t),this.rate500msecTs2=t,void 0===this.rate1secTs1&&(this.rate1secTs1=t),this.rate1secTs2=t,void 0===this.rateTotalTs1&&(this.rateTotalTs1=t),this.rateTotalTs2=t}}},{key:"reportLowBuffer",value:function(){this.isStarted()&&(this.lowBufTotal++,this.lowBuf1sec++)}},{key:"reportBufLevel",value:function(e){this.isStarted()&&(this.bufLvlTotal+=e,this.bufLvl1sec+=e,this.lastBufLvl=e,this.bufTotalCnt++,this.buf1secCnt++)}},{key:"avgBandwidth",value:function(){var e=0;if(void 0!==this.startTime){var t=((void 0!==this.stopTime?this.stopTime:performance.now())-this.startTime)/1e3;t>0&&(e=this.bytesTotal/(128*t))}return e}},{key:"avgRate",value:function(){var e=(this.rateTotalTs2-this.rateTotalTs1)/this.timescale;return 0==e||isNaN(e)?0:this.bytesTotal/(128*e)}},{key:"curRate1sec",value:function(){var e=(this.rate1secTs2-this.rate1secTs1)/this.timescale;return 0==e||isNaN(e)?0:this.bytes1sec/(128*e)}},{key:"curRate500msec",value:function(){var e=(this.rate500msecTs2-this.rate500msecTs1)/this.timescale;return 0==e||isNaN(e)?0:this.bytes500msec/(128*e)}},{key:"latestBandwidth",value:function(){var e=void 0;if(this.bw1sec.length()>0)e=this.bw1sec.get(-1);else if(void 0!==this.lastBwTime){var t=((void 0!==this.stopTime?this.stopTime:performance.now())-this.lastBwTime)/1e3;t>0&&(e=this.bytes1sec/(128*t))}return void 0===e&&(e=0),e}},{key:"latestRate",value:function(){var e=this.curRate1sec();if(this.rate1sec.length()>0){var t=this.rate1sec.get(-1);e=0==e?t:(e+t)/2}return e}},{key:"latest500msecRate",value:function(){var e=this.curRate500msec(),t=this.rate500msec;return t>0&&(e=0==e?t:(e+t)/2),e}},{key:"latestLowBufferCount",value:function(){for(var e=this.lowBuf1sec,t=0;t<2;t++)this.lb1sec.length()>t&&(e+=this.lb1sec.get(-1*(t+1)));return e}},{key:"latestBufLevel",value:function(){var e=this.buf1secCnt>0?this.bufLvl1sec/this.buf1secCnt:void 0;if(this.bl1sec.length()>0){var t=this.bl1sec.get(-1);e=void 0!==e?(e+t)/2:t}return void 0===e&&(e=0),e}},{key:"lastBufLevel",value:function(){return this.lastBufLvl}},{key:"_clear500msecInterval",value:function(){this.interval500msec&&(clearInterval(this.interval500msec),this.interval500msec=void 0),this.timerCounter=0}},{key:"_printMetrics",value:function(){t.debug("Buffer level of "+this.id+" track:"),t.debug("1 sec:  ["+this.bl1sec.join(", ")+"]"),t.debug("Total:  ["+this.blTotal.join(", ")+"]"),t.debug("Bandwidth:"),t.debug("1 sec:  ["+this.bw1sec.join(", ")+"]"),t.debug("Total:  ["+this.bwTotal.join(", ")+"]"),t.debug("Low buffer:"),t.debug("1 sec:  ["+this.lb1sec.join(", ")+"]"),t.debug("Total:  ["+this.lbTotal.join(", ")+"]")}}])&&n(r.prototype,s),e}();return{create:function(e,t,i){return new r(e,t,i)}}};t.default=u},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(i(158)),a=r(i(12)),o=function(e){var t=a.default.create(e,"MetricsManager"),i=new s.default(e),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metricsList={}}var r,s;return r=e,(s=[{key:"add",value:function(e,r,n){void 0!==this.metricsList[e]&&t.error("metric for track ID "+e+" already exists");var s=i.create(e,r,n);return this.metricsList[e]=s,s}},{key:"remove",value:function(e){var i=this.metricsList[e];return i?i.destroy():t.error("remove: "+e+" not found"),this.metricsList[e]=void 0,i}},{key:"isReadyToStart",value:function(e){return this.metricsList[e]&&this.metricsList[e].isReady()}},{key:"run",value:function(e){this.metricsList[e]?this.metricsList[e].start():t.error("run: "+e+" not found")}},{key:"stop",value:function(e){this.metricsList[e]?this.metricsList[e].stop():t.error("stop: no metric found for "+e+" track")}},{key:"reportBandwidth",value:function(e,t,i){this.metricsList[e]&&this.metricsList[e].reportBandwidth(t,i)}},{key:"reportLowBuffer",value:function(e){this.metricsList[e]?this.metricsList[e].reportLowBuffer():t.error("report low buffer: No metric found for "+e+" track")}},{key:"reportBufLevel",value:function(e,i){this.metricsList[e]?this.metricsList[e].reportBufLevel(i):t.error("report buffer level: No metric found for "+e+" track")}},{key:"getMetrics",value:function(e){if(this.metricsList[e])return this.metricsList[e];t.error("get metric: No metric found for "+e+" track")}}])&&n(r.prototype,s),e}();return{create:function(){return new r}}};t.default=o},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}i(58),i(86),i(14),i(59),i(210),i(87),i(69),i(149),i(17),i(150),i(91),i(71),i(72),i(51),i(221),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(12)),s=r(i(112)),a=r(i(92)),o=r(i(178)),u=function(e){function t(){function t(){if(void 0==Te.enter&&(Te.enter=performance.now(),Te.initStart=!O),void 0==Te.time&&L){Te.time=L.currentTime;var e=L.buffered.length;e>0&&(Te.bufTime=L.buffered.end(e-1)-L.currentTime)}Te.exit=void 0,Te.ready=!1}function n(){Te.stopBuffer=!1,Te.audioOnly=!1,Te.forcePlay=!1,Te.bufTime=void 0,Te.seekInd=void 0,Te.seekTo=void 0,Te.enter=void 0,Te.time=void 0,Te.exit=void 0,Te.ready=!1}function s(){i.debug("_clearInitSwitchData"),Ce.activated=!1,Ce.from=void 0,Ce.to=void 0,Ce.aTime=void 0,Ce.lastCurTime=void 0}function u(e,t){var i="vp8"==t||"vp9"==t?"webm":"mp4";return ye&&"mp4a.40.34"==t?e+"/"+i+'; codecs="mp3"':e+"/"+i+'; codecs="'+t+'"'}function c(e){return performance.timing.navigationStart+e}function l(){void 0!==K&&(clearTimeout(K),K=void 0)}function h(){void 0!==X&&(clearTimeout(X),X=void 0)}function f(){void 0!==J&&(i.debug("_cancelSeekTimer"),clearTimeout(J),J=void 0)}function d(){f(),i.debug("setSeekTimer"),J=setTimeout(p,5e3)}function p(){i.error("error seek timeout!"),j=!1,J=void 0,ee()}function v(e,t){var i=void 0;void 0==t&&(t=_());for(var r=0;r<t.length;r++)if(e<t[r][1]&&t[r][1]-t[r][0]>=ve){var n=t[r][0];i=e>=n?t[r][1]-e>=ve?e:t[r][1]-ve:n;break}return void 0==i&&(i=t[t.length-1][1]-ve)<t[t.length-1][0]&&(i=t[t.length-1][0]),m(i),i}function m(e){L.currentTime!=e&&(i.debug("seek",e,L.currentTime),L.currentTime=e)}function g(e,t){t<0&&(e-=.001);var i=e.toString(),r=i.indexOf("."),n=-1==r?i.length:r+4,s=i.substr(0,n),a=isNaN(s)?0:s;return parseFloat(a)}function y(){if(L&&L.buffered.length>0){i.debug("_seekToBufferedStart");for(var e=0;e<F.length;e++)F[e].buffered.length>0&&i.debug(F[e].stream_id+": "+F[e].buffered.start(0),F[e].buffered.end(0));try{A()&&b(),Te.background&&void 0==Te.enter&&t(),O=!0}catch(e){i.debug("seek to buffered start failed: ",e)}}}function b(){U.playbackTime=L.currentTime}function _(){var e=[],t=F.length;if(t>1){for(var i=[],r=0;r<t;r++)for(var n=0;n<F[r].buffered.length;n++)i.push([F[r].buffered.start(n),0]),i.push([F[r].buffered.end(n),1]);i.sort(function(e,t){return e[0]-t[0]});for(var s=0,a=0;a<i.length;a++)0==i[a][1]?t==++s&&e.push([i[a][0],void 0]):t-1==--s&&(e[e.length-1][1]=i[a][0])}else if(t>0)for(var o=0;o<F[0].buffered.length;o++)e.push([F[0].buffered.start(o),F[0].buffered.end(o)]);return e}function A(){var e=L.currentTime,t=!1,r=_(),n=r.length;if(n>0){e<r[0][0]&&(e=r[0][0],i.debug("Current position is behind the start of the first buffered range. Seek to the start."),t=!0);for(var s=1;s<n;s++)if(e>=r[s-1][1]&&e<r[s][0]&&r[s][1]-r[s][0]>=ve){e=r[s][0],i.debug("Current position is between "+(s-1)+" and "+s+" . Seek to the start of "+s),t=!0;break}if(t)m(e),l();else if(!de)if(Y.value==L.currentTime&&Y.value!==U.playbackTime){Y.count+=1;var a=(performance.now()-Y.time)/1e3;if(Y.count>10&&a>2){var o=L.currentTime+a,u=P(o);void 0===u&&(u=o),i.debug("Stuck on ".concat(Y.value,". Seek to ").concat(u)),v(u,r),l(),t=!0}}else Y.time=performance.now(),Y.value=L.currentTime,Y.count=1}return t}function w(){var e=L.currentTime;if(W&&q&&(e+=(performance.now()-q)/1e3),void 0===N||e-N>30)for(var t=0;t<F.length;t++){var i=F[t];if(i.buffered.length>0){var r=e-30;r-i.buffered.start(0)>60&&(i.removeRange(0,Math.round(r)),N=e)}}}function S(e){var t=L.play();if(void 0!==t){var i=!e.recover;t.then(function(){z=!0}).catch(function(e){i&&re()})}else we&&!ke&&(e.gesture?ke=!0:e.recover||re())}function k(){i.debug("Seek start"),O&&(j=!0,d())}function T(){if(i.debug("Seek end"),setTimeout(function(){j=!1},1e3),f(),Te.forcePlay){var e=L.play();void 0!==e&&e.catch(function(e){i.error("_onSeekEnd play() error:",e)}),Te.forcePlay=!1}}function C(e){var t=function t(){if(!V){for(var i=0;i<F.length;i++)F[i].removeEventListener("updateend",t);e()}};if(V)for(var i=0;i<F.length;i++)F[i].addEventListener("updateend",t);else e()}function x(){var t,r=F.length;if(r>0){for(var n=0;n<r;n++)if(F[n].closed)return;if(O){if(W)w();else if(!Te.background){var o=L.currentTime;if(H){i.debug("onProgress buffered in progress");var u=o+(performance.now()-G)/1e3;te(u,o)}else{var c=ne(o);if(a.default.display(e,"latency",c.toFixed(4)),j||V||L.ended||void 0!=Te.exit)i.debug("onProgress nothing called, _seekInProgress "+j+", _removeInProgress "+V+", ended "+L.ended);else{var l=_();if(l.length>0){var h=R?R.buffered:L.buffered,f=h.length,d=!1;if(Ce.activated&&(Ce.from>o&&(o>Ce.lastCurTime?Ce.lastCurTime=o:o==Ce.lastCurTime&&(Ce.from=Ce.lastCurTime)),void 0!==Ce.to)){var p=h.start(f-1);i.debug("onProgress initswitch data to = ".concat(Ce.to,", curTime = ").concat(o,", bufRangeStart = ").concat(p,", videoBufEnd = ").concat(h.end(f-1))),p!=Ce.to&&p>=o&&(p<Ce.to?Ce.to-p<2&&(Ce.to=p):p-Ce.to<2?Ce.to=p:f>1&&h.end(f-2)-Ce.to<le&&(Ce.to=p));var b=Ce.to-o;Ce.from<=o&&(Ce.to<=h.end(f-1)-.9*le||b<.1)&&(b>0&&(Ce.to==p?(i.debug("initswitch seek to range start "+p+" from "+o,h.start(f-1),h.end(f-1)),m(p)):(i.debug("initswitch seek to "+Ce.to+" from "+o,h.start(f-1),h.end(f-1)),v(Ce.to,l)),d=!0),s())}if(d||void 0===K&&!be||(d=A()),!d&&void 0==Ce.to){var x=(t=0,pe.length>0&&(t=pe[0],2==pe.length&&pe[1]<t&&(t=pe[1])),t);if(void 0==X&&!de)if(ce>0){if(x>ce&&x>le){var B=o+x-le;if(void 0==he||he<B-5){var M=E(B);M&&(i.debug("Adjust latency",M,x,M-o),he=v(M,l),se(o,he))}else i.debug("Latency is not adjusted, try next time");d=!0}}else if(me.bufferSize>0){var I=performance.now();if(I-me.lastZapTime>4e3){var D=(I-me.timeShift-me.bufferSize)/1e3;if(D>o){var N=Math.min(le,500),Y=o+x-N,q=h.end(f-1)-N;Y>q&&(Y=q),Y<=o?D=o:Y<D&&(D=Y)}var J=D-o,Z=Math.abs(J),ee=!1;Z>.1?ee=!0:Z>.04&&(me.integralDist+=J,i.debug("Integral distance for zapping",me.integralDist),void 0===me.start&&(me.start=I),I-me.start>15e3?(me.start=I,me.integralDist=J):Math.abs(me.integralDist)>=4&&Z>=.02&&(ee=!0,i.debug("zapping by integral decision",me.integralDist))),ee&&(me.integralDist=0,me.start=void 0,Z>15?D=v(E(D),l):(me.lastZapTime=I,D=function(e){var t=L.currentTime,r=e-t;if(0==L.currentTime)L.currentTime=e,t=e;else{var n,s=r+1,a=1;r>0?r>15?(s=16,a=r/15):a=g(r/((s=.25*(n=Math.ceil(s/.25)))-1)):s<0?(a=-r,s=0):(0===(n=Math.floor(s/.25))&&(n=1),a=g(r/((s=.25*n)-1),-1)),i.debug("zapping with rate",s,a,r>0?r:1+r,s>1?(s-1)*a:1-s*a),L.playbackRate=s,k(),xe.start(function(){L.playbackRate=1,T()},1e3*a),t=e}return t}(D)),d=!0)}}if(!d&&void 0==Ce.to&&(he=void 0,R&&L.getVideoPlaybackQuality&&!de)){var ie=L.getVideoPlaybackQuality().totalVideoFrames;if(ie==Q.frames&&0!==Q.time&&U.playbackTime!==o){if(0==Q.seekCount){Q.count++;var re=(performance.now()-Q.time)/1e3;if(Q.count>10&&re>3&&(re>=x&&(re=x-.1),re>0)){var ae=o+re,oe=P(ae);void 0===oe&&(oe=ae),i.debug("Decoder freeze on ".concat(Q.frames,". Seek to ").concat(oe,".")),v(oe,l),Q.seekCount++,d=!0}}}else Q.time=performance.now(),Q.frames=ie,Q.count=1,Q.seekCount=0}}d||w(),$(o,c),be&&z&&!W&&L.paused&&(i.debug("Force Safari to play from onProgress"),S({}))}}}}}else C(function(){y()})}}function E(e){for(var t=void 0,i=fe.length()-1;i>=0;i--){var r=fe.get(i);if(r<e-.2*le)break;if(r<e+.1*le){t=r;break}}return t}function P(e){for(var t=void 0,i=fe.length()-1;i>=0;i--){var r=fe.get(i);if(r<=L.currentTime)break;if(r<e+.1){t=r;break}}return t}function B(){L.removeEventListener("canplay",B),M(1),i.debug("canplay")}function M(e){i.debug("setPlaybackRate",e,L.readyState),L.readyState<=2?L.addEventListener("canplay",B):L.playbackRate=e}var I=void 0,L=void 0,F=[],R=void 0,D=void 0,O=!1,U={},V=!1,N=void 0,j=!1,H=!1,z=!1,W=!1,Y={value:0,count:0,time:0},Q={frames:0,count:0,time:0,seekCount:0},q=void 0,G=void 0,J=void 0,K=void 0,X=void 0,Z=void 0,$=void 0,ee=void 0,te=void 0,ie=void 0,re=void 0,ne=void 0,se=void 0,ae=void 0,oe=!1,ue=void 0,ce=-1,le=0,he=void 0,fe=r.create(10),de=!1,pe=[],ve=0,me={timeShift:0,bufferSize:0,start:void 0,integralDist:0,lastZapTime:0},ge=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,ye="undefined"!=typeof InstallTrigger,be=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),_e=!!document.documentMode,Ae=!_e&&!!window.StyleMedia,we=((!!window.chrome&&!!window.chrome.webstore||ge)&&window.CSS,/Android|Opera Mini/i.test(navigator.userAgent)),Se=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ke=!1,Te={enter:void 0,exit:void 0,time:void 0,bufTime:void 0,background:!1,stopBuffer:!1,vThreshold:1200,aThreshold:3600,ready:!1,seekTo:void 0,seekInd:void 0,audioOnly:!1,initStart:!1},Ce={activated:!1,from:void 0,to:void 0},xe=new o.default;document.addEventListener("visibilitychange",function(){i.debug("visibilitychange",document.hidden),document.hidden?(t(),xe.interrupt()):Te.background&&(W?n():function(){var e=performance.now();if(Te.stopBuffer)Te.ready=!0;else if(!Te.ready&&L&&L.buffered.length>0){var t=(e-Te.enter)/1e3,i=L.currentTime-Te.time;if(t>2*i){var r=L.buffered.end(L.buffered.length-1),s=r-L.currentTime;s>Te.bufTime&&(Te.ready=!0)}}Te.ready?(Te.exit=e,Te.audioOnly=void 0==R&&void 0!==D):n()}()),Te.background=document.hidden}),this.startLogging=function(e){oe=!1,void 0===ue&&(ue={}),void 0===ue[e]&&(ue[e]={times:[],prevTime:0,sumTime:0,stamps:[],gaps:[],thresh:60,avg:void 0})},this.setPositionControl=function(){l(),K=setTimeout(function(){l()},3e4)},this.transitOn=function(){de=!0},this.transitOff=function(){de=!1,ce>0&&(h(),X=setTimeout(function(){h()},5e3))},this.setLatencyTolerance=function(e,t){(ce=e)>0&&ce<3.5&&(_e||Ae)&&(ce=3.5),le=t},this.setLowBufferBorder=function(e){var t=e+.1;t>ve&&(ve=t)},this.setCurrentBufferLevel=function(e,t){2==F.length?pe["v"==e[0]?0:1]=t:pe[0]=t},this.isMediaSourceSupported=function(){return"MediaSource"in window&&!!window.MediaSource},this.isMobile=function(){return we},this.isIOS=function(){return Se},this.isCodecSupported=function(e,t){var i=!1;if(this.isMediaSourceSupported()){if((_e||Ae)&&("mp4a.40.34"==t||"mp4a.6B"==t||"mp4a.6B"==t))return!1;i=MediaSource.isTypeSupported(u(e,t))}return i},this.init=function(e){Z&&B?((I=new MediaSource).addEventListener("sourceopen",Z),(L=e).addEventListener("progress",x),L.addEventListener("timeupdate",x),L.addEventListener("seeking",k),L.addEventListener("seeked",T),L.src=URL.createObjectURL(I),!L.getVideoPlaybackQuality&&"webkitDecodedFrameCount"in L&&(L.getVideoPlaybackQuality=function(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount}})):i.error("Error: necessary callbacks are not defined.")},this.listBuffers=function(){i.debug("listBuffers",F)},this.createSourceBuffer=function(e,t,r,a){function o(e,t){e.updating?e.addEventListener("updateend",function i(){e.updating||(e.removeEventListener("updateend",i),t())}):t()}var c=I.addSourceBuffer(u(e,t));return c.mode="segments",c.initSegment=void 0,c.segments=[],c.initPositions=[],c.sapPositions=[],c.appendedCount=0,c.bufferLength=0,c.fBufferLength=0,c.timescale=r,c.isVideo="video"==e,c.isVideo?R=c:D=c,c.setTimestampOffset=function(e){var t=this;o(t,function(){t.timestampOffset=e})},c.filterOut=function(e){if(void 0!==e)for(var t=this.segments.length,i=0;i<t;i++)if(this.segments[i].ts>=e){var r=t-i;this.segments.splice(i,r),this.adjustPositions(i,!0),i<this.appendedCount&&(this.appendedCount=i);break}},c.getBufferingLength=function(){return this.bufferLength},c.setBufferingLength=function(e){this.bufferLength=e,this.fBufferLength=e},c.pushInit=function(e,t){var r={init:!0,data:e};if(this.isVideo&&!t){var n=this.segments.length;if(n>0){var s=void 0;this.segments[n-1].ts?s=this.segments[n-1].ts:n>1&&this.segments[n-2].ts&&(s=this.segments[n-2].ts),void 0!==s&&(Ce.from=s/this.timescale,Ce.activated=!0,i.debug("initswitch set from = ".concat(Ce.from)))}}this.segments.push(r),this.initPositions.push(this.segments.length-1),this.appendNextSegment()},c.pushSegment=function(e,t,r){var n=this.isVideo?Te.vThreshold:Te.aThreshold;if(Te.background&&!Te.stopBuffer&&this.segments.length>n&&(i.debug("Throttle segments buffer",n),Te.stopBuffer=!0),!Te.background||!Te.stopBuffer){var s={data:e,ts:t[0],sap:r[0]};Te.ready&&(this.isVideo||Te.audioOnly)&&r[0]&&(s.starter=!0,Te.ready=!1),this.segments.push(s),this.isVideo&&s.sap&&this.sapPositions.push(this.segments.length-1),this.appendNextSegment()}oe&&this.log(t)},c.appendNextSegment=function(){var e=this;o(e,function(){e.closed||e.appendSegment()})},c.appendSegment=function(){if(this.appendedCount<this.segments.length){var e=this.segments[this.appendedCount];!function(e,t){var r=!0;try{e.appendBuffer(t)}catch(t){var n=e.isVideo?"Video frame ":"Audio frame ";i.error(n+"append exception!",t),r=!1}return r}(this,e.data)?(i.debug("Append "+(e.init?"init ":"")+"segment error, reloading"),ee()):(this.appendedCount++,e.init?this.onInitAppended(e):(this.processThrottling(e),this.onSegmentAppended(e)))}},c.onInitAppended=function(e){this.initSegment=e.data,this.appendedCount>1&&(this.segments.splice(0,this.appendedCount-1),this.adjustPositions(this.appendedCount-1),this.appendedCount=1)},c.processThrottling=function(e){if(e.starter)Te.seekTo=this.buffered.end(this.buffered.length-1),Te.seekInd=Te.seekTo+le;else if(Te.seekInd){var t=this.isVideo||Te.audioOnly,r=this.buffered.end(this.buffered.length-1);if(t&&r>=Te.seekInd){var s=!0;if(2==F.length){for(var a=0,o=0,u=0;u<F.length;u++)if(!F[u].isVideo){var c=F[u].buffered.length;a=F[u].buffered.start(c-1),o=F[u].buffered.end(c-1);break}Te.seekTo<a&&(Te.seekTo=a,Te.seekInd=Te.seekTo+le),(Te.seekInd>o||Te.seekInd>r)&&(s=!1)}s&&(i.debug("Recover from throttling, jump to",Te.seekTo),m(Te.seekTo),n(),we&&(Te.forcePlay=!0),Te.initStart&&(b(),Te.initStart=!1))}}},c.onSegmentAppended=function(e){if(Ce.activated&&!Ce.to&&void 0!==Ce.from&&e.sap){var t=e.ts/this.timescale,r=this.buffered.length>0?this.buffered.end(this.buffered.length-1):0;if(t>=Ce.from)if(this.isVideo){Ce.to=t,Ce.lastCurTime=L.currentTime;var n=Ce.lastCurTime-r;i.debug("initSwitch onSegmentAppended v = ".concat(this.isVideo,", to = ").concat(Ce.to,", cur = ").concat(Ce.lastCurTime,", end = ").concat(r,", timeDiff = ").concat(n)),n>0&&(void 0!==Ce.aTime?(Ce.to=Ce.aTime,i.debug("initSwitch onSegmentAppended set aTime = ".concat(Ce.aTime))):D&&D.buffered.length>0?(i.debug("initSwitch onSegmentAppended set audioBuffer end = ".concat(Ce.aTime)),Ce.to=D.buffered.end(D.buffered.length-1)):(i.debug("initSwitch onSegmentAppended set euristics = ".concat(Ce.aTime)),Ce.to+=L.currentTime-Ce.from),i.debug("initSwitch onSegmentAppended seek back to ".concat(Ce.to)),n=Ce.to-Ce.lastCurTime,Math.abs(n)<.5&&(i.debug("initSwitch onSegmentAppended seek because int = ".concat(Ce.to-Ce.lastCurTime)),m(Ce.to),s()))}else void 0===Ce.aTime&&(Ce.aTime=t)}if(this.isVideo&&e.sap){var a=e.ts/this.timescale,o=this.buffered.length>0?this.buffered.end(this.buffered.length-1):0;a<o&&(a=o),fe.push(a)}if(this.segments.length>this.bufferLength)if(this.isVideo){var u=0;this.sapPositions.length>1&&this.sapPositions[1]<=this.appendedCount&&this.sapPositions[1]<=this.segments.length-this.bufferLength&&(u=this.sapPositions[1]),u>0&&(this.segments.splice(0,u),this.appendedCount-=u,this.adjustPositions(u)),this.onVideoSegmentPushed(this.appendedCount)}else{var c=this.segments.length-this.bufferLength;c>this.appendedCount&&(c=this.appendedCount),1==c?this.segments.shift():this.segments.splice(0,c),this.appendedCount-=c,this.adjustInitPositions(c)}},c.adjustPositions=function(e,t){var i=0;if(t){for(i=this.sapPositions.length-1;i>=0&&!(this.sapPositions[i]<e);i--);this.sapPositions.length=i+1}else for(i=0;i<this.sapPositions.length;i++)this.sapPositions[i]>=e?this.sapPositions[i]-=e:(this.sapPositions.shift(),i--);this.adjustInitPositions(e,t)},c.adjustInitPositions=function(e,t){var i=0;if(t){for(i=this.initPositions.length-1;i>=0&&!(this.initPositions[i]<e);i--);this.initPositions.length=i+1}else for(i=0;i<this.initPositions.length;i++)this.initPositions[i]>=e?this.initPositions[i]-=e:(this.initPositions.shift(),i--)},c.isVideo&&(c.onVideoSegmentPushed=function(e){D&&(D.bufferLength=Math.round(D.bufLenRatio*e))}),c.getSegments=function(){for(var e=void 0,t=0;t<this.initPositions.length;t++)if((e=this.initPositions[t])==this.appendedCount)t+1==this.initPositions.length&&(e=void 0,this.initSegment=void 0);else if(e>this.appendedCount)break;var i=0;if(void 0!==e)if(this.initSegment=this.segments[e].data,this.isVideo){for(var r=0;r<this.sapPositions.length;r++)if(this.sapPositions[r]>e){i=this.sapPositions[r];break}}else i=e+1;return{init:this.initSegment,segments:this.segments,start:i}},c.removeAll=function(){this.abort(),this.initSegment=void 0,this.segments=[],this.sapPositions=[],this.initPositions=[],this.appendedCount=0,this.buffered.length>0&&this.removeRange(this.buffered.start(0),this.buffered.end(this.buffered.length-1))},c.removeRange=function(e,t){var r=this;o(r,function(){i.debug("Remove started",e,t,L.currentTime,r.buffered.length),V=!0,r.remove(e,t),o(r,function(){i.debug("Remove ended"),V=!1})})},oe&&(c.log=function(e){for(var t=ue[this.stream_id],r=0;r<e.length;r++){var n=t.stamps.length>0?e[r]-t.stamps[t.stamps.length-1]:0,s=0;if(t.times.length>0){var a=performance.now();s=a-t.prevTime,t.prevTime=a}else t.prevTime=performance.now();if(void 0===t.avg)for(var o=1;o<t.stamps.length;o++){var u=t.stamps[o]-t.stamps[o-1];if(u>0){t.avg=u;break}}if(t.stamps.length==t.thresh){if(i.debug(this.stream_id+" processed "+t.thresh+" frames"),0==t.gaps.length)t.sumTime>t.avg*t.thresh*1.1&&(i.debug("frames come slow!!!",t.sumTime,t.avg*t.thresh),i.debug("intervals: ["+t.times.join(", ")+"]"));else{for(var c=[],l=0;l<t.gaps.length;l++)c.push("{val: "+t.gaps[l].val+", idx: "+t.gaps[l].idx+"}");i.debug("Gaps: ["+c.join(", ")+"], avgDuration "+t.avg),i.debug("Stamps: ["+t.stamps.join(", ")+"]"),t.sumTime>t.avg*t.thresh*1.1&&i.debug("Frames come slow!!!",t.sumTime,t.avg*t.thresh),i.debug("Intervals: ["+t.times.join(", ")+"]")}t.times=[],t.sumTime=0,t.stamps=[],t.gaps=[]}t.times.push(s),t.sumTime+=s,t.stamps.push(e[r]),Math.abs(n-t.avg)>1&&t.gaps.push({val:n,idx:t.stamps.length-1})}}),c.addEventListener("error",function(e){i.error("SourceBuffer Error",e,this.stream_id)}),c.stream_id=a,F.push(c),c},this.startPlayback=function(e){i.debug("startPlayback buffered ",L.buffered.length),L.buffered.length>0&&i.debug("video element buffer",L.buffered.start(0),L.buffered.end(0)),D&&R&&(D.bufLenRatio=2*D.fBufferLength/R.fBufferLength),(0==L.currentTime||W)&&S(e||{})},this.setSyncParams=function(e,t){me.timeShift=e,me.bufferSize=t,me.integralDist=0,me.start=void 0,me.lastZapTime=0,i.debug("setSyncParams",e,t)},this.continue=function(){i.debug("continue buffered ",L.buffered.length),L.buffered.length>0&&i.debug("video element buffer",L.buffered.start(0),L.buffered.end(0)),M(1),j&&d(),Q.count=0,Q.time=performance.now(),G=void 0,H=!1},this.wait=function(){xe.interrupt(),M(0),f(),G=performance.now(),H=!0,ae()},this.callbacks=function(e){Z=e.onSourceOpen,$=e.onProgress,ee=e.onCrash,te=e.onWaitUpdate,ie=e.onPlayStarted,re=e.onPlayFailed,ne=e.onLatencyCalc,se=e.onLatencySeek,ae=e.onLowBuffer},this.resetPosition=function(){i.debug("reset position"),f(),l(),h(),L&&0!==L.currentTime&&(L.currentTime=0),O=!1,U={},Y={value:0,count:0,time:0},Q={frames:0,count:0,time:0,seekCount:0},N=void 0,q=void 0,G=void 0,he=void 0,z=!1,W=!1,H=!1,V=!1,j=!1,de=!1,pe=[],fe.clear();for(var e=0;e<F.length;e++)F[e].initSegment=void 0,F[e].segments=[],F[e].sapPositions=[],F[e].initPositions=[],F[e].appendedCount=0,F[e].bufferLength=0,F[e].fBufferLength=0;s(),n()},this.handlePause=function(){L&&!W&&z&&(W=!0,z=!1,q=performance.now(),xe.stop()&&(j=!1),f(),L.pause(),i.debug("Paused at: "+c(q)))},this.handleEnterPip=function(){},this.handleLeavePip=function(){L&&L.paused&&!W&&S({})},this.isPaused=function(){var e=void 0;return L&&(e=W),e},this.isSeeking=function(){var e=void 0;return L&&(e=j||Te.background||void 0!==Te.seekTo||void 0!==Ce.to),e},this.handlePlay=function(e){if(L&&!z&&(z=!0,W=!1,S({gesture:e}),q)){var t=performance.now(),r=t-q;i.debug("Play at: "+c(t)),i.debug("Going to seek by "+r/1e3+" seconds.");var n=Math.ceil(L.currentTime+r/1e3),s=_();if(s.length>0){var a=s[s.length-1][1];i.debug("Calculated position "+n+". Buffer end is "+a),a<n&&(i.debug("Seek to buffer end "+a+" instead of "+n),n=a-ve)}var o=P(n);void 0===o&&(o=n),v(o)}},this.handlePlayEvent=function(){O||C(function(){y(),ie()})},this.handlePauseEvent=function(){},this.clear=function(){if(!be)for(var e=0;e<F.length;e++)try{I.removeSourceBuffer(F[e])}catch(e){i.error("Failed to remove source buffer:",e)}xe.stop(),this.resetPosition(),F=[],R=void 0,D=void 0,L&&(L.removeEventListener("progress",x),L.removeEventListener("timeupdate",x),L.removeEventListener("seeking",k),L.removeEventListener("seeked",T),URL.revokeObjectURL(L.src),L.removeAttribute("src"),L.load(),L=void 0),I&&(I.removeEventListener("sourceopen",Z),I=void 0),Z=void 0,$=void 0,ee=void 0,i.debug("cleared source buffers and video element")}}var i=n.default.create(e,"MSE"),r=new s.default(e);return{create:function(){return new t}}};t.default=u},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(111)),s=r(i(115)),a={name:"SLDP Player",composer:new n.default("test").create(),WSUtils:new s.default("test").create()};t.default=a},function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(10),i(90),i(51),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,s=(n=i(12))&&n.__esModule?n:{default:n},a=function(e){var t=s.default.create(e,"Prober"),i=function(){function e(i,r,n,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!1,this.period=s,this.stream=r,this.timescale=n,this.streamId=parseInt("F0",16)+i%16,this.metricsManager=a,this.metricsManager.add(this.streamId,"probe",n),t.debug("constructor: "+r+", timescale: "+n+", period: "+s)}var i,n;return i=e,(n=[{key:"destroy",value:function(){this.metricsManager.remove(this.streamId),this._clearBufCheckInterval()}},{key:"id",value:function(){return this.streamId}},{key:"streamName",value:function(){return this.stream}},{key:"start",value:function(){this.enabled=!0,this.durations=[],this.firstTimestamp=void 0,this.lastTimestamp=void 0,this.expectedEndTimestamp=void 0,this.startProbeCallback(this,this.period+1)}},{key:"isEnabled",value:function(){return this.enabled}},{key:"stop",value:function(){this.isEnabled()&&(this.enabled=!1,this.cancelProbeCallback(this),this.metricsManager.stop(this.streamId),this._clearBufCheckInterval())}},{key:"receiveInit",value:function(){if(!this.bufCheckInterval&&(this.initTime=performance.now(),this.initReceivedCallback(),this.period>=1e3)){var e=this;this.bufCheckInterval=setInterval(function(){if(e.firstTimestamp){var t=(e.lastTimestamp-e.firstTimestamp)/e.timescale-(performance.now()-e.initTime)/1e3;e.metricsManager.reportBufLevel(e.streamId,t),t<=0&&e.metricsManager.reportLowBuffer(e.streamId)}else e.metricsManager.reportBufLevel(e.streamId,0),e.metricsManager.reportLowBuffer(e.streamId)},500)}}},{key:"receiveFrame",value:function(e,i,r){if(void 0===this.firstTimestamp?(t.debug("receiveFrame: firstTimestamp "+r),this.firstTimestamp=r,this.expectedEndTimestamp=this.period*this.timescale/1e3+r):this.durations.push(r-this.lastTimestamp),this.lastTimestamp=r,r+this._findDuration()>this.expectedEndTimestamp){t.debug("receiveFrame: lastTimestamp "+r);var n=(r-this.firstTimestamp)/this.timescale-(performance.now()-this.initTime)/1e3;this.metricsManager.reportBufLevel(this.streamId,n),n<=0&&this.metricsManager.reportLowBuffer(this.streamId),this.stop(),this.probeFinishedCallback()}}},{key:"_findDuration",value:function(){var e=0,t=0,i={};for(t=0;t<this.durations.length;t++){var r=this.durations[t];i[r]=i[r]>0?i[r]+1:1}for(t in i)if(i[t]>0){var n=parseInt(t);n>0&&(e=n)}return e}},{key:"_clearBufCheckInterval",value:function(){this.bufCheckInterval&&(clearInterval(this.bufCheckInterval),this.bufCheckInterval=void 0)}},{key:"callbacks",set:function(e){this.startProbeCallback=e.onStartProbe,this.cancelProbeCallback=e.onCancelProbe,this.initReceivedCallback=e.onInitReceived,this.probeFinishedCallback=e.onProbeFinished}}])&&r(i.prototype,n),e}();return{create:function(e,t,r,n,s){return new i(e,t,r,n,s)}}};t.default=a},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset,right:t.right+pageXOffset}}i(86),i(89),i(70),i(10),i(150),i(90),i(51),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(i(155)),u=r(i(164)),c=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"_handleClicks",function(e){if(this.doubleClickHandler){this.clicks++;var t=this;1==this.clicks&&setTimeout(function(){1==t.clicks?t.singleClickHandler&&t.singleClickHandler(e):t.doubleClickHandler&&t.doubleClickHandler(e),t.clicks=0},300)}else this.singleClickHandler&&this.singleClickHandler(e)}.bind(this)),s(this,"_handleEnterPip",function(e){e.pictureInPictureWindow,this.pipMode=!0,this._onEnterPip&&this._onEnterPip()}.bind(this)),s(this,"_handleLeavePip",function(e){this.pipMode=!1,this._onLeavePip&&this._onLeavePip()}.bind(this)),s(this,"_videoElementClick",function(e){var t=!1;this.mobile_ctrl?e.target!=this.mobile_ctrl&&e.target!=this.mobile_ctrl_btn||(this.mobile_ctrl_visible?t=!0:this._showControlsForPeriod(4)):e.target==this.video_element&&(t=!0),t&&this._playPauseBtnClick(e)}.bind(this)),s(this,"_playPauseBtnClick",function(e){this._isUserActionAcceptable()&&(this.play_pause_button.classList.contains("sldp-icon-play")?(this.video_element&&this.hackPlayByPauseOnClick&&(this.video_element.pause(),this.hackPlayByPauseOnClick=!1),this._handlePlay(!0)):this._handlePause()),e.stopPropagation()}.bind(this)),s(this,"_handlePlayEvent",function(e){this.deactivated||(this.pipMode?this._handlePlay():this._onPlayEventCallback&&this._onPlayEventCallback())}.bind(this)),s(this,"_handlePauseEvent",function(e){this.deactivated||(this.pipMode?this._handlePause():this._onPauseEventCallback&&this._onPauseEventCallback())}.bind(this)),s(this,"_configBtnClick",function(e){this.cfg_dialog?(this.cfg_dialog.remove(),delete this.cfg_dialog,this._showControlsForPeriod(2)):(this.cfg_dialog=document.createElement("ul"),this.cfg_dialog.className="sldp_cfg_dialog",this._updateCfgDialog(),this.player_wrapper.insertBefore(this.cfg_dialog,this.control_bar),this._showControlsForPeriod("infinite")),e.stopPropagation()}.bind(this)),s(this,"_volumeBtnClick",function(e){var t=0;e.currentTarget.classList.contains("sldp-icon-volume-medium")?this.video_element.prev_volume=this.volumeController.volume:(void 0==this.video_element.prev_volume&&(0!=this.volumeController.volume?this.video_element.prev_volume=this.volumeController.volume:this.video_element.prev_volume=1),t=100*this.video_element.prev_volume),this._adjustVolume(t),this._showControlsForPeriod(2),e.stopPropagation()}.bind(this)),s(this,"_expandBtnClick",function(e){var t=this.player_wrapper;this._isFullscreenMode()?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),e&&e.stopPropagation()}.bind(this)),s(this,"_orientationchangeHandler",function(e){this._isFullscreenMode()&&this._updateDimensions()}.bind(this)),s(this,"_fullscreenchangeHandler",function(e){this._isFullscreenMode()?(this._stashCurrentSize(),this._updateDimensions()):(this._applyCurrentSize(),this._resizeHandler())}.bind(this)),s(this,"_resizeHandler",function(e){this._onResize&&this._onResize(),this._updateLoadingIndicator()}.bind(this)),this.settings=t,this.settings.video_element=void 0,this.settings.ar=void 0,this.pipMode=!1,this.can_play=this.settings.autoplay,this.hackPlayByPauseOnClick=!this.settings.autoplay,this.settings.video_element)this.video_element=document.getElementById(this.settings.video_element),this.storageId=this.settings.video_element,this.quality_ar=[],this.settings.controls=!1,this.volumeController=new u.default(this.video_element,this.settings.vu_meter),this.volumeController.muted=!!this.settings.muted,this._createResizeHandler(),this._createPipHandlers(),this._createPlayPauseHandlers();else if(this.container=document.getElementById(this.settings.container),this.storageId=this.settings.container,this.container){this.quality_ar=[],this.css=new o.default,this._create_player_wrapper();var i=this.settings.audio_only?"audio":"video";this.video_element=document.createElement(i),this.volumeController=new u.default(this.video_element,this.settings.vu_meter),this.volumeController.muted=!!this.settings.muted,this._setSplashScreen(),this.settings.audio_only||void 0!=this.settings.height&&(this.video_element.style.height="100%","number"==typeof this.settings.height?this.player_wrapper.style.height="".concat(t.height,"px"):this.player_wrapper.style.height=this.settings.height),void 0!==this.settings.width&&(this.video_element.style.width="100%","number"==typeof this.settings.width?this.player_wrapper.style.width="".concat(t.width,"px"):this.player_wrapper.style.width=this.settings.width),this.player_wrapper.appendChild(this.video_element),this._createHandlers(),this.settings.controls&&(this._create_controls(),this.settings.audio_only&&this.settings.audio_title&&this._addMessage(this.settings.audio_title),this._createLoadingIndicator()),this.settings.fullscreen&&!this.settings.audio_only&&this._expandBtnClick()}this._nullifyContainerLineHeight()}var t,i;return t=e,(i=[{key:"removePip",value:function(e){var t=this;this.pipMode?(this.deactivated=!0,document.exitPictureInPicture().then(function(){t.pipMode=!1,e()})):e()}},{key:"destroy",value:function(){if(this._revertContainerLineHeight(),this.container){for(this._removeHandlers();this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.play_pause_button=void 0,this.player_wrapper=void 0,this.mobile_ctrl_btn=void 0,this.mobile_ctrl=void 0,this.css.destroy()}else this._removeResizeHandler(),this._removePipHandlers(),this.video_element=void 0;this.volumeController.destroy(),this.volumeController=void 0,this.quality_ar=[],this.stashed=!1}},{key:"showNotSupported",value:function(e){if(this._removeSplashScreen(),this.container?(this._removeHandlers(),this.settings.controls&&(this._removePlayerControls(),this.mobile_ctrl&&(this.mobile_ctrl.style.opacity="0",this.mobile_ctrl_visible=!1))):(this._removeResizeHandler(),this._removePipHandlers()),e){this.settings.video_element||(this.video_element.style.display="none"),this._addMessage("In order to play this media you will need an application from App Store",'<a href="'+this.settings.ios_failback_app_url+'" style="vertical-align: middle;display:inline-block;overflow:hidden;background:url(http://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:202px;height:60px;background-size: 202px 60px;margin-right: 10px;"></a>');var t=this.settings.stream_url;if(t&&t.length>0){var i=t.substring(0,5),r=t.indexOf("?")>0;"ws://"==i?t=this.settings.ios_failback_scheme+"://"+t.substring(5):"wss:/"==i&&(t=this.settings.ios_failback_secure_scheme+"://"+t.substring(6)),this.settings.sync_buffer>0&&(t+=(r?"&":"?")+"steady=true&buffering="+this.settings.sync_buffer),window.location=t}}else this._addMessage("MediaSource is not supported in current browser")}},{key:"showNotPlaying",value:function(){this._removeSplashScreen(),this.settings.controls&&this._togglePlayButton(!0),this._addMessage("No playable sources found"),this._showControlsForPeriod("infinite")}},{key:"clearVideoElement",value:function(){this.settings.audio_only||(this._finishLoadingIndicator(),this._removeSplashScreen(),this._removeMessage())}},{key:"onPlaybackStarted",value:function(){this._removeSplashScreen()}},{key:"onPlaybackFinished",value:function(){this._setSplashScreen()}},{key:"adjustHeight",value:function(){this.video_element&&this.player_wrapper&&"100%"===this.settings.height&&this.container.offsetHeight>0&&(this.player_wrapper.style.height="".concat(this.container.offsetHeight,"px"))}},{key:"adjustX",value:function(e,t,i,r){}},{key:"adjustY",value:function(e,t,i){}},{key:"refresh",value:function(){if(this.cfg_dialog){for(;this.cfg_dialog.firstChild;)this.cfg_dialog.removeChild(this.cfg_dialog.firstChild);this._updateCfgDialog()}}},{key:"triggerPlay",value:function(){return this._handlePlay()}},{key:"triggerPause",value:function(e){this._handlePause(e)}},{key:"triggerVolume",value:function(e){this.volumeController&&(e>100?e=100:e<0&&(e=0),this._adjustVolume(e))}},{key:"getVolume",value:function(){if(this.volumeController)return 100*this.volumeController.volume}},{key:"setMuted",value:function(){this.volumeController&&(this.volumeController.muted=!0,this._adjustVolume(100*this.volumeController.volume,!0))}},{key:"setVUMeterHandler",value:function(e){this.volumeController&&this.volumeController.setVUMeter(e)}},{key:"unmuteVUMeter",value:function(){this.volumeController&&this.volumeController.activateVUMeter()}},{key:"_nullifyContainerLineHeight",value:function(){if(!this.settings.audio_only){var e=this.settings.video_element?this.video_element.parentElement:this.container;e&&(this.prevParentLineHeight=e.style.lineHeight,e.style.lineHeight=0)}}},{key:"_revertContainerLineHeight",value:function(){if(!this.settings.audio_only){var e=this.settings.video_element?this.video_element.parentElement:this.container;e&&(e.style.lineHeight=this.prevParentLineHeight||"")}}},{key:"_getContainerWidth",value:function(){return this.container?this.container.offsetWidth:this.video_element.parentElement.offsetWidth}},{key:"_getContainerHeight",value:function(){return this.container?this.container.offsetHeight:this.video_element.parentElement.offsetHeight}},{key:"_stashCurrentSize",value:function(){this.stashed||(this.video_element.pw_width_prev=this.player_wrapper.style.width,this.video_element.pw_height_prev=this.player_wrapper.style.height,this.video_element.v_width_prev=this.video_element.style.width,this.video_element.v_height_prev=this.video_element.style.height,this.settings.ar||(this.video_element.v_margin_prev=this.video_element.style.margin,this.video_element.style.margin=""),this.stashed=!0)}},{key:"_applyCurrentSize",value:function(){this.stashed&&(this.video_element.style.width=this.video_element.v_width_prev,this.video_element.style.height=this.video_element.v_height_prev,this.player_wrapper.style.width=this.video_element.pw_width_prev,this.player_wrapper.style.height=this.video_element.pw_height_prev,this.settings.ar||(this.video_element.style.margin=this.video_element.v_margin_prev),this.stashedContWidth=this.currentContWidth,this.stashedContHeight=this.currentContHeight,this.stashed=!1)}},{key:"_processContainerSize",value:function(){if(this.cW=this.settings.width,this.cH=this.settings.height,this._isFullscreenMode())this.cW=screen.width,this.cH=screen.height,this._stashCurrentSize();else{if(this.stashed)return!1;"100%"===this.settings.width&&(this.stashedContWidth?(this.cW=this.stashedContWidth,this.stashedContWidth=void 0):(this.cW=this._getContainerWidth(),this.cW||(this.cW=this.player_wrapper?this.player_wrapper.offsetWidth:this.video_element.offsetWidth),this.currentContWidth=this.cW)),"100%"===this.settings.height&&(this.stashedContHeight?(this.cH=this.stashedContHeight,this.stashedContHeight=void 0):(this.cH=this._getContainerHeight(),this.cH||(this.cH=this.player_wrapper?this.player_wrapper.offsetHeight:this.video_element.offsetHeight),this.currentContHeight=this.cH)),this.settings.width||this.settings.height||(this.cW=this.video_element.offsetWidth)}return!0}},{key:"_create_player_wrapper",value:function(){var e=document.createElement("div");if(e.className=this.settings.audio_only?"sldp_player_wrp sldp_player_wrp_audio":"sldp_player_wrp sldp_player_wrp_video",this.settings.controls&&!this.settings.audio_only){if(this.settings.autoplay&&this._hideControlsAfterPeriod(2),this.settings.mobile){this.mobile_ctrl=document.createElement("div"),this.mobile_ctrl.className="sldp_mobile_ctrl",this.mobile_ctrl_btn=document.createElement("div");var t=this.settings.autoplay?"sldp-icon-pause-o":"sldp-icon-play-o";this.mobile_ctrl_btn.className="sldp_mobile_ctrl_icon "+t,this.mobile_ctrl.appendChild(this.mobile_ctrl_btn),this.mobile_ctrl_visible=!0,e.appendChild(this.mobile_ctrl)}e.onmousemove=function(e){this.mobile_ctrl||this.settings.audio_only||(this.mouseClientX=e.clientX,this.mouseClientY=e.clientY,this._showControlsForPeriod(2))}.bind(this),e.onmouseout=function(){this.mobile_ctrl||this.settings.audio_only||(this.mouseClientX=this.mouseClientY=void 0,this._hideControls())}.bind(this)}this.container.appendChild(e),this.player_wrapper=e}},{key:"_hideControls",value:function(){if(this.control_bar&&!this.settings.audio_only&&this.play_pause_button&&this.play_pause_button.classList.contains("sldp-icon-pause")){var e=!1;if(!this.mobile_ctrl&&void 0!==this.mouseClientX&&void 0!==this.mouseClientY){var t=this.control_bar.getBoundingClientRect();t.left<this.mouseClientX&&this.mouseClientX<t.right&&t.top<this.mouseClientY&&this.mouseClientY<t.bottom&&(e=!0)}e?this._hideControlsAfterPeriod(4):this.cfg_dialog||(this.control_bar.style.opacity="0",this.mobile_ctrl&&(this.mobile_ctrl.style.opacity="0",this.mobile_ctrl_visible=!1))}}},{key:"_hideControlsAfterPeriod",value:function(e){this.settings.controls&&(this.control_hide_delay&&(clearTimeout(this.control_hide_delay),this.control_hide_delay=void 0),this.settings.audio_only||(this.control_hide_delay=setTimeout(function(){this._hideControls()}.bind(this),1e3*e)))}},{key:"_showControls",value:function(){this.control_bar&&(this.control_bar.style.opacity="1",this.mobile_ctrl&&(this.mobile_ctrl.style.opacity="1",this.mobile_ctrl_visible=!0))}},{key:"_showControlsForPeriod",value:function(e){this.settings.controls&&(this._showControls(),this.control_hide_delay&&(clearTimeout(this.control_hide_delay),this.control_hide_delay=void 0),"infinite"===e||this.settings.audio_only||(this.control_hide_delay=setTimeout(function(){this._hideControls()}.bind(this),1e3*e)))}},{key:"_addMessage",value:function(e,t){if(this.container){this._removeMessage();var i=document.createElement("div");i.className="sldp_message_wrp";var r=document.createElement("div");if(this.settings.audio_only?(i.className=this.settings.controls?"sldp_message_wrp":"sldp_message_wrp sldp_message_wrp_audio_noctrl",r.className="sldp_message"):(i.className="sldp_message_wrp sldp_message_wrp_video",r.className="sldp_message sldp_message_pad"),r.innerHTML=e,t){var n=document.createElement("div");n.className="ios_button",n.innerHTML=t,r.appendChild(n)}i.appendChild(r),this.player_wrapper.appendChild(i)}}},{key:"_removeMessage",value:function(){if(this.container){var e=this.player_wrapper.getElementsByClassName("sldp_message_wrp")[0];e&&this.player_wrapper.removeChild(e)}}},{key:"_create_controls",value:function(){var e=document.createElement("div");if(e.className=this.settings.audio_only?"sldp_cbar sldp_cbar_audio":"sldp_cbar sldp_cbar_video",!this.settings.audio_only){var t=document.createElement("div");t.className="sldp_expand_btn",t.classList.add("sldp_btn"),t.classList.add("sldp-icon-enlarge"),t.onclick=this._expandBtnClick,e.appendChild(t),this.expand_button=t;var i=document.createElement("div");i.className="sldp_config_btn",i.classList.add("sldp_btn"),i.classList.add("sldp-icon-cog"),i.onclick=this._configBtnClick,e.appendChild(i),this.config_button=i}var r=document.createElement("div");r.className="sldp_play_pause_btn",r.classList.add("sldp_btn"),r.classList.add(this.settings.autoplay?"sldp-icon-pause":"sldp-icon-play"),r.onclick=this._playPauseBtnClick,e.appendChild(r);var n=document.createElement("div");n.className="sldp_volume_wrp "+(this.settings.mobile?"sldp_volume_mobile":"sldp_volume_desktop"),this.settings.mobile||this.settings.audio_only||(n.onmouseover=function(e){this.volume_slider&&(this.volume_slider.style.display="block")}.bind(this),n.onmouseout=function(e){this.volume_slider&&(this.volume_slider.style.display="none")}.bind(this)),e.appendChild(n);var s=document.createElement("div");s.className="sldp_volume_btn",s.classList.add("sldp_btn"),s.classList.add("sldp-icon-volume-medium"),s.onclick=this._volumeBtnClick,n.appendChild(s),this.player_wrapper.appendChild(e),this.volume_button=s,this.volume_wrapper=n,this.play_pause_button=r,this.control_bar=e,this.settings.mobile||this._create_volume_slider(),this._setStoredVolume()}},{key:"_create_volume_slider",value:function(){var e=document.createElement("div");e.className="sldp_volume_slider_wrp";var t=document.createElement("div");t.className="sldp_volume_slider",this.thumb=document.createElement("div"),this.thumb.className="sldp_volume_thumb",t.appendChild(this.thumb),e.appendChild(t),e.onmousedown=function(e){this.video_element.prev_volume=this.volumeController.volume;var i=a(t),r=a(this.thumb),n=e.pageX-(r.right-r.left)/2-i.left;n<0?n=0:n>100&&(n=100),this._adjustVolume(n),e.stopPropagation()}.bind(this),this.thumb.onmousedown=function(e){this.video_element.prev_volume=this.volumeController.volume;var i=a(this.thumb),r=e.pageX-i.left,n=a(t);return document.onmousemove=function(e){var i=e.pageX-r-n.left;i<0?i=0:i>100&&(i=100);var s=t.offsetWidth-this.thumb.offsetWidth;0==s&&(s=100),i>s&&(i=s),this._adjustVolume(i)}.bind(this),document.onmouseup=function(e){document.onmousemove=document.onmouseup=null},e.stopPropagation(),!1}.bind(this),this.thumb.ondragstart=function(){return!1},this.volume_wrapper.appendChild(e),this.volume_slider=t,this.settings.audio_only||(this.volume_slider.style.display="none")}},{key:"_setStoredVolume",value:function(){var e=100;"localStorage"in window&&(e=parseInt(window.localStorage.getItem("sldp_player_volume_"+this.storageId)),isNaN(e)&&(e=100)),this._adjustVolume(e,!0)}},{key:"_adjustVolume",value:function(e,t){this.thumb&&(t&&this.volumeController.muted?this.thumb.style.left="0px":this.thumb.style.left=e+"px");var i=e/100;this.volumeController.volume!==i&&(this.volumeController.volume=i,!t&&this._onVolumeSet&&this._onVolumeSet(e)),0==e||t&&this.volumeController.muted?(this.volumeController.muted=!0,this.volume_button&&(this.volume_button.classList.remove("sldp-icon-volume-medium"),this.volume_button.classList.add("sldp-icon-volume-mute"))):(this.volumeController.muted=!1,this.volume_button&&(this.volume_button.classList.remove("sldp-icon-volume-mute"),this.volume_button.classList.add("sldp-icon-volume-medium"))),this.settings.controls&&"localStorage"in window&&window.localStorage.setItem("sldp_player_volume_"+this.storageId,e)}},{key:"_setSplashScreen",value:function(){this.container&&this.settings.splash_screen&&(this.video_element.style["background-image"]="url('".concat(this.settings.splash_screen,"')"),this.video_element.style["background-size"]="cover")}},{key:"_removeSplashScreen",value:function(){this.container&&this.settings.splash_screen&&(this.video_element.style["background-image"]="",this.video_element.style["background-size"]="",this.video_element.style.background="#000")}},{key:"_removePlayerControls",value:function(){var e=this.player_wrapper.getElementsByClassName("sldp_cbar")[0];e&&this.player_wrapper.removeChild(e);var t=this.player_wrapper.getElementsByClassName("sldp_indicator")[0];t&&this.player_wrapper.removeChild(t)}},{key:"_handlePlay",value:function(e){var t=!1;return this.can_play&&(this.settings.audio_only&&this.settings.audio_title?this._addMessage(this.settings.audio_title):this._removeMessage(),this._togglePlayButton(!1),this._onPlayCallback&&(this._onPlayCallback(e),this._showControlsForPeriod(.5),t=!0)),t}},{key:"_handlePause",value:function(e){this._togglePlayButton(!0),!e&&this._onPauseCallback&&this._onPauseCallback(),this._showControlsForPeriod("infinite")}},{key:"_togglePlayClass",value:function(e,t,i,r){if(e){var n=t?r:i,s=t?i:r;e.classList.remove(n),e.classList.add(s)}}},{key:"_togglePlayButton",value:function(e){this._togglePlayClass(this.play_pause_button,e,"sldp-icon-play","sldp-icon-pause"),this._togglePlayClass(this.mobile_ctrl_btn,e,"sldp-icon-play-o","sldp-icon-pause-o")}},{key:"_updateCfgDialog",value:function(){for(var e=this,t=0;t<this.quality_ar.length;t++)!function(t){var i=e.quality_ar[t].name,r=e.quality_ar[t].idx,n=document.createElement("li");i==e.cur_quality.name&&r==e.cur_quality.idx&&(i="&#10003 "+i),n.innerHTML=i,n.onclick=function(e){this._onQualityChangeCallback&&(this._onQualityChangeCallback(i,r),this.cfg_dialog.remove(),delete this.cfg_dialog,this._hideControlsAfterPeriod(.5)),e.stopPropagation()}.bind(e),e.cfg_dialog.appendChild(n)}(t)}},{key:"_isFullscreenMode",value:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}},{key:"_updateDimensions",value:function(){this.video_element.style.width=screen.width,this.video_element.style.height=screen.height,this.player_wrapper.style.width="".concat(screen.width,"px"),this.player_wrapper.style.height="".concat(screen.height,"px"),this._resizeHandler()}},{key:"_createHandlers",value:function(){this.clicks=0,this.singleClickHandler=this.settings.controls?this._videoElementClick:void 0,this.doubleClickHandler=void 0,this.settings.audio_only||(this.settings.mobile||(this.doubleClickHandler=this._expandBtnClick),this._createFullscreenHandler(),this._createResizeHandler(),this._createPipHandlers(),this._createOrientationChangeHandler()),this._createClicksHandler(),this._createPlayPauseHandlers()}},{key:"_removeHandlers",value:function(){this.settings.audio_only||(this._removeFullscreenHandler(),this._removeResizeHandler(),this._removePipHandlers(),this._removeOrientationChangeHandler()),this.singleClickHandler=void 0,this.doubleClickHandler=void 0,this._removeClicksHandler()}},{key:"_createClicksHandler",value:function(){this.player_wrapper.addEventListener("click",this._handleClicks,!1)}},{key:"_removeClicksHandler",value:function(){this.player_wrapper.removeEventListener("click",this._handleClicks)}},{key:"_createPlayPauseHandlers",value:function(){this.video_element.addEventListener("play",this._handlePlayEvent,!1),this.video_element.addEventListener("pause",this._handlePauseEvent,!1)}},{key:"_removePlayPauseHandlers",value:function(){this.video_element.removeEventListener("play",this._handlePlayEvent),this.video_element.removeEventListener("pause",this._handlePauseEvent)}},{key:"_createResizeHandler",value:function(){window.addEventListener("resize",this._resizeHandler,!1)}},{key:"_removeResizeHandler",value:function(){window.removeEventListener("resize",this._resizeHandler)}},{key:"_createPipHandlers",value:function(){window.addEventListener("enterpictureinpicture",this._handleEnterPip,!1),window.addEventListener("leavepictureinpicture",this._handleLeavePip,!1)}},{key:"_removePipHandlers",value:function(){window.removeEventListener("enterpictureinpicture",this._handleEnterPip),window.removeEventListener("leavepictureinpicture",this._handleLeavePip),this.pipMode&&(document.exitPictureInPicture(),this.pipMode=!1)}},{key:"_createOrientationChangeHandler",value:function(){window.addEventListener("orientationchange",this._orientationchangeHandler,!1)}},{key:"_removeOrientationChangeHandler",value:function(){window.removeEventListener("orientationchange",this._orientationchangeHandler)}},{key:"_createFullscreenHandler",value:function(){document.addEventListener("webkitfullscreenchange",this._fullscreenchangeHandler,!1),document.addEventListener("mozfullscreenchange",this._fullscreenchangeHandler,!1),document.addEventListener("fullscreenchange",this._fullscreenchangeHandler,!1),document.addEventListener("MSFullscreenChange",this._fullscreenchangeHandler,!1)}},{key:"_removeFullscreenHandler",value:function(){document.removeEventListener("webkitfullscreenchange",this._fullscreenchangeHandler),document.removeEventListener("mozfullscreenchange",this._fullscreenchangeHandler),document.removeEventListener("fullscreenchange",this._fullscreenchangeHandler),document.removeEventListener("MSFullscreenChange",this._fullscreenchangeHandler)}},{key:"_finishLoadingIndicator",value:function(){this.indicator&&this.indicator.quickRelease()}},{key:"_updateLoadingIndicator",value:function(){this.indicator&&this.indicator.updatePosition()}},{key:"_createLoadingIndicator",value:function(){var e=document.createElement("div");e.className="sldp_indicator",this.player_wrapper.appendChild(e),this.indicator={ui:this,fps:60,element:e,counter:0,percentage:100,fullWidth:1,releaseDuration:.5,start:function(){this.interval&&clearInterval(this.interval),this.counter=0,this.percentage=0,this.element.style.opacity=1,this.fullWidth=this.ui.player_wrapper.offsetWidth,this.interval=setInterval(this.onInterval.bind(this),1e3/this.fps)},release:function(){this.interval&&clearInterval(this.interval),this.counter=0,this.percentagePerFrame=(100-this.percentage)/(this.releaseDuration*this.fps),this.opacityPerFrame=.9/(this.releaseDuration*this.fps),this.interval=setInterval(this.onReleaseInterval.bind(this),1e3/this.fps)},quickRelease:function(){if(this.percentage<100){var e=.1;45<this.percentage&&(e=(100-this.percentage)/(this.percentagePerFrame*this.fps)),e>=.1&&(e=this.releaseDuration,this.releaseDuration=.1,this.release(),this.releaseDuration=e)}},onInterval:function(){this.counter+=1,this.percentage=8*Math.log(this.counter),this.adjustElementWidth(),45<this.percentage&&this.release()},onReleaseInterval:function(){this.percentage+=this.percentagePerFrame,100<=this.percentage&&(this.percentage=100,clearInterval(this.interval)),this.adjustElementWidth();var e=parseFloat(this.element.style.opacity)||1;this.element.style.opacity=""+(e-this.opacityPerFrame)},adjustElementWidth:function(){this.element.style.width=parseInt(.01*this.fullWidth*this.percentage)+"px"},updatePosition:function(){this.percentage<100&&(this.fullWidth=this.ui.player_wrapper.offsetWidth,this.adjustElementWidth())}},this.settings.autoplay&&this.indicator.start()}},{key:"videoElement",get:function(){return this.video_element}},{key:"qualities",set:function(e){this.quality_ar=e,this.cur_quality=e[0]}},{key:"currentQuality",set:function(e){this.cur_quality=e}},{key:"onPlay",set:function(e){this._onPlayCallback=e}},{key:"onPlayEvent",set:function(e){this._onPlayEventCallback=e}},{key:"onPause",set:function(e){this._onPauseCallback=e}},{key:"onPauseEvent",set:function(e){this._onPauseEventCallback=e}},{key:"canPlay",set:function(e){this.can_play=!!e}},{key:"onQualityChange",set:function(e){this._onQualityChangeCallback=e}},{key:"onUserAction",set:function(e){this._isUserActionAcceptable=e}},{key:"onVolumeSet",set:function(e){this._onVolumeSet=e}},{key:"onResize",set:function(e){this._onResize=e}},{key:"onEnterPip",set:function(e){this._onEnterPip=e}},{key:"onLeavePip",set:function(e){this._onLeavePip=e}}])&&n(t.prototype,i),e}();t.default=c},function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.videoElement=t,i&&i.initialized&&"input"===i.type&&(this.vuInput=!0,this.curVolume=1,this.curMuted=!1)}var t,i;return t=e,(i=[{key:"destroy",value:function(){this.videoElement=void 0,this.vuMeter=void 0}},{key:"setVUMeter",value:function(e){var t=this;this.vuInput?(this.vuMeter=e,this.vuMeter.isActivated()?this.onVUMeterActivated():this.vuMeter.onActivated=function(){return t.onVUMeterActivated()}):e.isActivated()||(this.suspendedMeter=e)}},{key:"activateVUMeter",value:function(){this.vuInput?this.vuMeter&&this.vuMeter.setVolume(this.curMuted?0:this.curVolume):this.suspendedMeter&&this.suspendedMeter.setup()&&(this.suspendedMeter=void 0)}},{key:"onVUMeterActivated",value:function(){this.videoElement.volume=1,this.vuMeter.setVolume(this.curMuted?0:this.curVolume),this.videoElement.muted=!1}},{key:"volume",get:function(){var e=0;return this.vuInput?this.curMuted||(e=this.curVolume):this.videoElement.muted||(e=this.videoElement.volume),e},set:function(e){this.vuInput?(this.curVolume=e,this.vuMeter?this.curMuted||this.vuMeter.setVolume(e):this.videoElement.volume=e):(this.suspendedMeter&&this.suspendedMeter.setup()&&(this.suspendedMeter=void 0),this.videoElement.volume=e)}},{key:"muted",get:function(){return this.vuInput?this.curMuted:this.videoElement.muted},set:function(e){this.vuInput?this.curMuted!==e&&(this.curMuted=e,this.vuMeter?this.vuMeter.setVolume(this.curMuted?0:this.curVolume):this.videoElement.muted=e):(this.suspendedMeter&&!e&&this.suspendedMeter.setup()&&(this.suspendedMeter=void 0),this.videoElement.muted=e)}}])&&r(t.prototype,i),e}();t.default=n},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(212),i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(i(168)),a=r(i(12)),o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dbRange=t||100,this.dbMult=20,this.logger=a.default.create(i,"VU meter")}var t,i;return t=e,(i=[{key:"start",value:function(e,t){this.logger.debug("Start VU meter, channel count: "+t),this.mediaElement=e,this.channels=t||2,this._setupMeter()}},{key:"stop",value:function(e){this.logger.debug("Stop VU meter",e),this._removeMeter(),this._initValues(),this.ui&&this.ui.destroy(e)}},{key:"setup",value:function(){return this._setupMeter(),void 0!=this.context}},{key:"refreshUI",value:function(e){this.ui&&this.ui.refresh(e||2)}},{key:"onPlay",value:function(){this.context&&(this.logger.debug("onPlay event, resume context"),this.context.resume())}},{key:"setCallback",value:function(e){this.callback=e}},{key:"setUI",value:function(e){var t=document.getElementById(e);t&&(this.ui=new s.default(t,this.dbRange))}},{key:"isActivated",value:function(){return void 0!=this.context}},{key:"_setupMeter",value:function(){this._enableSourceFor()&&(this._createMeter(),this.ui&&this.ui.create(this.channels))}},{key:"_initValues",value:function(){this.suspended=!1,this.channelValues=[],this.channelDecibels=[]}},{key:"_enableSourceFor",value:function(){var e=void 0!=this.context;return e||(this.context=new AudioContext,"suspended"!==this.context.state?(this.source=this.context.createMediaElementSource(this.mediaElement),this.source.channelCount=this.channels,this.suspended=!1,e=!0):(this.logger.debug("Suspended, waiting for user gesture"),this.suspended=!0,this.context=void 0)),e}},{key:"_dbFromVal",value:function(e){var t=-this.dbRange;return e>0&&(t=this.dbMult*Math.log10(e))<-this.dbRange&&(t=-this.dbRange),t}}])&&n(t.prototype,i),e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(167))&&r.__esModule?r:{default:r},s=function(e){return{create:function(t,i,r){var s;switch(t){case"peak":case"rms":case"avg":s=new n.default(t,i,r,e)}return s}}};t.default=s},function(e,t,i){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=o(e);if(t){var s=o(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i)}}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i(110),i(108),i(109),i(14),i(69),i(214),i(10),i(215),i(216),i(17),i(217),i(91),i(71),i(72),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c=(u=i(165))&&u.__esModule?u:{default:u},l=function(e){function t(e,i,r,n){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=o.call(this,r,n)).mode=e,s.type=i,s.calcChannelValueFor={peak:s._calcChannelValuePeak,avg:s._calcChannelValueAvg,rms:s._calcChannelValueRms}[e],s.logger.debug("VU meter constructor: ",e,i,r),s}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,c.default);var i,r,o=a(t);return i=t,(r=[{key:"setVolume",value:function(e){this.gainer?this.gainer.gain.setValueAtTime(e,this.context.currentTime):this.suspended&&(this.logger.debug("Setup suspended VU meter"),this._setupMeter(),this.onActivated&&this.isActivated()&&(this.onActivated(),this.onActivated=void 0))}},{key:"_createMeter",value:function(){var e=this;void 0===this.meter&&(this.logger.debug("Create meter"),this._initValues(),this.meter=this.context.createScriptProcessor(2048,this.channels,this.channels),this.source.connect(this.meter),"input"===this.type?(this.gainer=this.context.createGain(),this.gainer.gain.value=1,this.source.connect(this.gainer),this.meter.connect(this.gainer),this.gainer.connect(this.context.destination)):(this.source.connect(this.context.destination),this.meter.connect(this.context.destination)),this.meter.onaudioprocess=function(t){return e._updateMeter(t)})}},{key:"_removeMeter",value:function(){if(this.meter){this.logger.debug("Remove meter");try{this.source.disconnect(this.meter),"input"===this.type?(this.source.disconnect(this.gainer),this.gainer.disconnect(this.context.destination),this.gainer=void 0):(this.source.disconnect(this.context.destination),this.meter.disconnect(this.context.destination)),this.meter=void 0}catch(e){this.gainer=void 0,this.meter=void 0,this.logger.warn("Exception caught: ",e)}}}},{key:"_calcChannelValueAvg",value:function(e){for(var t=this.channelData[e].length,i=0;i<t;i++)this.channelValues[e]+=Math.abs(this.channelData[e][i]);this.channelValues[e]/=t}},{key:"_calcChannelValueRms",value:function(e){for(var t=this.channelData[e].length,i=0;i<t;i++)this.channelValues[e]+=this.channelData[e][i]*this.channelData[e][i];this.channelValues[e]=Math.sqrt(this.channelValues[e]/t)}},{key:"_calcChannelValuePeak",value:function(e){for(var t=this.channelData[e].length,i=0;i<t;i++)Math.abs(this.channelData[e][i])>this.channelValues[e]&&(this.channelValues[e]=Math.abs(this.channelData[e][i]))}},{key:"_updateMeter",value:function(e){var t=e.inputBuffer;this.channelData=[];for(var i=0;i<this.channels;i++)this.channelData[i]=t.getChannelData(i),this.channelValues[i]=0,this.calcChannelValueFor(i),this.channelDecibels[i]=this._dbFromVal(this.channelValues[i]);this.ui&&this.ui.update(this.channelDecibels),this.callback&&this.callback(this.channelValues,this.channelDecibels)}}])&&n(i.prototype,r),t}();t.default=l},function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(59),i(10),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.vertical=!0,this.borderSize=2,this.fontSize=10,this.backgroundColor="black",this.tickColor="#ddd",this.gradient=["red 1%","#ff0 16%","lime 45%","#080 100%"],this.dbRange=i,this.dbTickSize=10,this.levelTransition="0.1s",this._createBasicView()}var t,i;return t=e,(i=[{key:"create",value:function(e){if(!this.fullValue){void 0===this.meter&&this._createBasicView(),this.channels=e,this._createGradient();var t=this.meterWidth/this.channels;this.vertical||(t=this.meterHeight/this.channels);var i=this.tickWidth;this.vertical||(i=this.meterTop);for(var r=0;r<this.channels;r++)this._createChannelLevel(2*this.borderSize,this.meterTop,i,!1),this.channelLevels[r]=this._createChannelLevel(t,this.meterTop,i,this.levelTransition),i+=t,this.levelValues[r]=this._calcLevel(-this.dbRange);this.fullValue=!0,this._drawMeter()}}},{key:"refresh",value:function(e){if(this.container.clientWidth!==this.elementWidth||this.container.clientHeight!==this.elementHeight){var t=this.fullValue;this.destroy(!0),t?this.create(e):this._createBasicView()}}},{key:"destroy",value:function(e){if(this.meter){if(this.fullValue){for(var t=0;t<this.fullValueItems.length;t++)this.meter.removeChild(this.fullValueItems[t]);this.fullValueItems=[],this.channelLevels=[],this.fullValue=!1}e&&(this.container.removeChild(this.meter),this.meter=void 0)}}},{key:"update",value:function(e){if(this.meter)for(var t=0;t<this.channels;t++)this.levelValues[t]=this._calcLevel(e[t])}},{key:"_calcLevel",value:function(e){var t=this.vertical?this.meterHeight:this.meterWidth,i=Math.floor(e*t/-this.dbRange);return i<0?i=0:i>t&&(i=t),i}},{key:"_setParams",value:function(){this.tickWidth=2*this.fontSize,this.elementWidth=this.container.clientWidth,this.elementHeight=this.container.clientHeight,this.elementWidth>this.elementHeight&&(this.vertical=!1),this.meterTop=this.vertical?this.borderSize:1.5*this.fontSize+this.borderSize,this.meterHeight=this.elementHeight-this.meterTop-this.borderSize,this.meterWidth=this.elementWidth-this.tickWidth-this.borderSize,this.fullValueItems=[],this.channelLevels=[],this.levelValues=[]}},{key:"_createBasicView",value:function(){this._setParams(),this._createMeterDiv(),this._createTicks(),this.fullValue=!1}},{key:"_removePlaceholder",value:function(){this.placeholder&&(this.container.removeChild(this.meter),this.meter=void 0,this.placeholder=!1)}},{key:"_createMeterDiv",value:function(){this.meter=document.createElement("div"),this.meter.style.position="relative",this.meter.style.width=this.elementWidth+"px",this.meter.style.height=this.elementHeight+"px",this.meter.style.backgroundColor=this.backgroundColor,this.container.appendChild(this.meter)}},{key:"_createTicks",value:function(){var e=Math.floor(this.dbRange/this.dbTickSize),t=0;if(this.vertical)for(var i=this.fontSize+this.borderSize,r=0;r<e;r++){var n=document.createElement("div");this.meter.appendChild(n),n.style.width=this.tickWidth+"px",n.style.textAlign="right",n.style.color=this.tickColor,n.style.fontSize=this.fontSize+"px",n.style.position="absolute",n.style.top=i+"px",n.textContent=t+"",t-=this.dbTickSize,i+=this.meterHeight/e}else{this.tickWidth=this.meterWidth/e;for(var s=2*this.fontSize,a=0;a<e;a++){var o=document.createElement("div");this.meter.appendChild(o),o.style.width=this.tickWidth+"px",o.style.textAlign="right",o.style.color=this.tickColor,o.style.fontSize=this.fontSize+"px",o.style.position="absolute",o.style.top="5px",o.style.right=s+"px",o.textContent=t+"",t-=this.dbTickSize,s+=this.tickWidth}}}},{key:"_createGradient",value:function(){var e,t=document.createElement("div");this.meter.appendChild(t),t.style.width=this.meterWidth+"px",t.style.height=this.meterHeight+"px",t.style.position="absolute",t.style.top=this.meterTop+"px",this.vertical?(t.style.left=this.tickWidth+"px",e="linear-gradient(to bottom, "+this.gradient.join(", ")+")"):(t.style.left=this.borderSize+"px",e="linear-gradient(to left, "+this.gradient.join(", ")+")"),t.style.backgroundImage=e,this.fullValueItems.push(t)}},{key:"_createChannelLevel",value:function(e,t,i,r){var n=document.createElement("div");return this.meter.appendChild(n),n.style.position="absolute",this.vertical?(n.style.width=e+"px",n.style.height=this.meterHeight+"px",n.style.top=t+"px",n.style.left=i+"px"):(n.style.width=this.meterWidth+"px",n.style.height=e+"px",n.style.top=i+"px",n.style.right=2*this.fontSize+"px"),n.style.backgroundColor=this.backgroundColor,r&&(this.vertical?n.style.transition="height "+this.levelTransition:n.style.transition="width "+this.levelTransition),this.fullValueItems.push(n),n}},{key:"_drawMeter",value:function(){var e=this;if(this.fullValue){for(var t=0;t<this.channels;t++)this.vertical?this.channelLevels[t].style.height=this.levelValues[t]+"px":this.channelLevels[t].style.width=this.levelValues[t]+"px";window.requestAnimationFrame(function(){return e._drawMeter()})}}}])&&r(t.prototype,i),e}();t.default=n},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(174)),s=r(i(12)),a=function(e){function t(){function e(e,t,r,n,s){var a=void 0,o=n,u=n-(a=e.lastSample).rawts;return(u<0||u>10*e.timescale)&&(i.debug("Adjust DTS difference!!!",u),u=e.lastSampleDuration),n=a.ts+u,a.duration=u,a.altDur=Math.round(u/(e.timescale/1e3)),e.lastSampleDuration=u,e.lastSample={data:r,ts:n,rawts:o,altTs:Math.round(n/(e.timescale/1e3)),sap:t},a}function t(e){for(var t=void 0,n=0;n<r.length;n++)if(r[n].id==e){t=r[n];break}return void 0===t&&i.error("track ID "+e+" is not found!"),t}var r=[],s=1;this.init=function(){r=[],s=1},this.addTrack=function(e,t){var n={id:s,type:e,curSeqNumber:0,lastSampleDuration:0};if(t)switch(n.timescale=t.timescale,e){case"video":n.codec=t.codec?t.codec.toUpperCase():"VP8",n.width=t.width||0,n.height=t.height||0;break;case"audio":i.error("addTrack: audio is not supported!")}return r.push(n),s++,n},this.setTrackParams=function(e,r){var n=t(e);return n&&("codec"in r&&(r.codec=r.codec.toUpperCase()),"width"in r&&(n.width=r.width),"height"in r&&(n.height=r.height),"timescale"in r&&(n.timescale=r.timescale),"sequenceNumber"in r&&(n.curSeqNumber=r.sequenceNumber),i.debug("setTrackParams",e,r)),n},this.setBaseSample=function(e,r,n,s){var a=t(e);a?(i.debug("setBaseSample:",a.type,n),a.lastSample={data:r,ts:n,rawts:n,altTs:Math.round(n/(a.timescale/1e3)),sap:!0}):i.error("setBaseSample: track "+e+" not found!!!")},this.getRealTs=function(e,r){var n=r,s=t(e);return s?s.lastSample&&Math.abs(r-s.lastSample.ts)>10*s.timescale&&(n=r-s.lastSample.rawts+s.lastSample.ts):i.error("getRealTs: track ".concat(e," not found")),n},this.initSegment=function(){var e=n.default.createFile();!function(e){var t=n.default.createElement("EBML",e);n.default.createElement("EBMLVersion",t,1),n.default.createElement("EBMLReadVersion",t,1),n.default.createElement("EBMLMaxIDLength",t,4),n.default.createElement("EBMLMaxSizeLength",t,8),n.default.createElement("DocType",t,"webm"),n.default.createElement("DocTypeVersion",t,2),n.default.createElement("DocTypeReadVersion",t,2)}(e);var t=function(e){var t=n.default.createElement("Segment",e);return t._unbound=!0,t}(e);return function(e){var t=n.default.createElement("SegmentInfo",e);n.default.createElement("TimecodeScale",t,1e6),n.default.createElement("MuxingApp",t,"sldp-player"),n.default.createElement("WritingApp",t,"sldp-player")}(t),function(e){for(var t=n.default.createElement("Tracks",e),i=0;i<r.length;i++){var s="video"==r[i].type,a=n.default.createElement("TrackEntry",t);if(n.default.createElement("TrackNumber",a,r[i].id),n.default.createElement("TrackUID",a,r[i].id),n.default.createElement("FlagLacing",a,0),n.default.createElement("Language",a,"und"),n.default.createElement("CodecID",a,"V_"+r[i].codec),n.default.createElement("CodecName",a,r[i].codec),n.default.createElement("TrackType",a,s?1:2),s){var o=n.default.createElement("Video",a);n.default.createElement("PixelWidth",o,r[i].width),n.default.createElement("PixelHeight",o,r[i].height)}}}(t),e.write()},this.mediaSegment=function(i,r,s){var a=void 0,o=n.default.createFile(),u=t(i),c=[],l=[];if(u){var h=0,f=[];for(h=0;h<r.length;h++){var d=r[h],p=e(u,d.sap,d.data,d.ts);void 0!==p&&(f.push(p),c.push(p.ts),l.push(p.sap))}s&&void 0!==u.lastSample&&(u.lastSample.duration=u.lastSampleDuration,f.push(u.lastSample),c.push(f[f.length-1].ts),l.push(f[f.length-1].sap),u.lastSample=void 0),f.length>0&&(function(e,t,i){var r=n.default.createElement("Cluster",e);n.default.createElement("Timecode",r,i[0].altTs);for(var s=0,a=0;a<i.length;a++){var o=n.default.createElement("SimpleBlock",r);o.sap=i[a].sap,o.timecode=s,o.trackNumber=t.id,o.frame=i[a].data,s+=i[a].altDur}}(o,u,f),a={ts:c,sap:l,sn:u?u.curSeqNumber-1:void 0,data:o.write()})}return a}}var i=s.default.create(e,"WebmComposer");return{create:function(){return new t}}};t.default=a},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}i(86),i(14),i(22),i(88),i(70),i(17),i(107),i(46),i(23),i(24),i(25),i(26),i(28),i(27),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(37),i(36),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(173)),s=r(i(73)),a=r(i(114)),o=function(){this._cursor=new s.default};o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","mdia","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak"],o.prototype._boxProcessors={},o.prototype._writeFieldArray=function(e,t,i){for(var r=0;r<i.length;r++)this._writeField(e,t,i[r])},o.prototype._writeFullBox=function(){this._writeField("uint",8,this.version),this._writeField("uint",24,this.flags)},o.prototype._procEntries=function(e,t,i){for(var r=0;r<t;r++)i.call(this,this[e][r])},o.prototype._procSubBoxes=function(e,t){for(var i=0;i<t;i++)this._rawo?this[e][i].write():this.size+=this[e][i].getLength()},o.prototype.append=function(e,t){a.default.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._rawo=null,this.size=0,this._writeField("uint",32,this.size),this._writeField("string",4,this.type),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){if(this._cursor.offset=this._parent._cursor.offset,0===this.size?this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset):this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size),this._writeField("uint",32,this.size),this._writeField("string",4,this.type),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(i,t);break;case 16:this._rawo.setInt16(i,t);break;case 32:this._rawo.setInt32(i,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),n=t-r*Math.pow(2,32);this._rawo.setUint32(i,r),this._rawo.setUint32(i+4,n)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var i,r,n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(n,t);break;case 16:this._rawo.setUint16(n,t);break;case 24:i=(16776960&t)>>8,r=255&t,this._rawo.setUint16(n,i),this._rawo.setUint8(n+2,r);break;case 32:this._rawo.setUint32(n,t);break;case 64:r=t-(i=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(n,i),this._rawo.setUint32(n+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var i=0;i<e;i++)this._writeUint(8,t.charCodeAt(i))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var i=Math.floor(t),r=(t-i)*Math.pow(2,e/2);this._writeUint(e/2,i),this._writeUint(e/2,r)},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Uint8Array)this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length;else if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,i=0;i<e.length;i++)this._rawo.setInt8(t+i,e[i]);this._cursor.offset+=e.length}}else this.size+=e.length},o.prototype._writeUTF8String=function(e){var t=n.default.utf8ToByteArray(e);if(this._rawo)for(var i=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)i.setUint8(r,t[r]);else this.size+=t.length},o.prototype._writeField=function(e,t,i){switch(e){case"uint":this._writeUint(t,i);break;case"int":this._writeInt(t,i);break;case"template":this._writeTemplate(t,i);break;case"string":-1==t?this._writeTerminatedString(i):this._writeString(t,i);break;case"data":this._writeData(i);break;case"utf8":this._writeUTF8String(i)}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.avc2=o.prototype._boxProcessors.avc3=o.prototype._boxProcessors.avc4=o.prototype._boxProcessors.hvc1=o.prototype._boxProcessors.hev1=o.prototype._boxProcessors.encv=function(){this._writeFieldArray("uint",8,this.reserved1),this._writeField("uint",16,this.data_reference_index),this._writeField("uint",16,this.pre_defined1),this._writeField("uint",16,this.reserved2),this._writeFieldArray("uint",32,this.pre_defined2),this._writeField("uint",16,this.width),this._writeField("uint",16,this.height),this._writeField("template",32,this.horizresolution),this._writeField("template",32,this.vertresolution),this._writeField("uint",32,this.reserved3),this._writeField("uint",16,this.frame_count),this._writeFieldArray("uint",8,this.compressorname),this._writeField("uint",16,this.depth),this._writeField("int",16,this.pre_defined3),this._writeField("data",-1,this.config),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.dref=function(){this._writeFullBox(),this._writeField("uint",32,this.entry_count),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.pasp=function(){this._writeField("uint",32,this.hSpacing),this._writeField("uint",32,this.vSpacing)},o.prototype._boxProcessors.styp=o.prototype._boxProcessors.ftyp=function(){this._writeField("string",4,this.major_brand),this._writeField("uint",32,this.minor_version),this._writeFieldArray("string",4,this.compatible_brands)},o.prototype._boxProcessors.sidx=function(){this._writeFullBox(),this._writeField("uint",32,this.reference_ID),this._writeField("uint",32,this.timescale),this._writeField("uint",1==this.version?64:32,this.earliest_presentation_time),this._writeField("uint",1==this.version?64:32,this.first_offset),this._writeField("uint",16,this.reserved),this._writeField("uint",16,this.reference_count),this._procEntries("references",this.reference_count,function(e){e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time,this._writeField("uint",32,e.reference),this._writeField("uint",32,e.subsegment_duration),this._writeField("uint",32,e.sap)})},o.prototype._boxProcessors.hdlr=function(){this._writeFullBox(),this._writeField("uint",32,this.pre_defined),this._writeField("string",4,this.handler_type),this._writeFieldArray("uint",32,this.reserved),this._writeField("string",-1,this.name)},o.prototype._boxProcessors.mdat=function(){this._writeField("data",-1,this.data)},o.prototype._boxProcessors.mdhd=function(){this._writeFullBox(),this._writeField("uint",1==this.version?64:32,this.creation_time),this._writeField("uint",1==this.version?64:32,this.modification_time),this._writeField("uint",32,this.timescale),this._writeField("uint",1==this.version?64:32,this.duration),"string"==typeof this.language&&(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._writeField("uint",16,this.language),this._writeField("uint",16,this.pre_defined)},o.prototype._boxProcessors.mehd=function(){this._writeFullBox(),this._writeField("uint",1==this.version?64:32,this.fragment_duration)},o.prototype._boxProcessors.mfhd=function(){this._writeFullBox(),this._writeField("uint",32,this.sequence_number)},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._writeFieldArray("uint",8,this.reserved1),this._writeField("uint",16,this.data_reference_index),this._writeFieldArray("uint",32,this.reserved2),this._writeField("uint",16,this.channelcount),this._writeField("uint",16,this.samplesize),this._writeField("uint",16,this.pre_defined),this._writeField("uint",16,this.reserved3),this._writeField("uint",32,this.samplerate),this._writeField("data",-1,this.esds)},o.prototype._boxProcessors[".mp3"]=function(){this._writeFieldArray("uint",8,this.reserved1),this._writeField("uint",16,this.data_reference_index),this._writeFieldArray("uint",32,this.reserved2),this._writeField("uint",16,this.channelcount),this._writeField("uint",16,this.samplesize),this._writeField("uint",16,this.pre_defined),this._writeField("uint",16,this.reserved3),this._writeField("uint",32,this.samplerate),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.btrt=function(){this._writeField("uint",32,this.bufferSizeDB),this._writeField("uint",32,this.maxBitrate),this._writeField("uint",32,this.avgBitrate)},o.prototype._boxProcessors.mvhd=function(){this._writeFullBox(),this._writeField("uint",1==this.version?64:32,this.creation_time),this._writeField("uint",1==this.version?64:32,this.modification_time),this._writeField("uint",32,this.timescale),this._writeField("uint",1==this.version?64:32,this.duration),this._writeField("template",32,this.rate),this._writeField("template",16,this.volume),this._writeField("uint",16,this.reserved1),this._writeFieldArray("uint",32,this.reserved2),this._writeFieldArray("template",32,this.matrix),this._writeFieldArray("uint",32,this.pre_defined),this._writeField("uint",32,this.next_track_ID)},o.prototype._boxProcessors.smhd=function(){this._writeFullBox(),this._writeField("uint",16,this.balance),this._writeField("uint",16,this.reserved)},o.prototype._boxProcessors.stsd=function(){this._writeFullBox(),this._writeField("uint",32,this.entry_count),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.tfdt=function(){this._writeFullBox(),this._writeField("uint",1==this.version?64:32,this.baseMediaDecodeTime)},o.prototype._boxProcessors.tfhd=function(){this._writeFullBox(),this._writeField("uint",32,this.track_ID),1&this.flags&&this._writeField("uint",64,this.base_data_offset),2&this.flags&&this._writeField("uint",32,this.sample_description_offset),8&this.flags&&this._writeField("uint",32,this.default_sample_duration),16&this.flags&&this._writeField("uint",32,this.default_sample_size),32&this.flags&&this._writeField("uint",32,this.default_sample_flags)},o.prototype._boxProcessors.tkhd=function(){this._writeFullBox(),this._writeField("uint",1==this.version?64:32,this.creation_time),this._writeField("uint",1==this.version?64:32,this.modification_time),this._writeField("uint",32,this.track_ID),this._writeField("uint",32,this.reserved1),this._writeField("uint",1==this.version?64:32,this.duration),this._writeFieldArray("uint",32,this.reserved2),this._writeField("uint",16,this.layer),this._writeField("uint",16,this.alternate_group),this._writeField("template",16,this.volume),this._writeField("uint",16,this.reserved3),this._writeFieldArray("template",32,this.matrix),this._writeField("template",32,this.width),this._writeField("template",32,this.height)},o.prototype._boxProcessors.trex=function(){this._writeFullBox(),this._writeField("uint",32,this.track_ID),this._writeField("uint",32,this.default_sample_description_index),this._writeField("uint",32,this.default_sample_duration),this._writeField("uint",32,this.default_sample_size),this._writeField("uint",32,this.default_sample_flags)},o.prototype._boxProcessors.trun=function(){this._writeFullBox(),this._writeField("uint",32,this.sample_count),1&this.flags&&this._writeField("int",32,this.data_offset),4&this.flags&&this._writeField("uint",32,this.first_sample_flags),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._writeField("uint",32,e.sample_duration),512&this.flags&&this._writeField("uint",32,e.sample_size),1024&this.flags&&this._writeField("uint",32,e.sample_flags),2048&this.flags&&this._writeField(1===this.version?"int":"uint",32,e.sample_composition_time_offset)})},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._writeFullBox(),"urn "===this.type&&this._writeField("string",-1,this.name),this._writeField("string",-1,this.location)},o.prototype._boxProcessors.vmhd=function(){this._writeFullBox(),this._writeField("uint",16,this.graphicsmode),this._writeFieldArray("uint",16,this.opcolor)};var u=o;t.default=u},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}i(107),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(170)),s=r(i(172)),a={createFile:function(){return new s.default},createBox:function(e,t,i){var r=n.default.create(e);return t&&t.append(r,i),r},createFullBox:function(e,t,i){var r=a.createBox(e,t,i);return r.version=0,r.flags=0,r}},o=a;t.default=o},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}i(14),i(22),i(88),i(17),i(46),i(23),i(24),i(25),i(26),i(28),i(27),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(37),i(36),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(73)),s=r(i(114)),a=function(){this._cursor=new n.default,this.boxes=[]};a.prototype.write=function(){var e=0,t=0;for(t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength();var i=new Uint8Array(e);for(this._rawo=new DataView(i.buffer),this.bytes=i,this._cursor.offset=0,t=0;t<this.boxes.length;t++)this.boxes[t].write();return i.buffer},a.prototype.append=function(e,t){s.default.appendBox(this,e,t)};var o=a;t.default=o},function(e,t,i){"use strict";i(59),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={dataViewToString:function(e,t){var i=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(i).decode(e);var r=[],n=0;if("utf-8"===i)for(;n<e.byteLength;){var s=e.getUint8(n++);s<128||(s<224?(s=(31&s)<<6,s|=63&e.getUint8(n++)):s<240?(s=(15&s)<<12,s|=(63&e.getUint8(n++))<<6,s|=63&e.getUint8(n++)):(s=(7&s)<<18,s|=(63&e.getUint8(n++))<<12,s|=(63&e.getUint8(n++))<<6,s|=63&e.getUint8(n++))),r.push(String.fromCharCode(s))}else for(;n<e.byteLength;)r.push(String.fromCharCode(e.getUint8(n++)));return r.join("")},utf8ToByteArray:function(e){var t,i;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],i=0;i<e.length;++i){var r=e.charCodeAt(i);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t}},n=r;t.default=n},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(175)),s=r(i(176)),a={createFile:function(){return new s.default},createElement:function(e,t,i){var r=n.default.create(e,i);return t&&(r._root=t._root?t._root:t,r._parent=t,t.elements.push(r)),r}},o=a;t.default=o},function(e,t,i){"use strict";i(14),i(22),i(88),i(17),i(46),i(23),i(24),i(25),i(26),i(28),i(27),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(37),i(36),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(73))&&r.__esModule?r:{default:r},s=281474976710656,a={EBML:440786851,EBMLVersion:17030,EBMLReadVersion:17143,EBMLMaxIDLength:17138,EBMLMaxSizeLength:17139,DocType:17026,DocTypeVersion:17031,DocTypeReadVersion:17029,Segment:408125543,SegmentInfo:357149030,TimecodeScale:2807729,MuxingApp:19840,WritingApp:22337,Duration:17545,Tracks:374648427,TrackEntry:174,TrackNumber:215,TrackUID:29637,FlagLacing:156,Language:2274716,CodecID:134,CodecName:2459272,TrackType:131,Video:224,PixelWidth:176,PixelHeight:186,Cluster:524531317,Timecode:231,SimpleBlock:163},o=function(){this._cursor=new n.default};o.create=function(e,t){var i=new o;return i.id=a[e],i.elements=[],void 0!==t&&(i._data=t),i},o.prototype._elemProcessors={},o.prototype.getLength=function(){this._rawo=null,this.size=0,this._idLength=this._measureUint(this.id);for(var e=0;e<this.elements.length;e++)this.size+=this.elements[e].getLength();return this._elemProcessors[this.id]&&this._elemProcessors[this.id].call(this),void 0!==this._data&&this._processData(this._data),this._unbound?this._sizeLength=1:this._sizeLength=this._measureVarInt(this.size),this.size+this._idLength+this._sizeLength},o.prototype.write=function(){this._cursor.offset=this._parent._cursor.offset;var e=this._idLength+this._sizeLength+this.size;0===this.size?this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset):this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,e),this._writeField("uint",this.id,this._idLength),this._unbound?this._writeField("uint",255,1):this._writeField("vint",this.size,this._sizeLength);for(var t=0;t<this.elements.length;t++)this.elements[t].write();return this._elemProcessors[this.id]&&this._elemProcessors[this.id].call(this),void 0!==this._data&&this._processData(this._data),this._parent._cursor.offset+=e,e},o.prototype._setU8=function(e){this._rawo.setUint8(this._viewOffset,e),this._viewOffset++},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Uint8Array)this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length;else if(e instanceof Array){this._cursor.offset,this._rawo.byteOffset;for(var t=0;t<e.length;t++)this._setU8(e[t]);this._cursor.offset+=e.length}}else this.size+=e.length},o.prototype._writeString=function(e){if(this._rawo){this._viewOffset=this._cursor.offset-this._rawo.byteOffset;for(var t=0;t<e.length;t++)this._setU8(e.charCodeAt(t));this._cursor.offset+=e.length}else this.size+=e.length},o.prototype._writeVarInt=function(e,t){if(void 0===t&&(t=this._measureVarInt(e)),this._rawo){switch(this._viewOffset=this._cursor.offset-this._rawo.byteOffset,t){case 1:this._setU8(128|e);break;case 2:this._setU8(64|e>>8);break;case 3:this._setU8(32|e>>16);break;case 4:this._setU8(16|e>>24);break;case 5:this._setU8(8|Math.floor(e/4294967296));break;case 6:this._setU8(4|Math.floor(e/1099511627776));break;case 7:this._setU8(2|Math.floor(e/s));break;case 8:this._setU8(1)}switch(t){case 8:this._setU8(Math.floor(e/s));case 7:this._setU8(Math.floor(e/1099511627776));case 6:this._setU8(Math.floor(e/4294967296));case 5:this._setU8(e>>24);case 4:this._setU8(e>>16);case 3:this._setU8(e>>8);case 2:this._setU8(e)}this._cursor.offset+=t}else this.size+=t},o.prototype._writeUint=function(e,t){if(void 0===t&&(t=this._measureUint(e)),this._rawo){switch(this._viewOffset=this._cursor.offset-this._rawo.byteOffset,t){case 8:this._setU8(Math.floor(e/72057594037927940));case 7:this._setU8(Math.floor(e/s));case 6:this._setU8(Math.floor(e/1099511627776));case 5:this._setU8(Math.floor(e/4294967296));case 4:this._setU8(e>>24);case 3:this._setU8(e>>16);case 2:this._setU8(e>>8);case 1:this._setU8(e);break;default:throw new RuntimeException("Bad UINT size",t)}this._cursor.offset+=t}else this.size+=t},o.prototype._measureVarInt=function(e){if(e<127)return 1;if(e<16383)return 2;if(e<2097151)return 3;if(e<268435455)return 4;if(e<34359738367)return 5;if(e<4398046511103)return 6;if(e<562949953421311)return 7;if(e<72057594037927940)return 8;throw new RuntimeException("EBML VINT size not supported",e)},o.prototype._measureUint=function(e){return e<256?1:e<65536?2:e<16777216?3:e<4294967296?4:e<1099511627776?5:e<s?6:e<72057594037927940?7:8},o.prototype._writeField=function(e,t,i){switch(e){case"uint":this._writeUint(t,i);break;case"vint":this._writeVarInt(t,i);break;case"string":this._writeString(t,i);break;case"data":this._writeData(t)}},o.prototype._processData=function(e){"number"==typeof e?this._writeField("uint",e):"string"==typeof e?this._writeField("string",e):this._writeField("data",e)},o.prototype._elemProcessors[163]=function(){this._writeField("vint",this.trackNumber),this._writeField("uint",this.timecode,2);var e=this.sap?128:0;this._writeField("uint",e,1),this._writeField("data",this.frame)};var u=o;t.default=u},function(e,t,i){"use strict";i(14),i(22),i(88),i(17),i(46),i(23),i(24),i(25),i(26),i(28),i(27),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(37),i(36),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(73))&&r.__esModule?r:{default:r},s=function(){this._cursor=new n.default,this.elements=[]};s.prototype.write=function(){var e=0,t=0;for(t=0;t<this.elements.length;t++)e+=this.elements[t].getLength();var i=new Uint8Array(e);for(this._rawo=new DataView(i.buffer),this.bytes=i,this._cursor.offset=0,t=0;t<this.elements.length;t++)this.elements[t].write();return i.buffer};var a=s;t.default=a},function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(58),i(14),i(59),i(207),i(22),i(10),i(17),i(46),i(23),i(24),i(25),i(26),i(28),i(27),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(37),i(36),i(38),i(39),i(40),i(41),i(42),i(43),i(44),i(45),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(i(115)),a=r(i(12)),o=function(e){var t=a.default.create(e,"WS"),i=new s.default(e).create(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metricsManager=t,this.stop_audio=!1,this.curSocketId=0,this.isLogging=!1,this.useSteady=!1,this.loggerData={video:{frames:[],prevTime:0,sumTimes:0,times:[],thresh:60,avg:void 0},audio:{frames:[],prevTime:0,sumTimes:0,times:[],thresh:60,avg:void 0}}}var r,s;return r=e,(s=[{key:"open",value:function(e){function r(e,t){e.isLogging&&void 0===e.loggerData[t]&&(e.loggerData[t]={frames:[],prevTime:0,sumTimes:0,times:[],thresh:60,avg:void 0})}function n(e,i,r,n){if(e.isLogging){var s=e.loggerData[i],a=0;if(s.times.length>0){var o=performance.now();a=Math.round(o-s.prevTime),s.prevTime=o}else s.prevTime=performance.now();if(s.frames.length==s.thresh){if(t.debug("received "+s.thresh+" "+i+" frames"),void 0===s.avg)for(var u=1;u<s.thresh;u++){var c=s.frames[u][1]-s.frames[u-1][1];if(c>0){s.avg=c;break}}for(var l=[],h=0;h<s.frames.length;h++)l.push("["+s.frames[h].join(" ")+"]");t.debug("frames ["+l.join(", ")+"]"),s.sumTime>s.avg*s.thresh&&t.debug("Frames come slow!!!",s.sumTime,s.avg*s.thresh),s.frames=[],s.times=[],s.sumTimes=0}s.frames.push([n,r,a]),s.sumTimes+=a,s.times.push(a)}}try{var s=e.substring(0,5);if("ws://"!=s&&"wss:/"!=s&&(e="ws://"+e),void 0!==this.socket)throw t.error("attempt to open socket when socket exists!",this.socket,e),"Socket open error";this.socket=new WebSocket(e,["sldp.softvelum.com"])}catch(e){return t.error(""+e.message),!1}return this.socket.binaryType="arraybuffer",this.socket.sampleCounter=0,this.socket.transport=this,this.socket.socketId=++this.curSocketId,this.socket.streamURL=e,this.socket.onopen=function(){t.debug("Connection established.")},this.socket.onclose=function(e){e.wasClean?t.debug("Connection closed clean"):(t.debug("Connection dropped",this),this.socketId==this.transport.curSocketId&&(3==this.readyState&&(this.transport.socket=void 0),this.transport.onConnectionClosedCallback&&(t.debug("Call onConnectionClosed"),this.transport.onConnectionClosedCallback())));var r=i.closeCodes[e.code]||"";t.debug("Close code "+e.code+"("+r+") reason: "+e.reason)},this.socket.onmessage=function(e){if(e.data instanceof ArrayBuffer){var s=new Uint8Array(e.data),a=s[0],o=s[1],u=0,c=0,l=0,h=10,f=s.byteLength;switch(o){case i.liveFrameTypes.WEB_AAC_SEQUENCE_HEADER:case i.liveFrameTypes.WEB_AVC_SEQUENCE_HEADER:case i.liveFrameTypes.WEB_HEVC_SEQUENCE_HEADER:if(t.debug("".concat(0===o?"audio":"video"," init segment, trackId: ").concat(a)),this.transport.onInitSegmentReceivedCallback){var d=s.subarray(2,f);this.transport.onInitSegmentReceivedCallback(a,d),this.transport.metricsManager.run(a),r(this.transport,a)}break;case i.liveFrameTypes.WEB_MP3:if(this.transport.metricsManager.isReadyToStart(a)){var p=s.subarray(10,14);this.transport.onInitSegmentReceivedCallback(a,p),this.transport.metricsManager.run(a),r(this.transport,a)}case i.liveFrameTypes.WEB_AAC_FRAME:if(this.transport.onDataReceivedCallback&&0==this.transport.stop_audio){u=i.readValue(s,2,8),this.transport.useSteady&&(l=i.readValue(s,h,8),h+=8);var v=s.subarray(h,f);this.transport.onDataReceivedCallback(a,!0,v,u,0,l),n(this.transport,"audio",u,a)}break;case i.liveFrameTypes.WEB_AVC_KEY_FRAME:case i.liveFrameTypes.WEB_AVC_FRAME:case i.liveFrameTypes.WEB_HEVC_KEY_FRAME:case i.liveFrameTypes.WEB_HEVC_FRAME:if(this.transport.onDataReceivedCallback){u=i.readValue(s,2,8),this.transport.useSteady&&(l=i.readValue(s,h,8),h+=8),c=i.readValue(s,h,4);var m=s.subarray(h+4,f),g=i.liveFrameTypes.WEB_AVC_KEY_FRAME==o||i.liveFrameTypes.WEB_HEVC_KEY_FRAME==o;this.transport.onDataReceivedCallback(a,g,m,u,c,l),n(this.transport,"video",u,a)}break;case i.liveFrameTypes.WEB_VP8_KEY_FRAME:case i.liveFrameTypes.WEB_VP9_KEY_FRAME:this.transport.metricsManager.isReadyToStart(a)&&(this.transport.onInitSegmentReceivedCallback(a,null),this.transport.metricsManager.run(a),r(this.transport,a));case i.liveFrameTypes.WEB_VP8_FRAME:case i.liveFrameTypes.WEB_VP9_FRAME:if(this.transport.onDataReceivedCallback){u=i.readValue(s,2,8),this.transport.useSteady&&(l=i.readValue(s,h,8),h+=8);var y=s.subarray(h,f),b=i.liveFrameTypes.WEB_VP8_KEY_FRAME==o||i.liveFrameTypes.WEB_VP9_KEY_FRAME==o;this.transport.onDataReceivedCallback(a,b,y,u,0,l)}break;default:t.error("Unknown type of frame received ",o)}this.transport.metricsManager.reportBandwidth(a,f,u+c),0==this.sampleCounter&1023&&t.debug("sampleCounter",this.sampleCounter),this.sampleCounter+=1}else{t.debug("Command received",e.data);var _=JSON.parse(e.data);"status"==_.command&&this.transport.onStatusReceivedCallback&&this.transport.onStatusReceivedCallback(_.info,_.steady,_.system)}},this.socket.onerror=function(e){t.error("Error happened:",e)},this.socket}},{key:"send",value:function(e){this.socket&&this.socket.send(JSON.stringify(e))}},{key:"close",value:function(){t.debug("socket close ",this.socket),this.socket&&(this.socket.close(1e3),this.socket=void 0),this.onStatusReceivedCallback=void 0,this.onInitSegmentReceivedCallback=void 0,this.onDataReceivedCallback=void 0,this.onConnectionClosedCallback=void 0}},{key:"acceptSteadyTimestamps",value:function(e){this.useSteady=e}},{key:"callbacks",set:function(e){this.onStatusReceivedCallback=e.onStatusReceived,this.onInitSegmentReceivedCallback=e.onInitSegmentReceived,this.onDataReceivedCallback=e.onDataReceived,this.onConnectionClosedCallback=e.onConnectionClosed}}])&&n(r.prototype,s),e}();return{create:function(e){return new r(e)}}};t.default=o},function(e,t,i){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}i(10),i(51),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fraction=t||100,this.timeout=this.fraction,this.leeway=8}var t,i;return t=e,(i=[{key:"start",value:function(e,t){var i=!1;if(!this.timer){var r=this;this.func=e,this.pos=performance.now(),this.end=this.pos+t,this.timeout=t<this.fraction?t:this.fraction,this.timer=setTimeout(function t(){var i=performance.now()-r.pos-r.timeout;r.pos+=r.timeout+i;var n=Math.floor(r.end-r.pos);n>r.leeway?(r.timeout=n<=r.fraction?n:r.fraction,r.timer=setTimeout(t,r.timeout)):(r.timer=void 0,r.timeout=this.fraction,e())},this.timeout),i=!0}return i}},{key:"interrupt",value:function(){var e=!1;return this.timer&&(this.stop(),this.func(),e=!0),e}},{key:"stop",value:function(){var e=!1;return this.timer&&(clearTimeout(this.timer),this.timer=void 0,this.timeout=this.fraction,e=!0),e}}])&&r(t.prototype,i),e}();t.default=n},function(e,t,i){var r=i(8);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,i){var r=i(4),n=i(49),s=i(9),a=r("unscopables"),o=Array.prototype;void 0==o[a]&&s.f(o,a,{configurable:!0,value:n(null)}),e.exports=function(e){o[a][e]=!0}},function(e,t,i){"use strict";var r=i(104).charAt;e.exports=function(e,t,i){return t+(i?r(e,t).length:1)}},function(e,t,i){"use strict";var r=i(13),n=i(50),s=i(6),a=Math.min;e.exports=[].copyWithin||function(e,t){var i=r(this),o=s(i.length),u=n(e,o),c=n(t,o),l=arguments.length>2?arguments[2]:void 0,h=a((void 0===l?o:n(l,o))-c,o-u),f=1;for(c<u&&u<c+h&&(f=-1,c+=h-1,u+=h-1);h-- >0;)c in i?i[u]=i[c]:delete i[u],u+=f,c+=f;return i}},function(e,t,i){"use strict";var r=i(78),n=i(13),s=i(184),a=i(132),o=i(6),u=i(77),c=i(79);e.exports=function(e){var t,i,l,h,f,d,p=n(e),v="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,y=void 0!==g,b=c(p),_=0;if(y&&(g=r(g,m>2?arguments[2]:void 0,2)),void 0==b||v==Array&&a(b))for(i=new v(t=o(p.length));t>_;_++)d=y?g(p[_],_):p[_],u(i,_,d);else for(f=(h=b.call(p)).next,i=new v;!(l=f.call(h)).done;_++)d=y?s(h,g,[l.value,_],!0):l.value,u(i,_,d);return i.length=_,i}},function(e,t,i){var r=i(11);e.exports=function(e,t,i,n){try{return n?t(r(i)[0],i[1]):t(i)}catch(t){var s=e.return;throw void 0!==s&&r(s.call(e)),t}}},function(e,t,i){var r=i(4)("iterator"),n=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){n=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var i=!1;try{var s={};s[r]=function(){return{next:function(){return{done:i=!0}}}},e(s)}catch(e){}return i}},function(e,t,i){"use strict";i(151);var r=i(16),n=i(1),s=i(4),a=i(83),o=i(15),u=s("species"),c=!n(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),l="$0"==="a".replace(/./,"$0"),h=s("replace"),f=!!/./[h]&&""===/./[h]("a","$0"),d=!n(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]});e.exports=function(e,t,i,h){var p=s(e),v=!n(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),m=v&&!n(function(){var t=!1,i=/a/;return"split"===e&&((i={}).constructor={},i.constructor[u]=function(){return i},i.flags="",i[p]=/./[p]),i.exec=function(){return t=!0,null},i[p](""),!t});if(!v||!m||"replace"===e&&(!c||!l||f)||"split"===e&&!d){var g=/./[p],y=i(p,""[e],function(e,t,i,r,n){return t.exec===a?v&&!n?{done:!0,value:g.call(t,i,r)}:{done:!0,value:e.call(i,t,r)}:{done:!1}},{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=y[0],_=y[1];r(String.prototype,e,b),r(RegExp.prototype,p,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}h&&o(RegExp.prototype[p],"sham",!0)}},function(e,t,i){var r=i(11),n=i(79);e.exports=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,i){var r=i(48);e.exports=r("document","documentElement")},function(e,t){var i=Math.abs,r=Math.pow,n=Math.floor,s=Math.log,a=Math.LN2;e.exports={pack:function(e,t,o){var u,c,l,h=new Array(o),f=8*o-t-1,d=(1<<f)-1,p=d>>1,v=23===t?r(2,-24)-r(2,-77):0,m=e<0||0===e&&1/e<0?1:0,g=0;for((e=i(e))!=e||e===1/0?(c=e!=e?1:0,u=d):(u=n(s(e)/a),e*(l=r(2,-u))<1&&(u--,l*=2),(e+=u+p>=1?v/l:v*r(2,1-p))*l>=2&&(u++,l/=2),u+p>=d?(c=0,u=d):u+p>=1?(c=(e*l-1)*r(2,t),u+=p):(c=e*r(2,p-1)*r(2,t),u=0));t>=8;h[g++]=255&c,c/=256,t-=8);for(u=u<<t|c,f+=t;f>0;h[g++]=255&u,u/=256,f-=8);return h[--g]|=128*m,h},unpack:function(e,t){var i,n=e.length,s=8*n-t-1,a=(1<<s)-1,o=a>>1,u=s-7,c=n-1,l=e[c--],h=127&l;for(l>>=7;u>0;h=256*h+e[c],c--,u-=8);for(i=h&(1<<-u)-1,h>>=-u,u+=t;u>0;i=256*i+e[c],c--,u-=8);if(0===h)h=1-o;else{if(h===a)return i?NaN:l?-1/0:1/0;i+=r(2,t),h-=o}return(l?-1:1)*i*r(2,h-t)}}},function(e,t,i){var r=i(8),n=i(54);e.exports=function(e,t,i){var s,a;return n&&"function"==typeof(s=t.constructor)&&s!==i&&r(a=s.prototype)&&a!==i.prototype&&n(e,a),e}},function(e,t,i){var r=i(1),n=/#|\.prototype\./,s=function(e,t){var i=o[a(e)];return i==c||i!=u&&("function"==typeof t?r(t):!!t)},a=s.normalize=function(e){return String(e).replace(n,".").toLowerCase()},o=s.data={},u=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},function(e,t,i){var r=i(8),n=i(53),s=i(4)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==n(e))}},function(e,t,i){var r=i(2),n=i(131),s=r.WeakMap;e.exports="function"==typeof s&&/native code/.test(n(s))},function(e,t,i){var r=i(2),n=i(143).trim,s=i(106),a=r.parseFloat,o=1/a(s+"-0")!=-1/0;e.exports=o?function(e){var t=n(String(e)),i=a(t);return 0===i&&"-"==t.charAt(0)?-0:i}:a},function(e,t,i){var r=i(2),n=i(143).trim,s=i(106),a=r.parseInt,o=/^[+-]?0[Xx]/,u=8!==a(s+"08")||22!==a(s+"0x16");e.exports=u?function(e,t){var i=n(String(e));return a(i,t>>>0||(o.test(i)?16:10))}:a},function(e,t,i){var r=i(20),n=i(66).f,s={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==s.call(e)?function(e){try{return n(e)}catch(e){return a.slice()}}(e):n(r(e))}},function(e,t,i){"use strict";var r=i(105),n=i(62);e.exports=r?{}.toString:function(){return"[object "+n(this)+"]"}},function(e,t,i){var r=i(48),n=i(66),s=i(98),a=i(11);e.exports=r("Reflect","ownKeys")||function(e){var t=n.f(a(e)),i=s.f;return i?t.concat(i(e)):t}},function(e,t,i){var r=i(53),n=i(83);e.exports=function(e,t){var i=e.exec;if("function"==typeof i){var s=i.call(e,t);if("object"!=typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},function(e,t,i){"use strict";var r=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",a=Math.floor,o=String.fromCharCode,u=function(e){return e+22+75*(e<26)},c=function(e,t,i){var r=0;for(e=i?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},l=function(e){var t,i,r=[],n=(e=function(e){for(var t=[],i=0,r=e.length;i<r;){var n=e.charCodeAt(i++);if(n>=55296&&n<=56319&&i<r){var s=e.charCodeAt(i++);56320==(64512&s)?t.push(((1023&n)<<10)+(1023&s)+65536):(t.push(n),i--)}else t.push(n)}return t}(e)).length,l=128,h=0,f=72;for(t=0;t<e.length;t++)(i=e[t])<128&&r.push(o(i));var d=r.length,p=d;for(d&&r.push("-");p<n;){var v=2147483647;for(t=0;t<e.length;t++)(i=e[t])>=l&&i<v&&(v=i);var m=p+1;if(v-l>a((2147483647-h)/m))throw RangeError(s);for(h+=(v-l)*m,l=v,t=0;t<e.length;t++){if((i=e[t])<l&&++h>2147483647)throw RangeError(s);if(i==l){for(var g=h,y=36;;y+=36){var b=y<=f?1:y>=f+26?26:y-f;if(g<b)break;var _=g-b,A=36-b;r.push(o(u(b+_%A))),g=a(_/A)}r.push(o(u(g))),f=c(h,m,p==d),h=0,++p}}++h,++l}return r.join("")};e.exports=function(e){var t,i,s=[],a=e.toLowerCase().replace(n,".").split(".");for(t=0;t<a.length;t++)i=a[t],s.push(r.test(i)?"xn--"+l(i):i);return s.join(".")}},function(e,t,i){"use strict";var r=i(19),n=i(55);e.exports="".repeat||function(e){var t=String(n(this)),i="",s=r(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(i+=t);return i}},function(e,t,i){var r=i(53);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,i){var r=i(19);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,i){"use strict";var r=i(0),n=i(2),s=i(5),a=i(205),o=i(3),u=i(75),c=i(74),l=i(47),h=i(15),f=i(6),d=i(144),p=i(145),v=i(68),m=i(7),g=i(62),y=i(8),b=i(49),_=i(54),A=i(66).f,w=i(206),S=i(18).forEach,k=i(141),T=i(9),C=i(82),x=i(21),E=i(190),P=x.get,B=x.set,M=T.f,I=C.f,L=Math.round,F=n.RangeError,R=u.ArrayBuffer,D=u.DataView,O=o.NATIVE_ARRAY_BUFFER_VIEWS,U=o.TYPED_ARRAY_TAG,V=o.TypedArray,N=o.TypedArrayPrototype,j=o.aTypedArrayConstructor,H=o.isTypedArray,z=function(e,t){for(var i=0,r=t.length,n=new(j(e))(r);r>i;)n[i]=t[i++];return n},W=function(e,t){M(e,t,{get:function(){return P(this)[t]}})},Y=function(e){var t;return e instanceof R||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},Q=function(e,t){return H(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},q=function(e,t){return Q(e,t=v(t,!0))?l(2,e[t]):I(e,t)},G=function(e,t,i){return!(Q(e,t=v(t,!0))&&y(i)&&m(i,"value"))||m(i,"get")||m(i,"set")||i.configurable||m(i,"writable")&&!i.writable||m(i,"enumerable")&&!i.enumerable?M(e,t,i):(e[t]=i.value,e)};s?(O||(C.f=q,T.f=G,W(N,"buffer"),W(N,"byteOffset"),W(N,"byteLength"),W(N,"length")),r({target:"Object",stat:!0,forced:!O},{getOwnPropertyDescriptor:q,defineProperty:G}),e.exports=function(e,t,i){var s=e.match(/\d+$/)[0]/8,o=e+(i?"Clamped":"")+"Array",u="get"+e,l="set"+e,v=n[o],m=v,g=m&&m.prototype,T={},C=function(e,t){M(e,t,{get:function(){return function(e,t){var i=P(e);return i.view[u](t*s+i.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var n=P(e);i&&(r=(r=L(r))<0?0:r>255?255:255&r),n.view[l](t*s+n.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};O?a&&(m=t(function(e,t,i,r){return c(e,m,o),E(y(t)?Y(t)?void 0!==r?new v(t,p(i,s),r):void 0!==i?new v(t,p(i,s)):new v(t):H(t)?z(m,t):w.call(m,t):new v(d(t)),e,m)}),_&&_(m,V),S(A(v),function(e){e in m||h(m,e,v[e])}),m.prototype=g):(m=t(function(e,t,i,r){c(e,m,o);var n,a,u,l=0,h=0;if(y(t)){if(!Y(t))return H(t)?z(m,t):w.call(m,t);n=t,h=p(i,s);var v=t.byteLength;if(void 0===r){if(v%s)throw F("Wrong length");if((a=v-h)<0)throw F("Wrong length")}else if((a=f(r)*s)+h>v)throw F("Wrong length");u=a/s}else u=d(t),n=new R(a=u*s);for(B(e,{buffer:n,byteOffset:h,byteLength:a,length:u,view:new D(n)});l<u;)C(e,l++)}),_&&_(m,V),g=m.prototype=b(N)),g.constructor!==m&&h(g,"constructor",m),U&&h(g,U,o),T[o]=m,r({global:!0,forced:m!=v,sham:!O},T),"BYTES_PER_ELEMENT"in m||h(m,"BYTES_PER_ELEMENT",s),"BYTES_PER_ELEMENT"in g||h(g,"BYTES_PER_ELEMENT",s),k(o)}):e.exports=function(){}},function(e,t,i){var r=i(2),n=i(1),s=i(185),a=i(3).NATIVE_ARRAY_BUFFER_VIEWS,o=r.ArrayBuffer,u=r.Int8Array;e.exports=!a||!n(function(){u(1)})||!n(function(){new u(-1)})||!s(function(e){new u,new u(null),new u(1.5),new u(e)},!0)||n(function(){return 1!==new u(new o(2),1,void 0).length})},function(e,t,i){var r=i(13),n=i(6),s=i(79),a=i(132),o=i(78),u=i(3).aTypedArrayConstructor;e.exports=function(e){var t,i,c,l,h,f,d=r(e),p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=s(d);if(void 0!=g&&!a(g))for(f=(h=g.call(d)).next,d=[];!(l=f.call(h)).done;)d.push(l.value);for(m&&p>2&&(v=o(v,arguments[2],2)),i=n(d.length),c=new(u(this))(i),t=0;i>t;t++)c[t]=m?v(d[t],t):d[t];return c}},function(e,t,i){"use strict";var r=i(0),n=i(2),s=i(75),a=i(141),o=s.ArrayBuffer;r({global:!0,forced:n.ArrayBuffer!==o},{ArrayBuffer:o}),a("ArrayBuffer")},function(e,t,i){"use strict";var r=i(0),n=i(117);r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},function(e,t,i){var r=i(0),n=i(118);r({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},function(e,t,i){"use strict";var r=i(0),n=i(52),s=i(13),a=i(1),o=i(60),u=[],c=u.sort,l=a(function(){u.sort(void 0)}),h=a(function(){u.sort(null)}),f=o("sort");r({target:"Array",proto:!0,forced:l||!h||!f},{sort:function(e){return void 0===e?c.call(s(this)):c.call(s(this),n(e))}})},function(e,t,i){i(0)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(e,t,i){var r=i(0),n=Math.log,s=Math.LOG10E;r({target:"Math",stat:!0},{log10:function(e){return n(e)*s}})},function(e,t,i){var r=i(0),n=i(135);r({target:"Object",stat:!0,forced:Object.assign!==n},{assign:n})},function(e,t,i){i(0)({target:"Object",stat:!0,sham:!i(5)},{create:i(49)})},function(e,t,i){var r=i(0),n=i(1),s=i(13),a=i(67),o=i(121);r({target:"Object",stat:!0,forced:n(function(){a(1)}),sham:!o},{getPrototypeOf:function(e){return a(s(e))}})},function(e,t,i){i(0)({target:"Object",stat:!0},{setPrototypeOf:i(54)})},function(e,t,i){var r=i(0),n=i(48),s=i(52),a=i(11),o=i(8),u=i(49),c=i(129),l=i(1),h=n("Reflect","construct"),f=l(function(){function e(){}return!(h(function(){},[],e)instanceof e)}),d=!l(function(){h(function(){})}),p=f||d;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){s(e),a(t);var i=arguments.length<3?e:s(arguments[2]);if(d&&!f)return h(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var n=i.prototype,l=u(o(n)?n:Object.prototype),p=Function.apply.call(e,l,t);return o(p)?p:l}})},function(e,t,i){"use strict";var r=i(186),n=i(192),s=i(11),a=i(55),o=i(57),u=i(181),c=i(6),l=i(199),h=i(83),f=i(1),d=[].push,p=Math.min,v=!f(function(){return!RegExp(4294967295,"y")});r("split",2,function(e,t,i){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var r=String(a(this)),s=void 0===i?4294967295:i>>>0;if(0===s)return[];if(void 0===e)return[r];if(!n(e))return t.call(r,e,s);for(var o,u,c,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=new RegExp(e.source,f+"g");(o=h.call(v,r))&&!((u=v.lastIndex)>p&&(l.push(r.slice(p,o.index)),o.length>1&&o.index<r.length&&d.apply(l,o.slice(1)),c=o[0].length,p=u,l.length>=s));)v.lastIndex===o.index&&v.lastIndex++;return p===r.length?!c&&v.test("")||l.push(""):l.push(r.slice(p)),l.length>s?l.slice(0,s):l}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var n=a(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,n,i):r.call(String(n),t,i)},function(e,n){var a=i(r,e,this,n,r!==t);if(a.done)return a.value;var h=s(e),f=String(this),d=o(h,RegExp),m=h.unicode,g=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),y=new d(v?h:"^(?:"+h.source+")",g),b=void 0===n?4294967295:n>>>0;if(0===b)return[];if(0===f.length)return null===l(y,f)?[f]:[];for(var _=0,A=0,w=[];A<f.length;){y.lastIndex=v?A:0;var S,k=l(y,v?f:f.slice(A));if(null===k||(S=p(c(y.lastIndex+(v?0:A)),f.length))===_)A=u(f,A,m);else{if(w.push(f.slice(_,A)),w.length===b)return w;for(var T=1;T<=k.length-1;T++)if(w.push(k[T]),w.length===b)return w;A=_=S}}return w.push(f.slice(_)),w}]},!v)},function(e,t,i){var r=i(2),n=i(126),s=i(117),a=i(15);for(var o in n){var u=r[o],c=u&&u.prototype;if(c&&c.forEach!==s)try{a(c,"forEach",s)}catch(e){c.forEach=s}}},function(e,t,i){"use strict";i(14);var r=i(0),n=i(48),s=i(134),a=i(16),o=i(139),u=i(56),c=i(122),l=i(21),h=i(74),f=i(7),d=i(78),p=i(62),v=i(11),m=i(8),g=i(49),y=i(47),b=i(187),_=i(79),A=i(4),w=n("fetch"),S=n("Headers"),k=A("iterator"),T=l.set,C=l.getterFor("URLSearchParams"),x=l.getterFor("URLSearchParamsIterator"),E=/\+/g,P=Array(4),B=function(e){return P[e-1]||(P[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},M=function(e){try{return decodeURIComponent(e)}catch(t){return e}},I=function(e){var t=e.replace(E," "),i=4;try{return decodeURIComponent(t)}catch(e){for(;i;)t=t.replace(B(i--),M);return t}},L=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},R=function(e){return F[e]},D=function(e){return encodeURIComponent(e).replace(L,R)},O=function(e,t){if(t)for(var i,r,n=t.split("&"),s=0;s<n.length;)(i=n[s++]).length&&(r=i.split("="),e.push({key:I(r.shift()),value:I(r.join("="))}))},U=function(e){this.entries.length=0,O(this.entries,e)},V=function(e,t){if(e<t)throw TypeError("Not enough arguments")},N=c(function(e,t){T(this,{type:"URLSearchParamsIterator",iterator:b(C(e).entries),kind:t})},"Iterator",function(){var e=x(this),t=e.kind,i=e.iterator.next(),r=i.value;return i.done||(i.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),i}),j=function(){h(this,j,"URLSearchParams");var e,t,i,r,n,s,a,o,u,c=arguments.length>0?arguments[0]:void 0,l=[];if(T(this,{type:"URLSearchParams",entries:l,updateURL:function(){},updateSearchParams:U}),void 0!==c)if(m(c))if("function"==typeof(e=_(c)))for(i=(t=e.call(c)).next;!(r=i.call(t)).done;){if((a=(s=(n=b(v(r.value))).next).call(n)).done||(o=s.call(n)).done||!s.call(n).done)throw TypeError("Expected sequence with length 2");l.push({key:a.value+"",value:o.value+""})}else for(u in c)f(c,u)&&l.push({key:u,value:c[u]+""});else O(l,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},H=j.prototype;o(H,{append:function(e,t){V(arguments.length,2);var i=C(this);i.entries.push({key:e+"",value:t+""}),i.updateURL()},delete:function(e){V(arguments.length,1);for(var t=C(this),i=t.entries,r=e+"",n=0;n<i.length;)i[n].key===r?i.splice(n,1):n++;t.updateURL()},get:function(e){V(arguments.length,1);for(var t=C(this).entries,i=e+"",r=0;r<t.length;r++)if(t[r].key===i)return t[r].value;return null},getAll:function(e){V(arguments.length,1);for(var t=C(this).entries,i=e+"",r=[],n=0;n<t.length;n++)t[n].key===i&&r.push(t[n].value);return r},has:function(e){V(arguments.length,1);for(var t=C(this).entries,i=e+"",r=0;r<t.length;)if(t[r++].key===i)return!0;return!1},set:function(e,t){V(arguments.length,1);for(var i,r=C(this),n=r.entries,s=!1,a=e+"",o=t+"",u=0;u<n.length;u++)(i=n[u]).key===a&&(s?n.splice(u--,1):(s=!0,i.value=o));s||n.push({key:a,value:o}),r.updateURL()},sort:function(){var e,t,i,r=C(this),n=r.entries,s=n.slice();for(n.length=0,i=0;i<s.length;i++){for(e=s[i],t=0;t<i;t++)if(n[t].key>e.key){n.splice(t,0,e);break}t===i&&n.push(e)}r.updateURL()},forEach:function(e){for(var t,i=C(this).entries,r=d(e,arguments.length>1?arguments[1]:void 0,3),n=0;n<i.length;)r((t=i[n++]).value,t.key,this)},keys:function(){return new N(this,"keys")},values:function(){return new N(this,"values")},entries:function(){return new N(this,"entries")}},{enumerable:!0}),a(H,k,H.entries),a(H,"toString",function(){for(var e,t=C(this).entries,i=[],r=0;r<t.length;)e=t[r++],i.push(D(e.key)+"="+D(e.value));return i.join("&")},{enumerable:!0}),u(j,"URLSearchParams"),r({global:!0,forced:!s},{URLSearchParams:j}),s||"function"!=typeof w||"function"!=typeof S||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,i,r,n=[e];return arguments.length>1&&(t=arguments[1],m(t)&&(i=t.body,"URLSearchParams"===p(i)&&((r=t.headers?new S(t.headers):new S).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:y(0,String(i)),headers:y(0,r)}))),n.push(t)),w.apply(this,n)}}),e.exports={URLSearchParams:j,getState:C}},function(e,t,i){"use strict";i(71);var r,n=i(0),s=i(5),a=i(134),o=i(2),u=i(136),c=i(16),l=i(74),h=i(7),f=i(135),d=i(183),p=i(104).codeAt,v=i(200),m=i(56),g=i(220),y=i(21),b=o.URL,_=g.URLSearchParams,A=g.getState,w=y.set,S=y.getterFor("URL"),k=Math.floor,T=Math.pow,C=/[A-Za-z]/,x=/[\d+-.A-Za-z]/,E=/\d/,P=/^(0x|0X)/,B=/^[0-7]+$/,M=/^\d+$/,I=/^[\dA-Fa-f]+$/,L=/[\u0000\u0009\u000A\u000D #%\/:?@[\\]]/,F=/[\u0000\u0009\u000A\u000D #\/:?@[\\]]/,R=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,D=/[\u0009\u000A\u000D]/g,O=function(e,t){var i,r,n;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(i=V(t.slice(1,-1))))return"Invalid host";e.host=i}else if(q(e)){if(t=v(t),L.test(t))return"Invalid host";if(null===(i=U(t)))return"Invalid host";e.host=i}else{if(F.test(t))return"Invalid host";for(i="",r=d(t),n=0;n<r.length;n++)i+=Y(r[n],j);e.host=i}},U=function(e){var t,i,r,n,s,a,o,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(i=[],r=0;r<t;r++){if(""==(n=u[r]))return e;if(s=10,n.length>1&&"0"==n.charAt(0)&&(s=P.test(n)?16:8,n=n.slice(8==s?1:2)),""===n)a=0;else{if(!(10==s?M:8==s?B:I).test(n))return e;a=parseInt(n,s)}i.push(a)}for(r=0;r<t;r++)if(a=i[r],r==t-1){if(a>=T(256,5-t))return null}else if(a>255)return null;for(o=i.pop(),r=0;r<i.length;r++)o+=i[r]*T(256,3-r);return o},V=function(e){var t,i,r,n,s,a,o,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=i=0;i<4&&I.test(f());)t=16*t+parseInt(f(),16),h++,i++;if("."==f()){if(0==i)return;if(h-=i,c>6)return;for(r=0;f();){if(n=null,r>0){if(!("."==f()&&r<4))return;h++}if(!E.test(f()))return;for(;E.test(f());){if(s=parseInt(f(),10),null===n)n=s;else{if(0==n)return;n=10*n+s}if(n>255)return;h++}u[c]=256*u[c]+n,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)o=u[c],u[c--]=u[l+a-1],u[l+--a]=o;else if(8!=c)return;return u},N=function(e){var t,i,r,n;if("number"==typeof e){for(t=[],i=0;i<4;i++)t.unshift(e%256),e=k(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,i=1,r=null,n=0,s=0;s<8;s++)0!==e[s]?(n>i&&(t=r,i=n),r=null,n=0):(null===r&&(r=s),++n);return n>i&&(t=r,i=n),t}(e),i=0;i<8;i++)n&&0===e[i]||(n&&(n=!1),r===i?(t+=i?":":"::",n=!0):(t+=e[i].toString(16),i<7&&(t+=":")));return"["+t+"]"}return e},j={},H=f({},j,{" ":1,'"':1,"<":1,">":1,"`":1}),z=f({},H,{"#":1,"?":1,"{":1,"}":1}),W=f({},z,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Y=function(e,t){var i=p(e,0);return i>32&&i<127&&!h(t,e)?e:encodeURIComponent(e)},Q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},q=function(e){return h(Q,e.scheme)},G=function(e){return""!=e.username||""!=e.password},J=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},K=function(e,t){var i;return 2==e.length&&C.test(e.charAt(0))&&(":"==(i=e.charAt(1))||!t&&"|"==i)},X=function(e){var t;return e.length>1&&K(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Z=function(e){var t=e.path,i=t.length;!i||"file"==e.scheme&&1==i&&K(t[0],!0)||t.pop()},$=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ie={},re={},ne={},se={},ae={},oe={},ue={},ce={},le={},he={},fe={},de={},pe={},ve={},me={},ge={},ye={},be={},_e={},Ae=function(e,t,i,n){var s,a,o,u,c,l=i||ee,f=0,p="",v=!1,m=!1,g=!1;for(i||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(R,"")),t=t.replace(D,""),s=d(t);f<=s.length;){switch(a=s[f],l){case ee:if(!a||!C.test(a)){if(i)return"Invalid scheme";l=ie;continue}p+=a.toLowerCase(),l=te;break;case te:if(a&&(x.test(a)||"+"==a||"-"==a||"."==a))p+=a.toLowerCase();else{if(":"!=a){if(i)return"Invalid scheme";p="",l=ie,f=0;continue}if(i&&(q(e)!=h(Q,p)||"file"==p&&(G(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,i)return void(q(e)&&Q[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=de:q(e)&&n&&n.scheme==e.scheme?l=re:q(e)?l=oe:"/"==s[f+1]?(l=ne,f++):(e.cannotBeABaseURL=!0,e.path.push(""),l=ye)}break;case ie:if(!n||n.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==a){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,l=_e;break}l="file"==n.scheme?de:se;continue;case re:if("/"!=a||"/"!=s[f+1]){l=se;continue}l=ue,f++;break;case ne:if("/"==a){l=ce;break}l=ge;continue;case se:if(e.scheme=n.scheme,a==r)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==a||"\\"==a&&q(e))l=ae;else if("?"==a)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",l=be;else{if("#"!=a){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),l=ge;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",l=_e}break;case ae:if(!q(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,l=ge;continue}l=ce}else l=ue;break;case oe:if(l=ue,"/"!=a||"/"!=p.charAt(f+1))continue;f++;break;case ue:if("/"!=a&&"\\"!=a){l=ce;continue}break;case ce:if("@"==a){v&&(p="%40"+p),v=!0,o=d(p);for(var y=0;y<o.length;y++){var b=o[y];if(":"!=b||g){var _=Y(b,W);g?e.password+=_:e.username+=_}else g=!0}p=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&q(e)){if(v&&""==p)return"Invalid authority";f-=d(p).length+1,p="",l=le}else p+=a;break;case le:case he:if(i&&"file"==e.scheme){l=ve;continue}if(":"!=a||m){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&q(e)){if(q(e)&&""==p)return"Invalid host";if(i&&""==p&&(G(e)||null!==e.port))return;if(u=O(e,p))return u;if(p="",l=me,i)return;continue}"["==a?m=!0:"]"==a&&(m=!1),p+=a}else{if(""==p)return"Invalid host";if(u=O(e,p))return u;if(p="",l=fe,i==he)return}break;case fe:if(!E.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&q(e)||i){if(""!=p){var A=parseInt(p,10);if(A>65535)return"Invalid port";e.port=q(e)&&A===Q[e.scheme]?null:A,p=""}if(i)return;l=me;continue}return"Invalid port"}p+=a;break;case de:if(e.scheme="file","/"==a||"\\"==a)l=pe;else{if(!n||"file"!=n.scheme){l=ge;continue}if(a==r)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==a)e.host=n.host,e.path=n.path.slice(),e.query="",l=be;else{if("#"!=a){X(s.slice(f).join(""))||(e.host=n.host,e.path=n.path.slice(),Z(e)),l=ge;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",l=_e}}break;case pe:if("/"==a||"\\"==a){l=ve;break}n&&"file"==n.scheme&&!X(s.slice(f).join(""))&&(K(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),l=ge;continue;case ve:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!i&&K(p))l=ge;else if(""==p){if(e.host="",i)return;l=me}else{if(u=O(e,p))return u;if("localhost"==e.host&&(e.host=""),i)return;p="",l=me}continue}p+=a;break;case me:if(q(e)){if(l=ge,"/"!=a&&"\\"!=a)continue}else if(i||"?"!=a)if(i||"#"!=a){if(a!=r&&(l=ge,"/"!=a))continue}else e.fragment="",l=_e;else e.query="",l=be;break;case ge:if(a==r||"/"==a||"\\"==a&&q(e)||!i&&("?"==a||"#"==a)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(Z(e),"/"==a||"\\"==a&&q(e)||e.path.push("")):$(p)?"/"==a||"\\"==a&&q(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&K(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(a==r||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",l=be):"#"==a&&(e.fragment="",l=_e)}else p+=Y(a,z);break;case ye:"?"==a?(e.query="",l=be):"#"==a?(e.fragment="",l=_e):a!=r&&(e.path[0]+=Y(a,j));break;case be:i||"#"!=a?a!=r&&("'"==a&&q(e)?e.query+="%27":e.query+="#"==a?"%23":Y(a,j)):(e.fragment="",l=_e);break;case _e:a!=r&&(e.fragment+=Y(a,H))}f++}},we=function(e){var t,i,r=l(this,we,"URL"),n=arguments.length>1?arguments[1]:void 0,a=String(e),o=w(r,{type:"URL"});if(void 0!==n)if(n instanceof we)t=S(n);else if(i=Ae(t={},String(n)))throw TypeError(i);if(i=Ae(o,a,null,t))throw TypeError(i);var u=o.searchParams=new _,c=A(u);c.updateSearchParams(o.query),c.updateURL=function(){o.query=String(u)||null},s||(r.href=ke.call(r),r.origin=Te.call(r),r.protocol=Ce.call(r),r.username=xe.call(r),r.password=Ee.call(r),r.host=Pe.call(r),r.hostname=Be.call(r),r.port=Me.call(r),r.pathname=Ie.call(r),r.search=Le.call(r),r.searchParams=Fe.call(r),r.hash=Re.call(r))},Se=we.prototype,ke=function(){var e=S(this),t=e.scheme,i=e.username,r=e.password,n=e.host,s=e.port,a=e.path,o=e.query,u=e.fragment,c=t+":";return null!==n?(c+="//",G(e)&&(c+=i+(r?":"+r:"")+"@"),c+=N(n),null!==s&&(c+=":"+s)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==o&&(c+="?"+o),null!==u&&(c+="#"+u),c},Te=function(){var e=S(this),t=e.scheme,i=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&q(e)?t+"://"+N(e.host)+(null!==i?":"+i:""):"null"},Ce=function(){return S(this).scheme+":"},xe=function(){return S(this).username},Ee=function(){return S(this).password},Pe=function(){var e=S(this),t=e.host,i=e.port;return null===t?"":null===i?N(t):N(t)+":"+i},Be=function(){var e=S(this).host;return null===e?"":N(e)},Me=function(){var e=S(this).port;return null===e?"":String(e)},Ie=function(){var e=S(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Le=function(){var e=S(this).query;return e?"?"+e:""},Fe=function(){return S(this).searchParams},Re=function(){var e=S(this).fragment;return e?"#"+e:""},De=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(s&&u(Se,{href:De(ke,function(e){var t=S(this),i=String(e),r=Ae(t,i);if(r)throw TypeError(r);A(t.searchParams).updateSearchParams(t.query)}),origin:De(Te),protocol:De(Ce,function(e){var t=S(this);Ae(t,String(e)+":",ee)}),username:De(xe,function(e){var t=S(this),i=d(String(e));if(!J(t)){t.username="";for(var r=0;r<i.length;r++)t.username+=Y(i[r],W)}}),password:De(Ee,function(e){var t=S(this),i=d(String(e));if(!J(t)){t.password="";for(var r=0;r<i.length;r++)t.password+=Y(i[r],W)}}),host:De(Pe,function(e){var t=S(this);t.cannotBeABaseURL||Ae(t,String(e),le)}),hostname:De(Be,function(e){var t=S(this);t.cannotBeABaseURL||Ae(t,String(e),he)}),port:De(Me,function(e){var t=S(this);J(t)||(""==(e=String(e))?t.port=null:Ae(t,e,fe))}),pathname:De(Ie,function(e){var t=S(this);t.cannotBeABaseURL||(t.path=[],Ae(t,e+"",me))}),search:De(Le,function(e){var t=S(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ae(t,e,be)),A(t.searchParams).updateSearchParams(t.query)}),searchParams:De(Fe),hash:De(Re,function(e){var t=S(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ae(t,e,_e)):t.fragment=null})}),c(Se,"toJSON",function(){return ke.call(this)},{enumerable:!0}),c(Se,"toString",function(){return ke.call(this)},{enumerable:!0}),b){var Oe=b.createObjectURL,Ue=b.revokeObjectURL;Oe&&c(we,"createObjectURL",function(e){return Oe.apply(b,arguments)}),Ue&&c(we,"revokeObjectURL",function(e){return Ue.apply(b,arguments)})}m(we,"URL"),n({global:!0,forced:!a,sham:!s},{URL:we})},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){e.exports=i(152)}]);